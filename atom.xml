<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>笑傲江湖</title>
  <subtitle>思想与技术的碰撞</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.lflxp.cn/"/>
  <updated>2016-04-09T10:22:54.209Z</updated>
  <id>http://www.lflxp.cn/</id>
  
  <author>
    <name>爱像水墨青花</name>
    <email>382023823@qq.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>数学之美</title>
    <link href="http://www.lflxp.cn/2016/04/09/2016-04-09-%E6%95%B0%E5%AD%A6%E4%B9%8B%E7%BE%8E/"/>
    <id>http://www.lflxp.cn/2016/04/09/2016-04-09-数学之美/</id>
    <published>2016-04-09T10:15:25.085Z</published>
    <updated>2016-04-09T10:22:54.209Z</updated>
    
    <content type="html">&lt;p&gt;&lt;a href=&quot;http://mindhacks.cn/2008/09/21/the-magical-bayesian-method/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;数学之美番外篇：平凡而又神奇的贝叶斯方法&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;概率论只不过是把常识用数学公式表达了出来。&lt;/p&gt;
&lt;p&gt;——拉普拉斯&lt;/p&gt;
&lt;p&gt;记得读本科的时候，最喜欢到城里的计算机书店里面去闲逛，一逛就是好几个小时；有一次，在书店看到一本书，名叫贝叶斯方法。当时数学系的课程还没有学到概率统计。我心想，一个方法能够专门写出一本书来，肯定很牛逼。后来，我发现当初的那个朴素归纳推理成立了——这果然是个牛逼的方法。&lt;/p&gt;
&lt;p&gt;——题记&lt;/p&gt;
&lt;h1 id=&quot;目录&quot;&gt;&lt;a href=&quot;#目录&quot; class=&quot;headerlink&quot; title=&quot;目录&quot;&gt;&lt;/a&gt;目录&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;前言 &lt;/li&gt;
&lt;li&gt;历史&lt;br&gt; 1.1 一个例子：自然语言的二义性&lt;br&gt; 1.2 贝叶斯公式 &lt;/li&gt;
&lt;li&gt;拼写纠正 &lt;/li&gt;
&lt;li&gt;模型比较与贝叶斯奥卡姆剃刀&lt;br&gt; 3.1 再访拼写纠正&lt;br&gt; 3.2 模型比较理论（Model Comparasion）与贝叶斯奥卡姆剃刀（Bayesian Occam’s Razor）&lt;br&gt; 3.3 最小描述长度原则&lt;br&gt; 3.4 最优贝叶斯推理 &lt;/li&gt;
&lt;li&gt;无处不在的贝叶斯&lt;br&gt; 4.1 中文分词&lt;br&gt; 4.2 统计机器翻译&lt;br&gt; 4.3 贝叶斯图像识别，Analysis by Synthesis&lt;br&gt; 4.4 EM 算法与基于模型的聚类&lt;br&gt; 4.5 最大似然与最小二乘 &lt;/li&gt;
&lt;li&gt;朴素贝叶斯方法（又名“愚蠢者的贝叶斯（idiot’s bayes）”）&lt;br&gt; 5.1 垃圾邮件过滤器&lt;br&gt; 5.2 为什么朴素贝叶斯方法令人诧异地好——一个理论解释 &lt;/li&gt;
&lt;li&gt;层级贝叶斯模型&lt;br&gt; 6.1 隐马可夫模型（HMM） &lt;/li&gt;
&lt;li&gt;贝叶斯网络&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;这是一篇关于贝叶斯方法的科普文，我会尽量少用公式，多用平白的语言叙述，多举实际例子。更严格的公式和计算我会在相应的地方注明参考资料。贝叶斯方法被证明是非常 general 且强大的推理框架，文中你会看到很多有趣的应用。&lt;/p&gt;
&lt;h1 id=&quot;历史&quot;&gt;&lt;a href=&quot;#历史&quot; class=&quot;headerlink&quot; title=&quot;历史&quot;&gt;&lt;/a&gt;历史&lt;/h1&gt;&lt;p&gt;托马斯·贝叶斯（Thomas Bayes）同学的详细生平在这里。以下摘一段 wikipedia 上的简介：&lt;/p&gt;
&lt;p&gt;所谓的贝叶斯方法源于他生前为解决一个“逆概”问题写的一篇文章，而这篇文章是在他死后才由他的一位朋友发表出来的。在贝叶斯写这篇文章之前，人们已经能够计算“正向概率”，如“假设袋子里面有N个白球，M个黑球，你伸手进去摸一把，摸出黑球的概率是多大”。而一个自然而然的问题是反过来：“如果我们事先并不知道袋子里面黑白球的比例，而是闭着眼睛摸出一个（或好几个）球，观察这些取出来的球的颜色之后，那么我们可以就此对袋子里面的黑白球的比例作出什么样的推测”。这个问题，就是所谓的逆概问题。&lt;/p&gt;
&lt;p&gt;实际上，贝叶斯当时的论文只是对这个问题的一个直接的求解尝试，并不清楚他当时是不是已经意识到这里面包含着的深刻的思想。然而后来，贝叶斯方法席卷了概率论，并将应用延伸到各个问题领域，所有需要作出概率预测的地方都可以见到贝叶斯方法的影子，特别地，贝叶斯是机器学习的核心方法之一。这背后的深刻原因在于，现实世界本身就是不确定的，人类的观察能力是有局限性的（否则有很大一部分科学就没有必要做了——设想我们能够直接观察到电子的运行，还需要对原子模型争吵不休吗？），我们日常所观察到的只是事物表面上的结果，沿用刚才那个袋子里面取球的比方，我们往往只能知道从里面取出来的球是什么颜色，而并不能直接看到袋子里面实际的情况。这个时候，我们就需要提供一个猜测（hypothesis，更为严格的说法是“假设”，这里用“猜测”更通俗易懂一点），所谓猜测，当然就是不确定的（很可能有好多种乃至无数种猜测都能满足目前的观测），但也绝对不是两眼一抹黑瞎蒙——具体地说，我们需要做两件事情：1. 算出各种不同猜测的可能性大小。2. 算出最靠谱的猜测是什么。第一个就是计算特定猜测的后验概率，对于连续的猜测空间则是计算猜测的概率密度函数。第二个则是所谓的模型比较，模型比较如果不考虑先验概率的话就是最大似然方法。&lt;/p&gt;
&lt;h2 id=&quot;一个例子：自然语言的二义性&quot;&gt;&lt;a href=&quot;#一个例子：自然语言的二义性&quot; class=&quot;headerlink&quot; title=&quot;一个例子：自然语言的二义性&quot;&gt;&lt;/a&gt;一个例子：自然语言的二义性&lt;/h2&gt;&lt;p&gt;下面举一个自然语言的不确定性的例子。当你看到这句话：&lt;/p&gt;
&lt;p&gt;The girl saw the boy with a telescope.&lt;/p&gt;
&lt;p&gt;你对这句话的含义有什么猜测？平常人肯定会说：那个女孩拿望远镜看见了那个男孩（即你对这个句子背后的实际语法结构的猜测是：The girl saw-with-a-telescope the boy ）。然而，仔细一想，你会发现这个句子完全可以解释成：那个女孩看见了那个拿着望远镜的男孩（即：The girl saw the-boy-with-a-telescope ）。那为什么平常生活中我们每个人都能够迅速地对这种二义性进行消解呢？这背后到底隐藏着什么样的思维法则？我们留到后面解释。&lt;/p&gt;
&lt;h2 id=&quot;贝叶斯公式&quot;&gt;&lt;a href=&quot;#贝叶斯公式&quot; class=&quot;headerlink&quot; title=&quot;贝叶斯公式&quot;&gt;&lt;/a&gt;贝叶斯公式&lt;/h2&gt;&lt;p&gt;贝叶斯公式是怎么来的？&lt;/p&gt;
&lt;p&gt;我们还是使用 wikipedia 上的一个例子：&lt;/p&gt;
&lt;p&gt;一所学校里面有 60% 的男生，40% 的女生。男生总是穿长裤，女生则一半穿长裤一半穿裙子。有了这些信息之后我们可以容易地计算“随机选取一个学生，他（她）穿长裤的概率和穿裙子的概率是多大”，这个就是前面说的“正向概率”的计算。然而，假设你走在校园中，迎面走来一个穿长裤的学生（很不幸的是你高度近似，你只看得见他（她）穿的是否长裤，而无法确定他（她）的性别），你能够推断出他（她）是男生的概率是多大吗？&lt;/p&gt;
&lt;p&gt;一些认知科学的研究表明（《决策与判断》以及《Rationality for Mortals》第12章：小孩也可以解决贝叶斯问题），我们对形式化的贝叶斯问题不擅长，但对于以频率形式呈现的等价问题却很擅长。在这里，我们不妨把问题重新叙述成：你在校园里面随机游走，遇到了 N 个穿长裤的人（仍然假设你无法直接观察到他们的性别），问这 N 个人里面有多少个女生多少个男生。&lt;/p&gt;
&lt;p&gt;你说，这还不简单：算出学校里面有多少穿长裤的，然后在这些人里面再算出有多少女生，不就行了？&lt;/p&gt;
&lt;p&gt;我们来算一算：假设学校里面人的总数是 U 个。60% 的男生都穿长裤，于是我们得到了 U &lt;em&gt; P(Boy) &lt;/em&gt; P(Pants|Boy) 个穿长裤的（男生）（其中 P(Boy) 是男生的概率 = 60%，这里可以简单的理解为男生的比例；P(Pants|Boy) 是条件概率，即在 Boy 这个条件下穿长裤的概率是多大，这里是 100% ，因为所有男生都穿长裤）。40% 的女生里面又有一半（50%）是穿长裤的，于是我们又得到了 U &lt;em&gt; P(Girl) &lt;/em&gt; P(Pants|Girl) 个穿长裤的（女生）。加起来一共是 U &lt;em&gt; P(Boy) &lt;/em&gt; P(Pants|Boy) + U &lt;em&gt; P(Girl) &lt;/em&gt; P(Pants|Girl) 个穿长裤的，其中有 U &lt;em&gt; P(Girl) &lt;/em&gt; P(Pants|Girl) 个女生。两者一比就是你要求的答案。&lt;/p&gt;
&lt;p&gt;下面我们把这个答案形式化一下：我们要求的是 P(Girl|Pants) （穿长裤的人里面有多少女生），我们计算的结果是 U &lt;em&gt; P(Girl) &lt;/em&gt; P(Pants|Girl) / [U &lt;em&gt; P(Boy) &lt;/em&gt; P(Pants|Boy) + U &lt;em&gt; P(Girl) &lt;/em&gt; P(Pants|Girl)] 。容易发现这里校园内人的总数是无关的，可以消去。于是得到&lt;/p&gt;
&lt;p&gt;P(Girl|Pants) = P(Girl) &lt;em&gt; P(Pants|Girl) / [P(Boy) &lt;/em&gt; P(Pants|Boy) + P(Girl) * P(Pants|Girl)]&lt;/p&gt;
&lt;p&gt;注意，如果把上式收缩起来，分母其实就是 P(Pants) ，分子其实就是 P(Pants, Girl) 。而这个比例很自然地就读作：在穿长裤的人（ P(Pants) ）里面有多少（穿长裤）的女孩（ P(Pants, Girl) ）。&lt;/p&gt;
&lt;p&gt;上式中的 Pants 和 Boy/Girl 可以指代一切东西，所以其一般形式就是：&lt;/p&gt;
&lt;p&gt;P(B|A) = P(A|B) &lt;em&gt; P(B) / [P(A|B) &lt;/em&gt; P(B) + P(A|~B) * P(~B) ]&lt;/p&gt;
&lt;p&gt;收缩起来就是：&lt;/p&gt;
&lt;p&gt;P(B|A) = P(AB) / P(A)&lt;/p&gt;
&lt;p&gt;其实这个就等于：&lt;/p&gt;
&lt;p&gt;P(B|A) * P(A) = P(AB)&lt;/p&gt;
&lt;p&gt;难怪拉普拉斯说概率论只是把常识用数学公式表达了出来。&lt;/p&gt;
&lt;p&gt;然而，后面我们会逐渐发现，看似这么平凡的贝叶斯公式，背后却隐含着非常深刻的原理。&lt;/p&gt;
&lt;h1 id=&quot;拼写纠正&quot;&gt;&lt;a href=&quot;#拼写纠正&quot; class=&quot;headerlink&quot; title=&quot;拼写纠正&quot;&gt;&lt;/a&gt;拼写纠正&lt;/h1&gt;&lt;p&gt;经典著作《人工智能：现代方法》的作者之一 Peter Norvig 曾经写过一篇介绍如何写一个拼写检查/纠正器的文章（原文在这里，徐宥的翻译版在这里，这篇文章很深入浅出，强烈建议读一读），里面用到的就是贝叶斯方法，这里我们不打算复述他写的文章，而是简要地将其核心思想介绍一下。&lt;/p&gt;
&lt;p&gt;首先，我们需要询问的是：“问题是什么？”&lt;/p&gt;
&lt;p&gt;问题是我们看到用户输入了一个不在字典中的单词，我们需要去猜测：“这个家伙到底真正想输入的单词是什么呢？”用刚才我们形式化的语言来叙述就是，我们需要求：&lt;/p&gt;
&lt;p&gt;P(我们猜测他想输入的单词 | 他实际输入的单词)&lt;/p&gt;
&lt;p&gt;这个概率。并找出那个使得这个概率最大的猜测单词。显然，我们的猜测未必是唯一的，就像前面举的那个自然语言的歧义性的例子一样；这里，比如用户输入： thew ，那么他到底是想输入 the ，还是想输入 thaw ？到底哪个猜测可能性更大呢？幸运的是我们可以用贝叶斯公式来直接出它们各自的概率，我们不妨将我们的多个猜测记为 h1 h2 .. （ h 代表 hypothesis），它们都属于一个有限且离散的猜测空间 H （单词总共就那么多而已），将用户实际输入的单词记为 D （ D 代表 Data ，即观测数据），于是&lt;/p&gt;
&lt;p&gt;P(我们的猜测1 | 他实际输入的单词)&lt;/p&gt;
&lt;p&gt;可以抽象地记为：&lt;/p&gt;
&lt;p&gt;P(h1 | D)&lt;/p&gt;
&lt;p&gt;类似地，对于我们的猜测2，则是 P(h2 | D)。不妨统一记为：&lt;/p&gt;
&lt;p&gt;P(h | D)&lt;/p&gt;
&lt;p&gt;运用一次贝叶斯公式，我们得到：&lt;/p&gt;
&lt;p&gt;P(h | D) = P(h) * P(D | h) / P(D)&lt;/p&gt;
&lt;p&gt;对于不同的具体猜测 h1 h2 h3 .. ，P(D) 都是一样的，所以在比较 P(h1 | D) 和 P(h2 | D) 的时候我们可以忽略这个常数。即我们只需要知道：&lt;/p&gt;
&lt;p&gt;P(h | D) ∝ P(h) * P(D | h) （注：那个符号的意思是“正比例于”，不是无穷大，注意符号右端是有一个小缺口的。）&lt;/p&gt;
&lt;p&gt;这个式子的抽象含义是：对于给定观测数据，一个猜测是好是坏，取决于“这个猜测本身独立的可能性大小（先验概率，Prior ）”和“这个猜测生成我们观测到的数据的可能性大小”（似然，Likelihood ）的乘积。具体到我们的那个 thew 例子上，含义就是，用户实际是想输入 the 的可能性大小取决于 the 本身在词汇表中被使用的可能性（频繁程度）大小（先验概率）和 想打 the 却打成 thew 的可能性大小（似然）的乘积。&lt;/p&gt;
&lt;p&gt;下面的事情就很简单了，对于我们猜测为可能的每个单词计算一下 P(h) * P(D | h) 这个值，然后取最大的，得到的就是最靠谱的猜测。&lt;/p&gt;
&lt;p&gt;一点注记：Norvig 的拼写纠正器里面只提取了编辑距离为 2 以内的所有已知单词。这是为了避免去遍历字典中每个单词计算它们的 P(h) &lt;em&gt; P(D | h) ，但这种做法为了节省时间带来了一些误差。但话说回来难道我们人类真的回去遍历每个可能的单词来计算他们的后验概率吗？不可能。实际上，根据认知神经科学的观点，我们首先根据错误的单词做一个 bottom-up 的关联提取，提取出有可能是实际单词的那些候选单词，这个提取过程就是所谓的基于内容的提取，可以根据错误单词的一些模式片段提取出有限的一组候选，非常快地缩小的搜索空间（比如我输入 explaination ，单词里面就有充分的信息使得我们的大脑在常数时间内把可能性 narrow down 到 explanation 这个单词上，至于具体是根据哪些线索——如音节——来提取，又是如何在生物神经网络中实现这个提取机制的，目前还是一个没有弄清的领域）。然后，我们对这有限的几个猜测做一个 top-down 的预测，看看到底哪个对于观测数据（即错误单词）的预测效力最好，而如何衡量预测效率则就是用贝叶斯公式里面的那个 P(h) &lt;/em&gt; P(D | h) 了——虽然我们很可能使用了一些启发法来简化计算。后面我们还会提到这样的 bottom-up 的关联提取。&lt;/p&gt;
&lt;h1 id=&quot;模型比较与奥卡姆剃刀&quot;&gt;&lt;a href=&quot;#模型比较与奥卡姆剃刀&quot; class=&quot;headerlink&quot; title=&quot;模型比较与奥卡姆剃刀&quot;&gt;&lt;/a&gt;模型比较与奥卡姆剃刀&lt;/h1&gt;&lt;h2 id=&quot;再访拼写纠正&quot;&gt;&lt;a href=&quot;#再访拼写纠正&quot; class=&quot;headerlink&quot; title=&quot;再访拼写纠正&quot;&gt;&lt;/a&gt;再访拼写纠正&lt;/h2&gt;&lt;p&gt;介绍了贝叶斯拼写纠正之后，接下来的一个自然而然的问题就来了：“为什么？”为什么要用贝叶斯公式？为什么贝叶斯公式在这里可以用？我们可以很容易地领会为什么贝叶斯公式用在前面介绍的那个男生女生长裤裙子的问题里是正确的。但为什么这里？&lt;/p&gt;
&lt;p&gt;为了回答这个问题，一个常见的思路就是想想：非得这样吗？因为如果你想到了另一种做法并且证明了它也是靠谱的，那么将它与现在这个一比较，也许就能得出很有价值的信息。那么对于拼写纠错问题你能想到其他方案吗？&lt;/p&gt;
&lt;p&gt;不管怎样，一个最常见的替代方案就是，选择离 thew 的编辑距离最近的。然而 the 和 thaw 离 thew 的编辑距离都是 1 。这可咋办捏？你说，不慌，那还是好办。我们就看到底哪个更可能被错打为 thew 就是了。我们注意到字母 e 和字母 w 在键盘上离得很紧，无名指一抽筋就不小心多打出一个 w 来，the 就变成 thew 了。而另一方面 thaw 被错打成 thew 的可能性就相对小一点，因为 e 和 a 离得较远而且使用的指头相差一个指头（一个是中指一个是小指，不像 e 和 w 使用的指头靠在一块——神经科学的证据表明紧邻的身体设施之间容易串位）。OK，很好，因为你现在已经是在用最大似然方法了，或者直白一点，你就是在计算那个使得 P(D | h) 最大的 h 。&lt;/p&gt;
&lt;p&gt;而贝叶斯方法计算的是什么？是 P(h) * P(D | h) 。多出来了一个 P(h) 。我们刚才说了，这个多出来的 P(h) 是特定猜测的先验概率。为什么要掺和进一个先验概率？刚才说的那个最大似然不是挺好么？很雄辩地指出了 the 是更靠谱的猜测。有什么问题呢？既然这样，我们就从给最大似然找茬开始吧——我们假设两者的似然程度是一样或非常相近，这样不就难以区分哪个猜测更靠谱了吗？比如用户输入tlp ，那到底是 top 还是 tip ？（这个例子不怎么好，因为 top 和 tip 的词频可能仍然是接近的，但一时想不到好的英文单词的例子，我们不妨就假设 top 比 tip 常见许多吧，这个假设并不影响问题的本质。）这个时候，当最大似然不能作出决定性的判断时，先验概率就可以插手进来给出指示——“既然你无法决定，那么我告诉你，一般来说 top 出现的程度要高许多，所以更可能他想打的是 top ”）。&lt;/p&gt;
&lt;p&gt;以上只是最大似然的一个问题，即并不能提供决策的全部信息。&lt;/p&gt;
&lt;p&gt;最大似然还有另一个问题：即便一个猜测与数据非常符合，也并不代表这个猜测就是更好的猜测，因为这个猜测本身的可能性也许就非常低。比如 MacKay 在《Information Theory : Inference and Learning Algorithms》里面就举了一个很好的例子：-1 3 7 11 你说是等差数列更有可能呢？还是 -X^3 / 11 + 9/11*X^2 + 23/11 每项把前项作为 X 带入后计算得到的数列？此外曲线拟合也是，平面上 N 个点总是可以用 N-1 阶多项式来完全拟合，当 N 个点近似但不精确共线的时候，用 N-1 阶多项式来拟合能够精确通过每一个点，然而用直线来做拟合/线性回归的时候却会使得某些点不能位于直线上。你说到底哪个好呢？多项式？还是直线？一般地说肯定是越低阶的多项式越靠谱（当然前提是也不能忽视“似然”P(D | h) ，明摆着一个多项式分布您愣是去拿直线拟合也是不靠谱的，这就是为什么要把它们两者乘起来考虑。），原因之一就是低阶多项式更常见，先验概率（ P(h) ）较大（原因之二则隐藏在 P(D | h) 里面），这就是为什么我们要用样条来插值，而不是直接搞一个 N-1 阶多项式来通过任意 N 个点的原因。&lt;/p&gt;
&lt;p&gt;以上分析当中隐含的哲学是，观测数据总是会有各种各样的误差，比如观测误差（比如你观测的时候一个 MM 经过你一不留神，手一抖就是一个误差出现了），所以如果过分去寻求能够完美解释观测数据的模型，就会落入所谓的数据过配（overfitting）的境地，一个过配的模型试图连误差（噪音）都去解释（而实际上噪音又是不需要解释的），显然就过犹不及了。所以 P(D | h) 大不代表你的 h （猜测）就是更好的 h。还要看 P(h) 是怎样的。所谓奥卡姆剃刀精神就是说：如果两个理论具有相似的解释力度，那么优先选择那个更简单的（往往也正是更平凡的，更少繁复的，更常见的）。&lt;/p&gt;
&lt;p&gt;过分匹配的另一个原因在于当观测的结果并不是因为误差而显得“不精确”而是因为真实世界中对数据的结果产生贡献的因素太多太多，跟噪音不同，这些偏差是一些另外的因素集体贡献的结果，不是你的模型所能解释的——噪音那是不需要解释——一个现实的模型往往只提取出几个与结果相关度很高，很重要的因素（cause）。这个时候观察数据会倾向于围绕你的有限模型的预测结果呈正态分布，于是你实际观察到的结果就是这个正态分布的随机取样，这个取样很可能受到其余因素的影响偏离你的模型所预测的中心，这个时候便不能贪心不足地试图通过改变模型来“完美”匹配数据，因为那些使结果偏离你的预测的贡献因素不是你这个有限模型里面含有的因素所能概括的，硬要打肿脸充胖子只能导致不实际的模型，举个教科书例子：身高和体重的实际关系近似于一个二阶多项式的关系，但大家都知道并不是只有身高才会对体重产生影响，物理世界影响体重的因素太多太多了，有人身材高大却瘦得跟稻草，有人却是横长竖不长。但不可否认的是总体上来说，那些特殊情况越是特殊就越是稀少，呈围绕最普遍情况（胖瘦适中）的正态分布，这个分布就保证了我们的身高——体重相关模型能够在大多数情况下做出靠谱的预测。但是——刚才说了，特例是存在的，就算不是特例，人有胖瘦，密度也有大小，所以完美符合身高——体重的某个假想的二阶多项式关系的人是不存在的，我们又不是欧几里德几何世界当中的理想多面体，所以，当我们对人群随机抽取了 N 个样本（数据点）试图对这 N 个数据点拟合出一个多项式的话就得注意，它肯定得是二阶多项式，我们要做的只是去根据数据点计算出多项式各项的参数（一个典型的方法就是最小二乘）；它肯定不是直线（我们又不是稻草），也不是三阶多项式四阶多项式.. 如果硬要完美拟合 N 个点，你可能会整出一个 N-1 阶多项式来——设想身高和体重的关系是 5 阶多项式看看？&lt;/p&gt;
&lt;h2 id=&quot;模型比较理论（Model-Comparasion）与贝叶斯奥卡姆剃刀（Bayesian-Occam’s-Razor）&quot;&gt;&lt;a href=&quot;#模型比较理论（Model-Comparasion）与贝叶斯奥卡姆剃刀（Bayesian-Occam’s-Razor）&quot; class=&quot;headerlink&quot; title=&quot;模型比较理论（Model Comparasion）与贝叶斯奥卡姆剃刀（Bayesian Occam’s Razor）&quot;&gt;&lt;/a&gt;模型比较理论（Model Comparasion）与贝叶斯奥卡姆剃刀（Bayesian Occam’s Razor）&lt;/h2&gt;&lt;p&gt;实际上，模型比较就是去比较哪个模型（猜测）更可能隐藏在观察数据的背后。其基本思想前面已经用拼写纠正的例子来说明了。我们对用户实际想输入的单词的猜测就是模型，用户输错的单词就是观测数据。我们通过：&lt;/p&gt;
&lt;p&gt;P(h | D) ∝ P(h) * P(D | h)&lt;/p&gt;
&lt;p&gt;来比较哪个模型最为靠谱。前面提到，光靠 P(D | h) （即“似然”）是不够的，有时候还需要引入 P(h) 这个先验概率。奥卡姆剃刀就是说 P(h) 较大的模型有较大的优势，而最大似然则是说最符合观测数据的（即 P(D | h) 最大的）最有优势。整个模型比较就是这两方力量的拉锯。我们不妨再举一个简单的例子来说明这一精神：你随便找枚硬币，掷一下，观察一下结果。好，你观察到的结果要么是“正”，要么是“反”（不，不是少林足球那枚硬币:P ），不妨假设你观察到的是“正”。现在你要去根据这个观测数据推断这枚硬币掷出“正”的概率是多大。根据最大似然估计的精神，我们应该猜测这枚硬币掷出“正”的概率是 1 ，因为这个才是能最大化 P(D | h) 的那个猜测。然而每个人都会大摇其头——很显然，你随机摸出一枚硬币这枚硬币居然没有反面的概率是“不存在的”，我们对一枚随机硬币是否一枚有偏硬币，偏了多少，是有着一个先验的认识的，这个认识就是绝大多数硬币都是基本公平的，偏得越多的硬币越少见（可以用一个 beta 分布来表达这一先验概率）。将这个先验正态分布 p(θ) （其中 θ 表示硬币掷出正面的比例，小写的 p 代表这是概率密度函数）结合到我们的问题中，我们便不是去最大化 P(D | h) ，而是去最大化 P(D | θ) * p(θ) ，显然 θ = 1 是不行的，因为 P(θ=1) 为 0 ，导致整个乘积也为 0 。实际上，只要对这个式子求一个导数就可以得到最值点。&lt;/p&gt;
&lt;p&gt;以上说的是当我们知道先验概率 P(h) 的时候，光用最大似然是不靠谱的，因为最大似然的猜测可能先验概率非常小。然而，有些时候，我们对于先验概率一无所知，只能假设每种猜测的先验概率是均等的，这个时候就只有用最大似然了。实际上，统计学家和贝叶斯学家有一个有趣的争论，统计学家说：我们让数据自己说话。言下之意就是要摒弃先验概率。而贝叶斯支持者则说：数据会有各种各样的偏差，而一个靠谱的先验概率则可以对这些随机噪音做到健壮。事实证明贝叶斯派胜利了，胜利的关键在于所谓先验概率其实也是经验统计的结果，譬如为什么我们会认为绝大多数硬币是基本公平的？为什么我们认为大多数人的肥胖适中？为什么我们认为肤色是种族相关的，而体重则与种族无关？先验概率里面的“先验”并不是指先于一切经验，而是仅指先于我们“当前”给出的观测数据而已，在硬币的例子中先验指的只是先于我们知道投掷的结果这个经验，而并非“先天”。&lt;/p&gt;
&lt;p&gt;然而，话说回来，有时候我们必须得承认，就算是基于以往的经验，我们手头的“先验”概率还是均匀分布，这个时候就必须依赖用最大似然，我们用前面留下的一个自然语言二义性问题来说明这一点：&lt;/p&gt;
&lt;p&gt;The girl saw the boy with a telescope.&lt;/p&gt;
&lt;p&gt;到底是 The girl saw-with-a-telescope the boy 这一语法结构，还是 The girl saw the-boy-with-a-telescope 呢？两种语法结构的常见程度都差不多（你可能会觉得后一种语法结构的常见程度较低，这是事后偏见，你只需想想 The girl saw the boy with a book 就知道了。当然，实际上从大规模语料统计结果来看后一种语法结构的确稍稍不常见一丁点，但是绝对不足以解释我们对第一种结构的强烈倾向）。那么到底为什么呢？&lt;/p&gt;
&lt;p&gt;我们不妨先来看看 MacKay 在书中举的一个漂亮的例子：&lt;/p&gt;
&lt;p&gt;i1&lt;/p&gt;
&lt;p&gt;图中有多少个箱子？特别地，那棵书后面是一个箱子？还是两个箱子？还是三个箱子？还是.. 你可能会觉得树后面肯定是一个箱子，但为什么不是两个呢？如下图：&lt;/p&gt;
&lt;p&gt;i2&lt;/p&gt;
&lt;p&gt;很简单，你会说：要是真的有两个箱子那才怪了，怎么就那么巧这两个箱子刚刚好颜色相同，高度相同呢？&lt;/p&gt;
&lt;p&gt;用概率论的语言来说，你刚才的话就翻译为：猜测 h 不成立，因为 P(D | h) 太小（太巧合）了。我们的直觉是：巧合（小概率）事件不会发生。所以当一个猜测（假设）使得我们的观测结果成为小概率事件的时候，我们就说“才怪呢，哪能那么巧捏？！”&lt;/p&gt;
&lt;p&gt;现在我们可以回到那个自然语言二义性的例子，并给出一个完美的解释了：如果语法结构是 The girl saw the-boy-with-a-telecope 的话，怎么那个男孩偏偏手里拿的就是望远镜——一个可以被用来 saw-with 的东东捏？这也忒小概率了吧。他咋就不会拿本书呢？拿什么都好。怎么偏偏就拿了望远镜？所以唯一的解释是，这个“巧合”背后肯定有它的必然性，这个必然性就是，如果我们将语法结构解释为 The girl saw-with-a-telescope the boy 的话，就跟数据完美吻合了——既然那个女孩是用某个东西去看这个男孩的，那么这个东西是一个望远镜就完全可以解释了（不再是小概率事件了）。&lt;/p&gt;
&lt;p&gt;自然语言二义性很常见，譬如上文中的一句话：&lt;/p&gt;
&lt;p&gt;参见《决策与判断》以及《Rationality for Mortals》第12章：小孩也可以解决贝叶斯问题&lt;/p&gt;
&lt;p&gt;就有二义性：到底是参见这两本书的第 12 章，还是仅仅是第二本书的第 12 章呢？如果是这两本书的第 12 章那就是咄咄怪事了，怎么恰好两本书都有第 12 章，都是讲同一个问题，更诡异的是，标题还相同呢？&lt;/p&gt;
&lt;p&gt;注意，以上做的是似然估计（即只看 P(D | h) 的大小），不含先验概率。通过这两个例子，尤其是那个树后面的箱子的例子我们可以看到，似然估计里面也蕴含着奥卡姆剃刀：树后面的箱子数目越多，这个模型就越复杂。单个箱子的模型是最简单的。似然估计选择了更简单的模型。&lt;/p&gt;
&lt;p&gt;这个就是所谓的贝叶斯奥卡姆剃刀（Bayesian Occam’s Razor），因为这个剃刀工作在贝叶斯公式的似然（P(D | h) ）上，而不是模型本身（ P(h) ）的先验概率上，后者是传统的奥卡姆剃刀。关于贝叶斯奥卡姆剃刀我们再来看一个前面说到的曲线拟合的例子：如果平面上有 N 个点，近似构成一条直线，但绝不精确地位于一条直线上。这时我们既可以用直线来拟合（模型1），也可以用二阶多项式（模型2）拟合，也可以用三阶多项式（模型3），.. ，特别地，用 N-1 阶多项式便能够保证肯定能完美通过 N 个数据点。那么，这些可能的模型之中到底哪个是最靠谱的呢？前面提到，一个衡量的依据是奥卡姆剃刀：越是高阶的多项式越是繁复和不常见。然而，我们其实并不需要依赖于这个先验的奥卡姆剃刀，因为有人可能会争辩说：你怎么就能说越高阶的多项式越不常见呢？我偏偏觉得所有阶多项式都是等可能的。好吧，既然如此那我们不妨就扔掉 P(h) 项，看看 P(D | h) 能告诉我们什么。我们注意到越是高阶的多项式，它的轨迹弯曲程度越是大，到了八九阶简直就是直上直下，于是我们不仅要问：一个比如说八阶多项式在平面上随机生成的一堆 N 个点偏偏恰好近似构成一条直线的概率（即 P(D | h) ）有多大？太小太小了。反之，如果背后的模型是一条直线，那么根据该模型生成一堆近似构成直线的点的概率就大得多了。这就是贝叶斯奥卡姆剃刀。&lt;/p&gt;
&lt;p&gt;这里只是提供一个关于贝叶斯奥卡姆剃刀的科普，强调直观解释，更多理论公式请参考 MacKay 的著作 《Information Theory : Inference and Learning Algorithms》第 28 章。&lt;/p&gt;
&lt;h2 id=&quot;最小描述长度原则&quot;&gt;&lt;a href=&quot;#最小描述长度原则&quot; class=&quot;headerlink&quot; title=&quot;最小描述长度原则&quot;&gt;&lt;/a&gt;最小描述长度原则&lt;/h2&gt;&lt;p&gt;贝叶斯模型比较理论与信息论有一个有趣的关联：&lt;/p&gt;
&lt;p&gt;P(h | D) ∝ P(h) * P(D | h)&lt;/p&gt;
&lt;p&gt;两边求对数，将右式的乘积变成相加：&lt;/p&gt;
&lt;p&gt;ln P(h | D) ∝ ln P(h) + ln P(D | h)&lt;/p&gt;
&lt;p&gt;显然，最大化 P(h | D) 也就是最大化 ln P(h | D)。而 ln P(h) + ln P(D | h) 则可以解释为模型（或者称“假设”、“猜测”）h 的编码长度加上在该模型下数据 D 的编码长度。使这个和最小的模型就是最佳模型。&lt;/p&gt;
&lt;p&gt;而究竟如何定义一个模型的编码长度，以及数据在模型下的编码长度则是一个问题。更多可参考 Mitchell 的 《Machine Learning》的 6.6 节，或 Mackay 的 28.3 节）&lt;/p&gt;
&lt;h2 id=&quot;最优贝叶斯推理&quot;&gt;&lt;a href=&quot;#最优贝叶斯推理&quot; class=&quot;headerlink&quot; title=&quot;最优贝叶斯推理&quot;&gt;&lt;/a&gt;最优贝叶斯推理&lt;/h2&gt;&lt;p&gt;所谓的推理，分为两个过程，第一步是对观测数据建立一个模型。第二步则是使用这个模型来推测未知现象发生的概率。我们前面都是讲的对于观测数据给出最靠谱的那个模型。然而很多时候，虽然某个模型是所有模型里面最靠谱的，但是别的模型也并不是一点机会都没有。譬如第一个模型在观测数据下的概率是 0.5 。第二个模型是 0.4 ，第三个是 0.1 。如果我们只想知道对于观测数据哪个模型最可能，那么只要取第一个就行了，故事到此结束。然而很多时候我们建立模型是为了推测未知的事情的发生概率，这个时候，三个模型对未知的事情发生的概率都会有自己的预测，仅仅因为某一个模型概率稍大一点就只听他一个人的就太不民主了。所谓的最优贝叶斯推理就是将三个模型对于未知数据的预测结论加权平均起来（权值就是模型相应的概率）。显然，这个推理是理论上的制高点，无法再优了，因为它已经把所有可能性都考虑进去了。&lt;/p&gt;
&lt;p&gt;只不过实际上我们是基本不会使用这个框架的，因为计算模型可能非常费时间，二来模型空间可能是连续的，即有无穷多个模型（这个时候需要计算模型的概率分布）。结果还是非常费时间。所以这个被看作是一个理论基准。&lt;/p&gt;
&lt;h1 id=&quot;无处不在的贝叶斯&quot;&gt;&lt;a href=&quot;#无处不在的贝叶斯&quot; class=&quot;headerlink&quot; title=&quot;无处不在的贝叶斯&quot;&gt;&lt;/a&gt;无处不在的贝叶斯&lt;/h1&gt;&lt;p&gt;以下我们再举一些实际例子来说明贝叶斯方法被运用的普遍性，这里主要集中在机器学习方面，因为我不是学经济的，否则还可以找到一堆经济学的例子。&lt;/p&gt;
&lt;h2 id=&quot;中文分词&quot;&gt;&lt;a href=&quot;#中文分词&quot; class=&quot;headerlink&quot; title=&quot;中文分词&quot;&gt;&lt;/a&gt;中文分词&lt;/h2&gt;&lt;p&gt;贝叶斯是机器学习的核心方法之一。比如中文分词领域就用到了贝叶斯。Google 研究员吴军在《数学之美》系列中就有一篇是介绍中文分词的，这里只介绍一下核心的思想，不做赘述，详细请参考吴军的文章（这里）。&lt;/p&gt;
&lt;p&gt;分词问题的描述为：给定一个句子（字串），如：&lt;/p&gt;
&lt;p&gt;南京市长江大桥&lt;/p&gt;
&lt;p&gt;如何对这个句子进行分词（词串）才是最靠谱的。例如：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;南京市/长江大桥&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;南京/市长/江大桥&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;这两个分词，到底哪个更靠谱呢？&lt;/p&gt;
&lt;p&gt;我们用贝叶斯公式来形式化地描述这个问题，令 X 为字串（句子），Y 为词串（一种特定的分词假设）。我们就是需要寻找使得 P(Y|X) 最大的 Y ，使用一次贝叶斯可得：&lt;/p&gt;
&lt;p&gt;P(Y|X) ∝ P(Y)*P(X|Y)&lt;/p&gt;
&lt;p&gt;用自然语言来说就是 这种分词方式（词串）的可能性 乘以 这个词串生成我们的句子的可能性。我们进一步容易看到：可以近似地将 P(X|Y) 看作是恒等于 1 的，因为任意假想的一种分词方式之下生成我们的句子总是精准地生成的（只需把分词之间的分界符号扔掉即可）。于是，我们就变成了去最大化 P(Y) ，也就是寻找一种分词使得这个词串（句子）的概率最大化。而如何计算一个词串：&lt;/p&gt;
&lt;p&gt;W1, W2, W3, W4 ..&lt;/p&gt;
&lt;p&gt;的可能性呢？我们知道，根据联合概率的公式展开：P(W1, W2, W3, W4 ..) = P(W1) &lt;em&gt; P(W2|W1) &lt;/em&gt; P(W3|W2, W1) &lt;em&gt; P(W4|W1,W2,W3) &lt;/em&gt; .. 于是我们可以通过一系列的条件概率（右式）的乘积来求整个联合概率。然而不幸的是随着条件数目的增加（P(Wn|Wn-1,Wn-2,..,W1) 的条件有 n-1 个），数据稀疏问题也会越来越严重，即便语料库再大也无法统计出一个靠谱的 P(Wn|Wn-1,Wn-2,..,W1) 来。为了缓解这个问题，计算机科学家们一如既往地使用了“天真”假设：我们假设句子中一个词的出现概率只依赖于它前面的有限的 k 个词（k 一般不超过 3，如果只依赖于前面的一个词，就是2元语言模型（2-gram），同理有 3-gram 、 4-gram 等），这个就是所谓的“有限地平线”假设。虽然这个假设很傻很天真，但结果却表明它的结果往往是很好很强大的，后面要提到的朴素贝叶斯方法使用的假设跟这个精神上是完全一致的，我们会解释为什么像这样一个天真的假设能够得到强大的结果。目前我们只要知道，有了这个假设，刚才那个乘积就可以改写成： P(W1) &lt;em&gt; P(W2|W1) &lt;/em&gt; P(W3|W2) * P(W4|W3) .. （假设每个词只依赖于它前面的一个词）。而统计 P(W2|W1) 就不再受到数据稀疏问题的困扰了。对于我们上面提到的例子“南京市长江大桥”，如果按照自左到右的贪婪方法分词的话，结果就成了“南京市长/江大桥”。但如果按照贝叶斯分词的话（假设使用 3-gram），由于“南京市长”和“江大桥”在语料库中一起出现的频率为 0 ，这个整句的概率便会被判定为 0 。 从而使得“南京市/长江大桥”这一分词方式胜出。&lt;/p&gt;
&lt;p&gt;一点注记：有人可能会疑惑，难道我们人类也是基于这些天真的假设来进行推理的？不是的。事实上，统计机器学习方法所统计的东西往往处于相当表层（shallow）的层面，在这个层面机器学习只能看到一些非常表面的现象，有一点科学研究的理念的人都知道：越是往表层去，世界就越是繁复多变。从机器学习的角度来说，特征（feature）就越多，成百上千维度都是可能的。特征一多，好了，高维诅咒就产生了，数据就稀疏得要命，不够用了。而我们人类的观察水平显然比机器学习的观察水平要更深入一些，为了避免数据稀疏我们不断地发明各种装置（最典型就是显微镜），来帮助我们直接深入到更深层的事物层面去观察更本质的联系，而不是在浅层对表面现象作统计归纳。举一个简单的例子，通过对大规模语料库的统计，机器学习可能会发现这样一个规律：所有的“他”都是不会穿 bra 的，所有的“她”则都是穿的。然而，作为一个男人，却完全无需进行任何统计学习，因为深层的规律就决定了我们根本不会去穿 bra 。至于机器学习能不能完成后者（像人类那样的）这个推理，则是人工智能领域的经典问题。至少在那之前，声称统计学习方法能够终结科学研究（原文）的说法是纯粹外行人说的话。&lt;/p&gt;
&lt;h2 id=&quot;统计机器翻译&quot;&gt;&lt;a href=&quot;#统计机器翻译&quot; class=&quot;headerlink&quot; title=&quot;统计机器翻译&quot;&gt;&lt;/a&gt;统计机器翻译&lt;/h2&gt;&lt;p&gt;统计机器翻译因为其简单，自动（无需手动添加规则），迅速成为了机器翻译的事实标准。而统计机器翻译的核心算法也是使用的贝叶斯方法。&lt;/p&gt;
&lt;p&gt;问题是什么？统计机器翻译的问题可以描述为：给定一个句子 e ，它的可能的外文翻译 f 中哪个是最靠谱的。即我们需要计算：P(f|e) 。一旦出现条件概率贝叶斯总是挺身而出：&lt;/p&gt;
&lt;p&gt;P(f|e) ∝ P(f) * P(e|f)&lt;/p&gt;
&lt;p&gt;这个式子的右端很容易解释：那些先验概率较高，并且更可能生成句子 e 的外文句子 f 将会胜出。我们只需简单统计（结合上面提到的 N-Gram 语言模型）就可以统计任意一个外文句子 f 的出现概率。然而 P(e|f) 却不是那么好求的，给定一个候选的外文局子 f ，它生成（或对应）句子 e 的概率是多大呢？我们需要定义什么叫 “对应”，这里需要用到一个分词对齐的平行语料库，有兴趣的可以参考 《Foundations of Statistical Natural Language Processing》第 13 章，这里摘选其中的一个例子：假设 e 为：John loves Mary 。我们需要考察的首选 f 是：Jean aime Marie （法文）。我们需要求出 P(e|f) 是多大，为此我们考虑 e 和 f 有多少种对齐的可能性，如：&lt;/p&gt;
&lt;p&gt;John (Jean) loves (aime) Marie (Mary)&lt;/p&gt;
&lt;p&gt;就是其中的一种（最靠谱的）对齐，为什么要对齐，是因为一旦对齐了之后，就可以容易地计算在这个对齐之下的 P(e|f) 是多大，只需计算：&lt;/p&gt;
&lt;p&gt;P(John|Jean) &lt;em&gt; P(loves|aime) &lt;/em&gt; P(Marie|Mary)&lt;/p&gt;
&lt;p&gt;即可。&lt;/p&gt;
&lt;p&gt;然后我们遍历所有的对齐方式，并将每种对齐方式之下的翻译概率 ∑ 求和。便可以获得整个的 P(e|f) 是多大。&lt;/p&gt;
&lt;p&gt;一点注记：还是那个问题：难道我们人类真的是用这种方式进行翻译的？highly unlikely 。这种计算复杂性非常高的东西连三位数乘法都搞不定的我们才不会笨到去使用呢。根据认知神经科学的认识，很可能我们是先从句子到语义（一个逐层往上（bottom-up）抽象的 folding 过程），然后从语义根据另一门语言的语法展开为另一门语言（一个逐层往下（top-down）的具体化 unfolding 过程）。如何可计算地实现这个过程，目前仍然是个难题。（我们看到很多地方都有 bottom-up/top-down 这样一个对称的过程，实际上有人猜测这正是生物神经网络原则上的运作方式，对视觉神经系统的研究尤其证明了这一点，Hawkins 在 《On Intelligence》 里面提出了一种 HTM （Hierarchical Temporal Memory）模型正是使用了这个原则。）&lt;/p&gt;
&lt;h2 id=&quot;贝叶斯图像识别，Analysis-by-Synthesis&quot;&gt;&lt;a href=&quot;#贝叶斯图像识别，Analysis-by-Synthesis&quot; class=&quot;headerlink&quot; title=&quot;贝叶斯图像识别，Analysis by Synthesis&quot;&gt;&lt;/a&gt;贝叶斯图像识别，Analysis by Synthesis&lt;/h2&gt;&lt;p&gt;贝叶斯方法是一个非常 general 的推理框架。其核心理念可以描述成：Analysis by Synthesis （通过合成来分析）。06 年的认知科学新进展上有一篇 paper 就是讲用贝叶斯推理来解释视觉识别的，一图胜千言，下图就是摘自这篇 paper ：&lt;/p&gt;
&lt;p&gt;i3&lt;/p&gt;
&lt;p&gt;首先是视觉系统提取图形的边角特征，然后使用这些特征自底向上地激活高层的抽象概念（比如是 E 还是 F 还是等号），然后使用一个自顶向下的验证来比较到底哪个概念最佳地解释了观察到的图像。&lt;/p&gt;
&lt;h2 id=&quot;EM-算法与基于模型的聚类&quot;&gt;&lt;a href=&quot;#EM-算法与基于模型的聚类&quot; class=&quot;headerlink&quot; title=&quot;EM 算法与基于模型的聚类&quot;&gt;&lt;/a&gt;EM 算法与基于模型的聚类&lt;/h2&gt;&lt;p&gt;聚类是一种无指导的机器学习问题，问题描述：给你一堆数据点，让你将它们最靠谱地分成一堆一堆的。聚类算法很多，不同的算法适应于不同的问题，这里仅介绍一个基于模型的聚类，该聚类算法对数据点的假设是，这些数据点分别是围绕 K 个核心的 K 个正态分布源所随机生成的，使用 Han JiaWei 的《Data Ming： Concepts and Techniques》中的图：&lt;/p&gt;
&lt;p&gt;i4&lt;/p&gt;
&lt;p&gt;图中有两个正态分布核心，生成了大致两堆点。我们的聚类算法就是需要根据给出来的那些点，算出这两个正态分布的核心在什么位置，以及分布的参数是多少。这很明显又是一个贝叶斯问题，但这次不同的是，答案是连续的且有无穷多种可能性，更糟的是，只有当我们知道了哪些点属于同一个正态分布圈的时候才能够对这个分布的参数作出靠谱的预测，现在两堆点混在一块我们又不知道哪些点属于第一个正态分布，哪些属于第二个。反过来，只有当我们对分布的参数作出了靠谱的预测时候，才能知道到底哪些点属于第一个分布，那些点属于第二个分布。这就成了一个先有鸡还是先有蛋的问题了。为了解决这个循环依赖，总有一方要先打破僵局，说，不管了，我先随便整一个值出来，看你怎么变，然后我再根据你的变化调整我的变化，然后如此迭代着不断互相推导，最终收敛到一个解。这就是 EM 算法。&lt;/p&gt;
&lt;p&gt;EM 的意思是“Expectation-Maximazation”，在这个聚类问题里面，我们是先随便猜一下这两个正态分布的参数：如核心在什么地方，方差是多少。然后计算出每个数据点更可能属于第一个还是第二个正态分布圈，这个是属于 Expectation 一步。有了每个数据点的归属，我们就可以根据属于第一个分布的数据点来重新评估第一个分布的参数（从蛋再回到鸡），这个是 Maximazation 。如此往复，直到参数基本不再发生变化为止。这个迭代收敛过程中的贝叶斯方法在第二步，根据数据点求分布的参数上面。&lt;/p&gt;
&lt;h2 id=&quot;最大似然与最小二乘&quot;&gt;&lt;a href=&quot;#最大似然与最小二乘&quot; class=&quot;headerlink&quot; title=&quot;最大似然与最小二乘&quot;&gt;&lt;/a&gt;最大似然与最小二乘&lt;/h2&gt;&lt;p&gt;i5&lt;/p&gt;
&lt;p&gt;学过线性代数的大概都知道经典的最小二乘方法来做线性回归。问题描述是：给定平面上 N 个点，（这里不妨假设我们想用一条直线来拟合这些点——回归可以看作是拟合的特例，即允许误差的拟合），找出一条最佳描述了这些点的直线。&lt;/p&gt;
&lt;p&gt;一个接踵而来的问题就是，我们如何定义最佳？我们设每个点的坐标为 (Xi, Yi) 。如果直线为 y = f(x) 。那么 (Xi, Yi) 跟直线对这个点的“预测”：(Xi, f(Xi)) 就相差了一个 ΔYi = |Yi – f(Xi)| 。最小二乘就是说寻找直线使得 (ΔY1)^2 + (ΔY2)^2 + .. （即误差的平方和）最小，至于为什么是误差的平方和而不是误差的绝对值和，统计学上也没有什么好的解释。然而贝叶斯方法却能对此提供一个完美的解释。&lt;/p&gt;
&lt;p&gt;我们假设直线对于坐标 Xi 给出的预测 f(Xi) 是最靠谱的预测，所有纵坐标偏离 f(Xi) 的那些数据点都含有噪音，是噪音使得它们偏离了完美的一条直线，一个合理的假设就是偏离路线越远的概率越小，具体小多少，可以用一个正态分布曲线来模拟，这个分布曲线以直线对 Xi 给出的预测 f(Xi) 为中心，实际纵坐标为 Yi 的点 (Xi, Yi) 发生的概率就正比于 EXP[-(ΔYi)^2]。（EXP(..) 代表以常数 e 为底的多少次方）。&lt;/p&gt;
&lt;p&gt;现在我们回到问题的贝叶斯方面，我们要想最大化的后验概率是：&lt;/p&gt;
&lt;p&gt;P(h|D) ∝ P(h) * P(D|h)&lt;/p&gt;
&lt;p&gt;又见贝叶斯！这里 h 就是指一条特定的直线，D 就是指这 N 个数据点。我们需要寻找一条直线 h 使得 P(h) &lt;em&gt; P(D|h) 最大。很显然，P(h) 这个先验概率是均匀的，因为哪条直线也不比另一条更优越。所以我们只需要看 P(D|h) 这一项，这一项是指这条直线生成这些数据点的概率，刚才说过了，生成数据点 (Xi, Yi) 的概率为 EXP[-(ΔYi)^2] 乘以一个常数。而 P(D|h) = P(d1|h) &lt;/em&gt; P(d2|h) &lt;em&gt; .. 即假设各个数据点是独立生成的，所以可以把每个概率乘起来。于是生成 N 个数据点的概率为 EXP[-(ΔY1)^2] &lt;/em&gt; EXP[-(ΔY2)^2] &lt;em&gt; EXP[-(ΔY3)^2] &lt;/em&gt; .. = EXP{-[(ΔY1)^2 + (ΔY2)^2 + (ΔY3)^2 + ..]} 最大化这个概率就是要最小化 (ΔY1)^2 + (ΔY2)^2 + (ΔY3)^2 + .. 。 熟悉这个式子吗？&lt;/p&gt;
&lt;h1 id=&quot;朴素贝叶斯方法&quot;&gt;&lt;a href=&quot;#朴素贝叶斯方法&quot; class=&quot;headerlink&quot; title=&quot;朴素贝叶斯方法&quot;&gt;&lt;/a&gt;朴素贝叶斯方法&lt;/h1&gt;&lt;p&gt;朴素贝叶斯方法是一个很特别的方法，所以值得介绍一下。我们用朴素贝叶斯在垃圾邮件过滤中的应用来举例说明。&lt;/p&gt;
&lt;h2 id=&quot;贝叶斯垃圾邮件过滤器&quot;&gt;&lt;a href=&quot;#贝叶斯垃圾邮件过滤器&quot; class=&quot;headerlink&quot; title=&quot;贝叶斯垃圾邮件过滤器&quot;&gt;&lt;/a&gt;贝叶斯垃圾邮件过滤器&lt;/h2&gt;&lt;p&gt;问题是什么？问题是，给定一封邮件，判定它是否属于垃圾邮件。按照先例，我们还是用 D 来表示这封邮件，注意 D 由 N 个单词组成。我们用 h+ 来表示垃圾邮件，h- 表示正常邮件。问题可以形式化地描述为求：&lt;/p&gt;
&lt;p&gt;P(h+|D) = P(h+) * P(D|h+) / P(D)&lt;/p&gt;
&lt;p&gt;P(h-|D) = P(h-) * P(D|h-) / P(D)&lt;/p&gt;
&lt;p&gt;其中 P(h+) 和 P(h-) 这两个先验概率都是很容易求出来的，只需要计算一个邮件库里面垃圾邮件和正常邮件的比例就行了。然而 P(D|h+) 却不容易求，因为 D 里面含有 N 个单词 d1, d2, d3, .. ，所以P(D|h+) = P(d1,d2,..,dn|h+) 。我们又一次遇到了数据稀疏性，为什么这么说呢？P(d1,d2,..,dn|h+) 就是说在垃圾邮件当中出现跟我们目前这封邮件一模一样的一封邮件的概率是多大！开玩笑，每封邮件都是不同的，世界上有无穷多封邮件。瞧，这就是数据稀疏性，因为可以肯定地说，你收集的训练数据库不管里面含了多少封邮件，也不可能找出一封跟目前这封一模一样的。结果呢？我们又该如何来计算 P(d1,d2,..,dn|h+) 呢？&lt;/p&gt;
&lt;p&gt;我们将 P(d1,d2,..,dn|h+)  扩展为： P(d1|h+) &lt;em&gt; P(d2|d1, h+) &lt;/em&gt; P(d3|d2,d1, h+) &lt;em&gt; .. 。熟悉这个式子吗？这里我们会使用一个更激进的假设，我们假设 di 与 di-1 是完全条件无关的，于是式子就简化为 P(d1|h+) &lt;/em&gt; P(d2|h+) &lt;em&gt; P(d3|h+) &lt;/em&gt; .. 。这个就是所谓的条件独立假设，也正是朴素贝叶斯方法的朴素之处。而计算 P(d1|h+) &lt;em&gt; P(d2|h+) &lt;/em&gt; P(d3|h+) * .. 就太简单了，只要统计 di 这个单词在垃圾邮件中出现的频率即可。关于贝叶斯垃圾邮件过滤更多的内容可以参考这个条目，注意其中提到的其他资料。&lt;/p&gt;
&lt;p&gt;一点注记：这里，为什么有这个数据稀疏问题，还是因为统计学习方法工作在浅层面，世界上的单词就算不再变多也是非常之多的，单词之间组成的句子也是变化多端，更不用说一篇文章了，文章数目则是无穷的，所以在这个层面作统计，肯定要被数据稀疏性困扰。我们要注意，虽然句子和文章的数目是无限的，然而就拿邮件来说，如果我们只关心邮件中句子的语义（进而更高抽象层面的“意图”（语义，意图如何可计算地定义出来是一个人工智能问题），在这个层面上可能性便大大缩减了，我们关心的抽象层面越高，可能性越小。单词集合和句子的对应是多对一的，句子和语义的对应又是多对一的，语义和意图的对应还是多对一的，这是个层级体系。神经科学的发现也表明大脑的皮层大致有一种层级结构，对应着越来越抽象的各个层面，至于如何具体实现一个可放在计算机内的大脑皮层，仍然是一个未解决问题，以上只是一个原则（principle）上的认识，只有当 computational 的 cortex 模型被建立起来了之后才可能将其放入电脑。&lt;/p&gt;
&lt;h2 id=&quot;为什么朴素贝叶斯方法令人诧异地好——一个理论解释&quot;&gt;&lt;a href=&quot;#为什么朴素贝叶斯方法令人诧异地好——一个理论解释&quot; class=&quot;headerlink&quot; title=&quot;为什么朴素贝叶斯方法令人诧异地好——一个理论解释&quot;&gt;&lt;/a&gt;为什么朴素贝叶斯方法令人诧异地好——一个理论解释&lt;/h2&gt;&lt;p&gt;朴素贝叶斯方法的条件独立假设看上去很傻很天真，为什么结果却很好很强大呢？就拿一个句子来说，我们怎么能鲁莽地声称其中任意一个单词出现的概率只受到它前面的 3 个或 4 个单词的影响呢？别说 3 个，有时候一个单词的概率受到上一句话的影响都是绝对可能的。那么为什么这个假设在实际中的表现却不比决策树差呢？有人对此提出了一个理论解释，并且建立了什么时候朴素贝叶斯的效果能够等价于非朴素贝叶斯的充要条件，这个解释的核心就是：有些独立假设在各个分类之间的分布都是均匀的所以对于似然的相对大小不产生影响；即便不是如此，也有很大的可能性各个独立假设所产生的消极影响或积极影响互相抵消，最终导致结果受到的影响不大。具体的数学公式请参考这篇 paper 。&lt;/p&gt;
&lt;h1 id=&quot;层级贝叶斯模型&quot;&gt;&lt;a href=&quot;#层级贝叶斯模型&quot; class=&quot;headerlink&quot; title=&quot;层级贝叶斯模型&quot;&gt;&lt;/a&gt;层级贝叶斯模型&lt;/h1&gt;&lt;p&gt;i6&lt;/p&gt;
&lt;p&gt;层级贝叶斯模型是现代贝叶斯方法的标志性建筑之一。前面讲的贝叶斯，都是在同一个事物层次上的各个因素之间进行统计推理，然而层次贝叶斯模型在哲学上更深入了一层，将这些因素背后的因素（原因的原因，原因的原因，以此类推）囊括进来。一个教科书例子是：如果你手头有 N 枚硬币，它们是同一个工厂铸出来的，你把每一枚硬币掷出一个结果，然后基于这 N 个结果对这 N 个硬币的 θ （出现正面的比例）进行推理。如果根据最大似然，每个硬币的 θ 不是 1 就是 0 （这个前面提到过的），然而我们又知道每个硬币的 p(θ) 是有一个先验概率的，也许是一个 beta 分布。也就是说，每个硬币的实际投掷结果 Xi 服从以 θ 为中心的正态分布，而 θ 又服从另一个以 Ψ 为中心的 beta 分布。层层因果关系就体现出来了。进而 Ψ 还可能依赖于因果链上更上层的因素，以此类推。&lt;/p&gt;
&lt;h2 id=&quot;隐马可夫模型（HMM）&quot;&gt;&lt;a href=&quot;#隐马可夫模型（HMM）&quot; class=&quot;headerlink&quot; title=&quot;隐马可夫模型（HMM）&quot;&gt;&lt;/a&gt;隐马可夫模型（HMM）&lt;/h2&gt;&lt;p&gt;i7&lt;/p&gt;
&lt;p&gt;吴军在数学之美系列里面介绍的隐马可夫模型（HMM）就是一个简单的层级贝叶斯模型：&lt;/p&gt;
&lt;p&gt;那么怎么根据接收到的信息来推测说话者想表达的意思呢？我们可以利用叫做“隐含马尔可夫模型”（Hidden Markov Model）来解决这些问题。以语音识别为例，当我们观测到语音信号 o1,o2,o3 时，我们要根据这组信号推测出发送的句子 s1,s2,s3。显然，我们应该在所有可能的句子中找最有可能性的一个。用数学语言来描述，就是在已知 o1,o2,o3,…的情况下，求使得条件概率 P (s1,s2,s3,…|o1,o2,o3….) 达到最大值的那个句子 s1,s2,s3,…&lt;/p&gt;
&lt;p&gt;吴军的文章中这里省掉没说的是，s1, s2, s3, .. 这个句子的生成概率同时又取决于一组参数，这组参数决定了 s1, s2, s3, .. 这个马可夫链的先验生成概率。如果我们将这组参数记为 λ ，我们实际上要求的是：P(S|O, λ) （其中 O 表示 o1,o2,o3,.. ，S表示 s1,s2,s3,..）&lt;/p&gt;
&lt;p&gt;当然，上面的概率不容易直接求出，于是我们可以间接地计算它。利用贝叶斯公式并且省掉一个常数项，可以把上述公式等价变换成&lt;/p&gt;
&lt;p&gt;P(o1,o2,o3,…|s1,s2,s3….) * P(s1,s2,s3,…)&lt;/p&gt;
&lt;p&gt;其中&lt;/p&gt;
&lt;p&gt;P(o1,o2,o3,…|s1,s2,s3….) 表示某句话 s1,s2,s3…被读成 o1,o2,o3,…的可能性, 而 P(s1,s2,s3,…) 表示字串 s1,s2,s3,…本身能够成为一个合乎情理的句子的可能性，所以这个公式的意义是用发送信号为 s1,s2,s3…这个数列的可能性乘以 s1,s2,s3.. 本身可以一个句子的可能性，得出概率。&lt;/p&gt;
&lt;p&gt;这里，s1,s2,s3…本身可以一个句子的可能性其实就取决于参数 λ ，也就是语言模型。所以简而言之就是发出的语音信号取决于背后实际想发出的句子，而背后实际想发出的句子本身的独立先验概率又取决于语言模型。&lt;/p&gt;
&lt;h1 id=&quot;贝叶斯网络&quot;&gt;&lt;a href=&quot;#贝叶斯网络&quot; class=&quot;headerlink&quot; title=&quot;贝叶斯网络&quot;&gt;&lt;/a&gt;贝叶斯网络&lt;/h1&gt;&lt;p&gt;吴军已经对贝叶斯网络作了科普，请直接跳转到这里。更详细的理论参考所有机器学习的书上都有。&lt;/p&gt;
&lt;p&gt;参考资料&lt;/p&gt;
&lt;p&gt;一堆机器学习，一堆概率统计，一堆 Google ，和一堆 Wikipedia 条目，一堆 paper 。&lt;/p&gt;
&lt;p&gt;部分书籍参考《机器学习与人工智能资源导引》。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;http://mindhacks.cn/2008/09/21/the-magical-bayesian-method/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;数学之美番外篇：平凡而又神奇的贝叶斯方法&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;概率论只
    
    </summary>
    
      <category term="高大上" scheme="http://www.lflxp.cn/categories/%E9%AB%98%E5%A4%A7%E4%B8%8A/"/>
    
    
      <category term="高大上" scheme="http://www.lflxp.cn/tags/%E9%AB%98%E5%A4%A7%E4%B8%8A/"/>
    
  </entry>
  
  <entry>
    <title>快速搭建静态服务器</title>
    <link href="http://www.lflxp.cn/2016/04/09/2016-04-09-golang%20%E5%BF%AB%E9%80%9F%E9%9D%99%E6%80%81%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    <id>http://www.lflxp.cn/2016/04/09/2016-04-09-golang 快速静态服务器/</id>
    <published>2016-04-09T10:07:56.871Z</published>
    <updated>2016-04-09T10:11:08.430Z</updated>
    
    <content type="html">&lt;h1 id=&quot;利用golang自带包快速搭建静态服务器&quot;&gt;&lt;a href=&quot;#利用golang自带包快速搭建静态服务器&quot; class=&quot;headerlink&quot; title=&quot;利用golang自带包快速搭建静态服务器&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://www.jb51.net/article/56869.htm&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;利用golang自带包快速搭建静态服务器&lt;/a&gt;&lt;/h1&gt;&lt;p&gt;学习Go语言的一些感受,不一定准确。&lt;br&gt;假如发生战争，JAVA一般都是充当航母战斗群的角色。&lt;br&gt;一旦出动,就是护卫舰、巡洋舰、航母舰载机、预警机、电子战飞机、潜艇等等&lt;br&gt;浩浩荡荡,杀将过去。&lt;br&gt;(JVM,数十个JAR包,Tomcat中间件,SSH框架,各种配置文件…天生就是重量级的,专为大规模作战)&lt;br&gt;而GO语言更像F35战斗轰炸机&lt;br&gt;单枪匹马,悄无声息,投下炸弹然后走人。&lt;br&gt;专属轰炸机,空战也会一点点.&lt;br&gt;实在搞不定,就叫它大哥F22。&lt;br&gt;(GO是编译型语言,不需要依赖,不需要虚拟机,可以调用C代码并且它足够简单，却非常全面)&lt;br&gt;计划Go语言学习的知识点&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;搭建Http服务&lt;/li&gt;
&lt;li&gt;连接数据库&lt;/li&gt;
&lt;li&gt;本地IO&lt;/li&gt;
&lt;li&gt;多线程&lt;/li&gt;
&lt;li&gt;网络&lt;/li&gt;
&lt;li&gt;调用本地命令&lt;/li&gt;
&lt;li&gt;调用C语言代码&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;首先,搭建一个静态的服务器&lt;br&gt;我写程序喜欢使用HTML通过AJAX发送JSON请求到后端处理。&lt;/p&gt;
&lt;h2 id=&quot;HttpServer-go&quot;&gt;&lt;a href=&quot;#HttpServer-go&quot; class=&quot;headerlink&quot; title=&quot;HttpServer.go&quot;&gt;&lt;/a&gt;HttpServer.go&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;package main&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;flag&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;io/ioutil&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;log&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;net/http&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;os&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;strings&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var realPath *string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func staticResource(w http.ResponseWriter, r *http.Request) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        path := r.URL.Path&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        request_type := path[strings.LastIndex(path, &amp;quot;.&amp;quot;):]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        switch request_type &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        case &amp;quot;.css&amp;quot;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                w.Header().Set(&amp;quot;content-type&amp;quot;, &amp;quot;text/css&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        case &amp;quot;.js&amp;quot;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                w.Header().Set(&amp;quot;content-type&amp;quot;, &amp;quot;text/javascript&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        default:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fin, err := os.Open(*realPath + path)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        defer fin.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                log.Fatal(&amp;quot;static resource:&amp;quot;, err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fd, _ := ioutil.ReadAll(fin)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        w.Write(fd)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func main() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        realPath = flag.String(&amp;quot;path&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;static resource path&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        flag.Parse()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        http.HandleFunc(&amp;quot;/&amp;quot;, staticResource)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        err := http.ListenAndServe(&amp;quot;:8080&amp;quot;, nil)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                log.Fatal(&amp;quot;ListenAndServe:&amp;quot;, err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;网上看到一个更BT的方法&quot;&gt;&lt;a href=&quot;#网上看到一个更BT的方法&quot; class=&quot;headerlink&quot; title=&quot;网上看到一个更BT的方法&quot;&gt;&lt;/a&gt;网上看到一个更BT的方法&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;package main&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;net/http&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func main() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        http.Handle(&amp;quot;/&amp;quot;, http.FileServer(http.Dir(&amp;quot;/tmp/static/&amp;quot;)))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        http.ListenAndServe(&amp;quot;:8080&amp;quot;, nil)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;在GOPATH下执行&quot;&gt;&lt;a href=&quot;#在GOPATH下执行&quot; class=&quot;headerlink&quot; title=&quot;在GOPATH下执行&quot;&gt;&lt;/a&gt;在GOPATH下执行&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;go run HttpServer.go –path=/tmp/static&lt;/li&gt;
&lt;li&gt;这样Go语言以不到50行代码，编译之后不到7M的可执行文件，就实现了一个简易的静态服务器。&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;利用golang自带包快速搭建静态服务器&quot;&gt;&lt;a href=&quot;#利用golang自带包快速搭建静态服务器&quot; class=&quot;headerlink&quot; title=&quot;利用golang自带包快速搭建静态服务器&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://www.jb51.n
    
    </summary>
    
      <category term="golang" scheme="http://www.lflxp.cn/categories/golang/"/>
    
    
      <category term="golang" scheme="http://www.lflxp.cn/tags/golang/"/>
    
  </entry>
  
  <entry>
    <title>golang 爬虫</title>
    <link href="http://www.lflxp.cn/2016/04/09/2016-04-09-golang%20%E7%88%AC%E8%99%AB/"/>
    <id>http://www.lflxp.cn/2016/04/09/2016-04-09-golang 爬虫/</id>
    <published>2016-04-09T10:03:38.336Z</published>
    <updated>2016-04-09T10:45:37.560Z</updated>
    
    <content type="html">&lt;h1 id=&quot;golang爬虫框架&quot;&gt;&lt;a href=&quot;#golang爬虫框架&quot; class=&quot;headerlink&quot; title=&quot;golang爬虫框架&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://github.com/hu17889/go_spider/wiki/%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;golang爬虫框架&lt;/a&gt;&lt;/h1&gt;&lt;h1 id=&quot;简单的爬虫&quot;&gt;&lt;a href=&quot;#简单的爬虫&quot; class=&quot;headerlink&quot; title=&quot;简单的爬虫&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://www.cnblogs.com/tt-0411/archive/2013/03/13/2958130.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;简单的爬虫&lt;/a&gt;&lt;/h1&gt;&lt;h2 id=&quot;参考资料&quot;&gt;&lt;a href=&quot;#参考资料&quot; class=&quot;headerlink&quot; title=&quot;参考资料&quot;&gt;&lt;/a&gt;参考资料&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://www.cnblogs.com/wawlian/archive/2012/06/18/2553061.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;网络爬虫基本原理(一)&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.cnblogs.com/wawlian/archive/2012/06/18/2554072.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;网络爬虫基本原理(二)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;学习Go语言，便用Go移植了那个用Scala写的爬虫，代码如下：&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;package main&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;fmt&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;io/ioutil&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;net/http&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;regexp&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ptnIndexItem    = regexp.MustCompile(`&amp;lt;a target=&amp;quot;_blank&amp;quot; href=&amp;quot;(.+\.html)&amp;quot; title=&amp;quot;.+&amp;quot; &amp;gt;(.+)&amp;lt;/a&amp;gt;`)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ptnContentRough = regexp.MustCompile(`(?s).*&amp;lt;div class=&amp;quot;artcontent&amp;quot;&amp;gt;(.*)&amp;lt;div id=&amp;quot;zhanwei&amp;quot;&amp;gt;.*`)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ptnBrTag        = regexp.MustCompile(`&amp;lt;br&amp;gt;`)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ptnHTMLTag      = regexp.MustCompile(`(?s)&amp;lt;/?.*?&amp;gt;`)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ptnSpace        = regexp.MustCompile(`(^\s+)|( )`)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func Get(url string) (content string, statusCode int) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    resp, err1 := http.Get(url)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err1 != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        statusCode = -100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    defer resp.Body.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    data, err2 := ioutil.ReadAll(resp.Body)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err2 != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        statusCode = -200&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    statusCode = resp.StatusCode&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    content = string(data)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type IndexItem struct &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    url   string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    title string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func findIndex(content string) (index []IndexItem, err error) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    matches := ptnIndexItem.FindAllStringSubmatch(content, 10000)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    index = make([]IndexItem, len(matches))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for i, item := range matches &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        index[i] = IndexItem&amp;#123;&amp;quot;http://www.yifan100.com&amp;quot; + item[1], item[2]&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func readContent(url string) (content string) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    raw, statusCode := Get(url)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if statusCode != 200 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fmt.Print(&amp;quot;Fail to get the raw data from&amp;quot;, url, &amp;quot;\n&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    match := ptnContentRough.FindStringSubmatch(raw)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if match != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        content = match[1]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    content = ptnBrTag.ReplaceAllString(content, &amp;quot;\r\n&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    content = ptnHTMLTag.ReplaceAllString(content, &amp;quot;&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    content = ptnSpace.ReplaceAllString(content, &amp;quot;&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func main() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fmt.Println(`Get index ...`)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    s, statusCode := Get(&amp;quot;http://www.yifan100.com/dir/15136/&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if statusCode != 200 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    index, _ := findIndex(s)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fmt.Println(`Get contents and write to file ...`)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for _, item := range index &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fmt.Printf(&amp;quot;Get content %s from %s and write to file.\n&amp;quot;, item.title, item.url)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fileName := fmt.Sprintf(&amp;quot;%s.txt&amp;quot;, item.title)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        content := readContent(item.url)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ioutil.WriteFile(fileName, []byte(content), 0644)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fmt.Printf(&amp;quot;Finish writing to %s.\n&amp;quot;, fileName)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;代码行数比Scala版的有一定增加，主要原因有以下几方面原因：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;golang 重视代码书写规范，或者说代码格式，很多地方写法比较固定，甚至比较麻烦。比如就算是if判断为真后的执行语句只有一句话，按照代码规范，也要写出带大括号的三行，而在Scala和很多其他语言中，一行就行；&lt;/li&gt;
&lt;li&gt;golang 的strings包和regexp包提供的方法并不特别好用，特别是和Scala相比，使用起来感觉Scala的正则和字符串处理要舒服的多；&lt;/li&gt;
&lt;li&gt;scala版的爬虫里面用到了Scala标准库中的实用类和方法，它们虽然不是语法组成，但用起来感觉像是语法糖，这里很多方法和函数式编程有关，golang的函数式编程还没有去仔细学习。&lt;/li&gt;
&lt;li&gt;当然golang版的爬虫也有一个优势，就是编译速度很快，执行速度在现在的写法里面体现不出优势；golang的特性goroutine在这里没有用到，这段代码今后会不断改进。&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;golang爬虫框架&quot;&gt;&lt;a href=&quot;#golang爬虫框架&quot; class=&quot;headerlink&quot; title=&quot;golang爬虫框架&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://github.com/hu17889/go_spider/wiki/%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3&quot;&gt;golang爬虫框架&lt;/a&gt;&lt;/h1&gt;&lt;h1 id=&quot;简单的爬虫&quot;&gt;&lt;a href=&quot;#简单的爬虫&quot; class=&quot;headerlink&quot; title=&quot;简单的爬虫&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://www.cnblogs.com/tt-0411/archive/2013/03/13/2958130.html&quot;&gt;简单的爬虫&lt;/a&gt;&lt;/h1&gt;&lt;h2 id=&quot;参考资料&quot;&gt;&lt;a href=&quot;#参考资料&quot; class=&quot;headerlink&quot; title=&quot;参考资料&quot;&gt;&lt;/a&gt;参考资料&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://www.cnblogs.com/wawlian/archive/2012/06/18/2553061.html&quot;&gt;网络爬虫基本原理(一)&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.cnblogs.com/wawlian/archive/2012/06/18/2554072.html&quot;&gt;网络爬虫基本原理(二)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;学习Go语言，便用Go移植了那个用Scala写的爬虫，代码如下：&lt;br&gt;
    
    </summary>
    
      <category term="golang" scheme="http://www.lflxp.cn/categories/golang/"/>
    
    
      <category term="golang" scheme="http://www.lflxp.cn/tags/golang/"/>
    
  </entry>
  
  <entry>
    <title>golang版rpc之HTTP_RPC</title>
    <link href="http://www.lflxp.cn/2016/04/09/2016-04-09-golang%E7%89%88rpc%E4%B9%8Bhttp_rpc/"/>
    <id>http://www.lflxp.cn/2016/04/09/2016-04-09-golang版rpc之http_rpc/</id>
    <published>2016-04-09T09:56:07.918Z</published>
    <updated>2016-04-09T10:47:04.289Z</updated>
    
    <content type="html">&lt;h1 id=&quot;HTTP-RPC&quot;&gt;&lt;a href=&quot;#HTTP-RPC&quot; class=&quot;headerlink&quot; title=&quot;HTTP_RPC&quot;&gt;&lt;/a&gt;HTTP_RPC&lt;/h1&gt;&lt;p&gt;直接上代码&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;server-go&quot;&gt;&lt;a href=&quot;#server-go&quot; class=&quot;headerlink&quot; title=&quot;server.go&quot;&gt;&lt;/a&gt;server.go&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;package main&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 通过上面的例子可以看到，我们注册了一个 Arith 的 RPC 服务，然后通过 rpc.HandleHTTP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 函数把该服务注册到了 HTTP 协议上，然后我们就可以利用 http 的方式来传递数据了。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;errors&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;fmt&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;net/http&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;net/rpc&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Args struct &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    A, B int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Quotient struct &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Quo, Rem int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Arith int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func (t *Arith) Multiply(args *Args, reply *int) error &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    *reply = args.A * args.B&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return nil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func (t *Arith) Divide(args *Args, quo *Quotient) error &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if args.B == 0 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return errors.New(&amp;quot;divide by zero&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    quo.Quo = args.A / args.B&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    quo.Rem = args.A % args.B&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return nil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func main() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    arith := new(Arith)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    rpc.Register(arith)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    rpc.HandleHTTP()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    err := http.ListenAndServe(&amp;quot;:1234&amp;quot;, nil)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fmt.Println(err.Error())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;client-go&quot;&gt;&lt;a href=&quot;#client-go&quot; class=&quot;headerlink&quot; title=&quot;client.go&quot;&gt;&lt;/a&gt;client.go&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;package main&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;fmt&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;log&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;net/rpc&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;os&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Args struct &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    A, B int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Quotient struct &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Quo, Rem int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func main() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if len(os.Args) != 2 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fmt.Println(&amp;quot;Usage: &amp;quot;, os.Args[0], &amp;quot;server&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        os.Exit(1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    serverAddress := os.Args[1]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    client, err := rpc.DialHTTP(&amp;quot;tcp&amp;quot;, serverAddress+&amp;quot;:1234&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        log.Fatal(&amp;quot;dialing:&amp;quot;, err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Synchronous call&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    args := Args&amp;#123;17, 8&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var reply int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    err = client.Call(&amp;quot;Arith.Multiply&amp;quot;, args, &amp;amp;reply)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        log.Fatal(&amp;quot;arith error:&amp;quot;, err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fmt.Printf(&amp;quot;Arith: %d*%d=%d\n&amp;quot;, args.A, args.B, reply)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var quot Quotient&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    err = client.Call(&amp;quot;Arith.Divide&amp;quot;, args, &amp;amp;quot)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        log.Fatal(&amp;quot;arith error:&amp;quot;, err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fmt.Printf(&amp;quot;Arith: %d/%d=%d remainder %d\n&amp;quot;, args.A, args.B, quot.Quo, quot.Rem)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;HTTP-RPC&quot;&gt;&lt;a href=&quot;#HTTP-RPC&quot; class=&quot;headerlink&quot; title=&quot;HTTP_RPC&quot;&gt;&lt;/a&gt;HTTP_RPC&lt;/h1&gt;&lt;p&gt;直接上代码&lt;br&gt;
    
    </summary>
    
      <category term="golang-rpc" scheme="http://www.lflxp.cn/categories/golang-rpc/"/>
    
    
      <category term="golang" scheme="http://www.lflxp.cn/tags/golang/"/>
    
  </entry>
  
  <entry>
    <title>golang版rpc之JSON_RPC</title>
    <link href="http://www.lflxp.cn/2016/04/09/2016-04-09-golang%E7%89%88rpc%E4%B9%8Bjson_rpc/"/>
    <id>http://www.lflxp.cn/2016/04/09/2016-04-09-golang版rpc之json_rpc/</id>
    <published>2016-04-09T09:53:54.265Z</published>
    <updated>2016-04-09T10:47:00.213Z</updated>
    
    <content type="html">&lt;h1 id=&quot;JSON-RPC&quot;&gt;&lt;a href=&quot;#JSON-RPC&quot; class=&quot;headerlink&quot; title=&quot;JSON_RPC&quot;&gt;&lt;/a&gt;JSON_RPC&lt;/h1&gt;&lt;p&gt;直接上代码&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;server-go&quot;&gt;&lt;a href=&quot;#server-go&quot; class=&quot;headerlink&quot; title=&quot;server.go&quot;&gt;&lt;/a&gt;server.go&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;package main&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;errors&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;fmt&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;net&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;net/rpc&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;net/rpc/jsonrpc&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;os&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Args struct &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    A, B int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Quotient struct &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Quo, Rem int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Arith int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func (t *Arith) Multiply(args *Args, reply *int) error &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    *reply = args.A * args.B&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return nil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func (t *Arith) Divide(args *Args, quo *Quotient) error &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if args.B == 0 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return errors.New(&amp;quot;divide by zero&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    quo.Quo = args.A / args.B&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    quo.Rem = args.A % args.B&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return nil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func main() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    arith := new(Arith)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    rpc.Register(arith)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    tcpAddr, err := net.ResolveTCPAddr(&amp;quot;tcp&amp;quot;, &amp;quot;:1234&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    checkError(err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    listener, err := net.ListenTCP(&amp;quot;tcp&amp;quot;, tcpAddr)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    checkError(err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        conn, err := listener.Accept()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            continue&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        jsonrpc.ServeConn(conn)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func checkError(err error) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fmt.Println(&amp;quot;Fatal error &amp;quot;, err.Error())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        os.Exit(1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;client-go&quot;&gt;&lt;a href=&quot;#client-go&quot; class=&quot;headerlink&quot; title=&quot;client.go&quot;&gt;&lt;/a&gt;client.go&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;package main&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;fmt&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;log&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;net/rpc/jsonrpc&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;os&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Args struct &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    A, B int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Quotient struct &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Quo, Rem int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func main() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if len(os.Args) != 2 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fmt.Println(&amp;quot;Usage: &amp;quot;, os.Args[0], &amp;quot;server:port&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        log.Fatal(1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    service := os.Args[1]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    client, err := jsonrpc.Dial(&amp;quot;tcp&amp;quot;, service)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        log.Fatal(&amp;quot;dialing:&amp;quot;, err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Synchronous call&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    args := Args&amp;#123;17, 8&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var reply int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    err = client.Call(&amp;quot;Arith.Multiply&amp;quot;, args, &amp;amp;reply)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        log.Fatal(&amp;quot;arith error:&amp;quot;, err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fmt.Printf(&amp;quot;Arith: %d*%d=%d\n&amp;quot;, args.A, args.B, reply)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var quot Quotient&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    err = client.Call(&amp;quot;Arith.Divide&amp;quot;, args, &amp;amp;quot)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        log.Fatal(&amp;quot;arith error:&amp;quot;, err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fmt.Printf(&amp;quot;Arith: %d/%d=%d remainder %d\n&amp;quot;, args.A, args.B, quot.Quo, quot.Rem)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;JSON-RPC&quot;&gt;&lt;a href=&quot;#JSON-RPC&quot; class=&quot;headerlink&quot; title=&quot;JSON_RPC&quot;&gt;&lt;/a&gt;JSON_RPC&lt;/h1&gt;&lt;p&gt;直接上代码&lt;br&gt;
    
    </summary>
    
      <category term="golang-rpc" scheme="http://www.lflxp.cn/categories/golang-rpc/"/>
    
    
      <category term="golang" scheme="http://www.lflxp.cn/tags/golang/"/>
    
  </entry>
  
  <entry>
    <title>golang版rpc之PROTOBUF_RPC</title>
    <link href="http://www.lflxp.cn/2016/04/09/2016-04-09-golang%E7%89%88rpc%E4%B9%8Bprotobuf/"/>
    <id>http://www.lflxp.cn/2016/04/09/2016-04-09-golang版rpc之protobuf/</id>
    <published>2016-04-09T09:49:02.991Z</published>
    <updated>2016-04-09T10:46:55.154Z</updated>
    
    <content type="html">&lt;h1 id=&quot;PROTOBUF-RPC&quot;&gt;&lt;a href=&quot;#PROTOBUF-RPC&quot; class=&quot;headerlink&quot; title=&quot;PROTOBUF_RPC&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://github.com/golang/protobuf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PROTOBUF_RPC&lt;/a&gt;&lt;/h1&gt;&lt;h2 id=&quot;优点&quot;&gt;&lt;a href=&quot;#优点&quot; class=&quot;headerlink&quot; title=&quot;优点&quot;&gt;&lt;/a&gt;优点&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;protobuf自定义方便易读，便于升级，跨平台跨语言支持&lt;/li&gt;
&lt;li&gt;传输内容序列化与反序列化&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;安装-goprotobuf&quot;&gt;&lt;a href=&quot;#安装-goprotobuf&quot; class=&quot;headerlink&quot; title=&quot;安装 goprotobuf&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://my.oschina.net/ifraincoat/blog/510971&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;安装 goprotobuf&lt;/a&gt;&lt;/h2&gt;&lt;h2 id=&quot;现在我们编写一个小程序：&quot;&gt;&lt;a href=&quot;#现在我们编写一个小程序：&quot; class=&quot;headerlink&quot; title=&quot;现在我们编写一个小程序：&quot;&gt;&lt;/a&gt;现在我们编写一个小程序：&lt;/h2&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;package main&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import (    &amp;quot;log&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // 辅助库&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;github.com/golang/protobuf/proto&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // test.pb.go 的路径&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;example&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func main() &amp;#123;    // 创建一个消息 Test&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    test := &amp;amp;example.Test&amp;#123;        // 使用辅助函数设置域的值&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Label: proto.String(&amp;quot;hello&amp;quot;),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Type:  proto.Int32(17),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Optionalgroup: &amp;amp;example.Test_OptionalGroup&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            RequiredField: proto.String(&amp;quot;good bye&amp;quot;),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;    // 进行编码&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    data, err := proto.Marshal(test)    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        log.Fatal(&amp;quot;marshaling error: &amp;quot;, err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;    // 进行解码&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    newTest := &amp;amp;example.Test&amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    err = proto.Unmarshal(data, newTest)    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        log.Fatal(&amp;quot;unmarshaling error: &amp;quot;, err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;    // 测试结果&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if test.GetLabel() != newTest.GetLabel() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        log.Fatalf(&amp;quot;data mismatch %q != %q&amp;quot;, test.GetLabel(), newTest.GetLabel())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;错误：configure-error-C-preprocessor-lib-cpp-fails-sanity-check&quot;&gt;&lt;a href=&quot;#错误：configure-error-C-preprocessor-lib-cpp-fails-sanity-check&quot; class=&quot;headerlink&quot; title=&quot;错误：configure  error  C++ preprocessor   lib cpp  fails sanity check&quot;&gt;&lt;/a&gt;错误：configure  error  C++ preprocessor   lib cpp  fails sanity check&lt;/h2&gt;&lt;p&gt;ubuntu 10.04.3 LTS版本安装tigervnc的时候出现如下错误&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;checking how to run the C++ preprocessor... /lib/cpp&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;configure: error: C++ preprocessor &amp;quot;/lib/cpp&amp;quot; fails sanity check&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;See `config.log&amp;apos; for more details.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这是缺少相应的库导致的，所以可能在不同系统，安装不同软件的时候都可能出现。&lt;br&gt;既然缺少相应的库，那解决方法也就简单了，安装相应的库也可。&lt;br&gt;以下是我搜得的一个結果，原文如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;/lib/cpp fails sanity check的解决&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　在某些软件的时候，运行./configure 会报错，错误提示为：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　configure: error: C++ preprocessor “/lib/cpp” fails sanity &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　check See `config.log’ for more details&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　解决办法：出现该情况是由于c++编译器的相关package没有安装，以root用户登陆，在终端上执行：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　# yum install glibc-headers&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;　　# yum install gcc-c++&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这位同志使用的是红帽子版本，对于ubuntu来说，只需把yum改成apt-get即可。&lt;br&gt;但我自己并没有使用此方法，因为build-essential包含许多基本库，因此我决定尝试一把，输命令&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;#sudo apt-get install build-essential&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;再次运行./configure的时候成功通过～～&lt;br&gt;建议大家使用这种方法，因为它包含许多基本库，说不定让你已经安装其它软件时免除缺少各种库的烦恼。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;PROTOBUF-RPC&quot;&gt;&lt;a href=&quot;#PROTOBUF-RPC&quot; class=&quot;headerlink&quot; title=&quot;PROTOBUF_RPC&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://github.com/golang/protobuf&quot;&gt;PROTOBUF_RPC&lt;/a&gt;&lt;/h1&gt;&lt;h2 id=&quot;优点&quot;&gt;&lt;a href=&quot;#优点&quot; class=&quot;headerlink&quot; title=&quot;优点&quot;&gt;&lt;/a&gt;优点&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;protobuf自定义方便易读，便于升级，跨平台跨语言支持&lt;/li&gt;
&lt;li&gt;传输内容序列化与反序列化&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;安装-goprotobuf&quot;&gt;&lt;a href=&quot;#安装-goprotobuf&quot; class=&quot;headerlink&quot; title=&quot;安装 goprotobuf&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://my.oschina.net/ifraincoat/blog/510971&quot;&gt;安装 goprotobuf&lt;/a&gt;&lt;/h2&gt;&lt;h2 id=&quot;现在我们编写一个小程序：&quot;&gt;&lt;a href=&quot;#现在我们编写一个小程序：&quot; class=&quot;headerlink&quot; title=&quot;现在我们编写一个小程序：&quot;&gt;&lt;/a&gt;现在我们编写一个小程序：&lt;/h2&gt;
    
    </summary>
    
      <category term="golang-rpc" scheme="http://www.lflxp.cn/categories/golang-rpc/"/>
    
    
      <category term="golang" scheme="http://www.lflxp.cn/tags/golang/"/>
    
  </entry>
  
  <entry>
    <title>golang版rpc之TCP_RPC</title>
    <link href="http://www.lflxp.cn/2016/04/09/2016-04-09-golang%E7%89%88rpc%E4%B9%8Btcp/"/>
    <id>http://www.lflxp.cn/2016/04/09/2016-04-09-golang版rpc之tcp/</id>
    <published>2016-04-09T09:45:14.982Z</published>
    <updated>2016-04-09T10:45:24.433Z</updated>
    
    <content type="html">&lt;h1 id=&quot;rpc之TCP-RPC&quot;&gt;&lt;a href=&quot;#rpc之TCP-RPC&quot; class=&quot;headerlink&quot; title=&quot;rpc之TCP_RPC&quot;&gt;&lt;/a&gt;rpc之TCP_RPC&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;直接上代码&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;server-go&quot;&gt;&lt;a href=&quot;#server-go&quot; class=&quot;headerlink&quot; title=&quot;server.go&quot;&gt;&lt;/a&gt;server.go&lt;/h2&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;package main&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//RPC（Remote Procedure Call Protocol）——远程过程调用协议，是一种通过网络从远程计算机程序上请求服务，而不需要了解底层网络技术的协议。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 函数必须是导出的(首字母大写)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// • 必须有两个导出类型的参数，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// • 第一个参数是接收的参数，第二个参数是返回给客户端的参数，第二个参数必须是&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 指针类型的&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// • 函数还要有一个返回值 error&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 举个例子，正确的 RPC 函数格式如下：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// func (t *T) MethodName(argType T1, replyType *T2) error&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// T、T1 和 T2 类型必须能被 encoding/gob 包编解码。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 任何的 RPC 都需要通过网络来传递数据，Go RPC 可以利用 HTTP 和 TCP 来传递数据，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 利用 HTTP 的好处是可以直接复用 net/http 里面的一些函数。详细的例子请看下面的实现&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;errors&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;fmt&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;net&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;net/rpc&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;os&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Args struct &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    A, B int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Quotient struct &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Quo, Rem int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Arith int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func (t *Arith) Multiply(args *Args, reply *int) error &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    *reply = args.A * args.B&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return nil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func (t *Arith) Divide(args *Args, quo *Quotient) error &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if args.B == 0 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return errors.New(&amp;quot;divide by zero&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    quo.Quo = args.A / args.B&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    quo.Rem = args.A % args.B&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return nil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func main() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    arith := new(Arith)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    rpc.Register(arith)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    tcpAddr, err := net.ResolveTCPAddr(&amp;quot;tcp&amp;quot;, &amp;quot;:1234&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    checkError(err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    listener, err := net.ListenTCP(&amp;quot;tcp&amp;quot;, tcpAddr)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    checkError(err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        conn, err := listener.Accept()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            continue&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        rpc.ServeConn(conn)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func checkError(err error) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fmt.Println(&amp;quot;Fatal error &amp;quot;, err.Error())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        os.Exit(1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;client-go&quot;&gt;&lt;a href=&quot;#client-go&quot; class=&quot;headerlink&quot; title=&quot;client.go&quot;&gt;&lt;/a&gt;client.go&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;package main&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;fmt&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;log&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;net/rpc&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;os&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Args struct &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    A, B int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Quotient struct &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Quo, Rem int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func main() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if len(os.Args) != 2 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fmt.Println(&amp;quot;Usage: &amp;quot;, os.Args[0], &amp;quot;server:port&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        os.Exit(1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    service := os.Args[1]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    client, err := rpc.Dial(&amp;quot;tcp&amp;quot;, service)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        log.Fatal(&amp;quot;dialing:&amp;quot;, err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Synchronous call&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    args := Args&amp;#123;17, 8&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var reply int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    err = client.Call(&amp;quot;Arith.Multiply&amp;quot;, args, &amp;amp;reply)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        log.Fatal(&amp;quot;arith error:&amp;quot;, err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fmt.Printf(&amp;quot;Arith: %d*%d=%d\n&amp;quot;, args.A, args.B, reply)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var quot Quotient&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    err = client.Call(&amp;quot;Arith.Divide&amp;quot;, args, &amp;amp;quot)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        log.Fatal(&amp;quot;arith error:&amp;quot;, err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fmt.Printf(&amp;quot;Arith: %d/%d=%d remainder %d\n&amp;quot;, args.A, args.B, quot.Quo, quot.Rem)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;代码解析&quot;&gt;&lt;a href=&quot;#代码解析&quot; class=&quot;headerlink&quot; title=&quot;代码解析&quot;&gt;&lt;/a&gt;代码解析&lt;/h2&gt;</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;rpc之TCP-RPC&quot;&gt;&lt;a href=&quot;#rpc之TCP-RPC&quot; class=&quot;headerlink&quot; title=&quot;rpc之TCP_RPC&quot;&gt;&lt;/a&gt;rpc之TCP_RPC&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;直接上代码&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;server-go&quot;&gt;&lt;a href=&quot;#server-go&quot; class=&quot;headerlink&quot; title=&quot;server.go&quot;&gt;&lt;/a&gt;server.go&lt;/h2&gt;
    
    </summary>
    
      <category term="golang-rpc" scheme="http://www.lflxp.cn/categories/golang-rpc/"/>
    
    
      <category term="golang" scheme="http://www.lflxp.cn/tags/golang/"/>
    
  </entry>
  
  <entry>
    <title>golang版rpc原理</title>
    <link href="http://www.lflxp.cn/2016/04/09/2016-04-09-golang%E7%89%88rpc/"/>
    <id>http://www.lflxp.cn/2016/04/09/2016-04-09-golang版rpc/</id>
    <published>2016-04-09T09:42:00.646Z</published>
    <updated>2016-04-09T10:45:27.963Z</updated>
    
    <content type="html">&lt;h1 id=&quot;学习RPC&quot;&gt;&lt;a href=&quot;#学习RPC&quot; class=&quot;headerlink&quot; title=&quot;学习RPC&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://www.cnblogs.com/yjf512/archive/2013/02/28/2937261.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;学习RPC&lt;/a&gt;&lt;/h1&gt;&lt;h2 id=&quot;golang的rpc有两种方法进行调用，一种是rpc例子中给的：&quot;&gt;&lt;a href=&quot;#golang的rpc有两种方法进行调用，一种是rpc例子中给的：&quot; class=&quot;headerlink&quot; title=&quot;golang的rpc有两种方法进行调用，一种是rpc例子中给的：&quot;&gt;&lt;/a&gt;golang的rpc有两种方法进行调用，一种是rpc例子中给的：&lt;/h2&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;package main&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;net/rpc&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;net/http&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;log&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;net&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;time&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Args struct &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        A, B int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Arith int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func (t *Arith) Multiply(args *Args, reply *([]string)) error &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        *reply = append(*reply, &amp;quot;test&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return nil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func main() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        arith := new(Arith)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        rpc.Register(arith)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        rpc.HandleHTTP()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        l, e := net.Listen(&amp;quot;tcp&amp;quot;, &amp;quot;:1234&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if e != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                log.Fatal(&amp;quot;listen error:&amp;quot;, e)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        go http.Serve(l, nil)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        time.Sleep(5 * time.Second)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        client, err := rpc.DialHTTP(&amp;quot;tcp&amp;quot;, &amp;quot;127.0.0.1&amp;quot; + &amp;quot;:1234&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                log.Fatal(&amp;quot;dialing:&amp;quot;, err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        args := &amp;amp;Args&amp;#123;7,8&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        reply := make([]string, 10)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        err = client.Call(&amp;quot;Arith.Multiply&amp;quot;, args, &amp;amp;reply)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                log.Fatal(&amp;quot;arith error:&amp;quot;, err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        log.Println(reply)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;另一种是使用NewServer&quot;&gt;&lt;a href=&quot;#另一种是使用NewServer&quot; class=&quot;headerlink&quot; title=&quot;另一种是使用NewServer&quot;&gt;&lt;/a&gt;另一种是使用NewServer&lt;/h2&gt;&lt;p&gt;这种是当rpc已经注册的时候就要使用了另外一种了。即一个server只能在DefaultRPC中注册一种类型。&lt;br&gt;当Server使用rpc.NewServer的时候，client也需要进行下改动了&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;package main&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;net/rpc&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        //&amp;quot;net/http&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;log&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;net&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;time&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Args struct &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        A, B int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Arith int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func (t *Arith) Multiply(args *Args, reply *([]string)) error &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        *reply = append(*reply, &amp;quot;test&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return nil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func main() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        newServer := rpc.NewServer()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        newServer.Register(new(Arith))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        l, e := net.Listen(&amp;quot;tcp&amp;quot;, &amp;quot;127.0.0.1:1234&amp;quot;) // any available address&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if e != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                log.Fatalf(&amp;quot;net.Listen tcp :0: %v&amp;quot;, e)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        go newServer.Accept(l)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        newServer.HandleHTTP(&amp;quot;/foo&amp;quot;, &amp;quot;/bar&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        time.Sleep(2 * time.Second)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        address, err := net.ResolveTCPAddr(&amp;quot;tcp&amp;quot;, &amp;quot;127.0.0.1:1234&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                panic(err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        conn, _ := net.DialTCP(&amp;quot;tcp&amp;quot;, nil, address)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        defer conn.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        client := rpc.NewClient(conn)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        defer client.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        args := &amp;amp;Args&amp;#123;7,8&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        reply := make([]string, 10)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        err = client.Call(&amp;quot;Arith.Multiply&amp;quot;, args, &amp;amp;reply)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                log.Fatal(&amp;quot;arith error:&amp;quot;, err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        log.Println(reply)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;第二个例子中的&lt;/li&gt;
&lt;li&gt;newServer.HandleHTTP(“/foo”, “/bar”)&lt;/li&gt;
&lt;li&gt;可以任意设置，第一个例子其实是设置了默认的两个&lt;/li&gt;
&lt;li&gt;这里也顺便将reply作为[]slice的例子给演示了下&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;学习RPC&quot;&gt;&lt;a href=&quot;#学习RPC&quot; class=&quot;headerlink&quot; title=&quot;学习RPC&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://www.cnblogs.com/yjf512/archive/2013/02/28/2937261.html&quot;&gt;学习RPC&lt;/a&gt;&lt;/h1&gt;&lt;h2 id=&quot;golang的rpc有两种方法进行调用，一种是rpc例子中给的：&quot;&gt;&lt;a href=&quot;#golang的rpc有两种方法进行调用，一种是rpc例子中给的：&quot; class=&quot;headerlink&quot; title=&quot;golang的rpc有两种方法进行调用，一种是rpc例子中给的：&quot;&gt;&lt;/a&gt;golang的rpc有两种方法进行调用，一种是rpc例子中给的：&lt;/h2&gt;
    
    </summary>
    
      <category term="golang-rpc" scheme="http://www.lflxp.cn/categories/golang-rpc/"/>
    
    
      <category term="golang" scheme="http://www.lflxp.cn/tags/golang/"/>
    
  </entry>
  
  <entry>
    <title>golang版orzdba</title>
    <link href="http://www.lflxp.cn/2016/04/09/2016-04-09-golang%E7%89%88orzdba/"/>
    <id>http://www.lflxp.cn/2016/04/09/2016-04-09-golang版orzdba/</id>
    <published>2016-04-09T09:35:24.294Z</published>
    <updated>2016-04-09T10:47:30.014Z</updated>
    
    <content type="html">&lt;h1 id=&quot;Golang重构Orzdba数据库分析工具&quot;&gt;&lt;a href=&quot;#Golang重构Orzdba数据库分析工具&quot; class=&quot;headerlink&quot; title=&quot;Golang重构Orzdba数据库分析工具&quot;&gt;&lt;/a&gt;Golang重构Orzdba数据库分析工具&lt;/h1&gt;&lt;h2 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h2&gt;&lt;p&gt;之前当运维DBA，处于学习的目的用Golang重构了淘宝Dba开源的Orzdba,学习golang的同时了解数据库和Linux系统相关的知识，现分享出来大家学习&lt;/p&gt;
&lt;h2 id=&quot;代码&quot;&gt;&lt;a href=&quot;#代码&quot; class=&quot;headerlink&quot; title=&quot;代码&quot;&gt;&lt;/a&gt;代码&lt;/h2&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;135&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;136&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;137&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;138&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;139&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;140&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;141&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;142&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;143&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;144&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;145&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;146&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;147&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;148&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;149&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;150&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;151&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;152&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;153&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;154&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;155&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;156&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;157&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;158&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;159&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;160&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;161&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;162&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;163&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;164&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;165&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;166&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;167&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;168&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;169&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;170&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;171&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;172&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;173&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;174&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;175&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;176&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;177&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;178&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;179&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;180&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;181&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;182&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;183&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;184&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;185&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;186&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;187&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;188&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;189&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;190&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;191&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;193&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;194&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;195&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;196&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;197&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;198&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;199&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;200&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;201&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;202&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;203&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;204&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;205&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;206&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;207&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;208&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;209&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;210&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;211&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;212&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;213&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;214&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;215&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;216&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;217&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;218&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;219&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;220&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;221&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;222&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;223&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;224&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;225&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;226&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;227&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;228&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;229&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;230&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;231&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;232&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;233&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;234&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;235&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;236&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;237&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;238&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;239&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;240&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;241&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;242&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;243&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;244&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;245&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;246&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;247&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;248&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;249&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;250&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;251&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;252&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;253&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;254&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;255&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;256&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;257&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;258&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;259&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;260&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;261&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;262&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;263&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;264&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;265&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;266&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;267&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;268&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;269&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;270&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;271&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;272&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;273&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;274&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;275&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;276&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;277&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;278&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;279&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;280&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;281&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;282&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;283&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;284&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;285&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;286&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;287&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;288&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;289&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;290&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;291&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;292&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;293&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;294&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;295&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;296&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;297&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;298&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;299&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;300&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;301&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;302&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;303&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;304&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;305&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;306&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;307&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;308&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;309&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;310&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;311&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;312&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;313&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;314&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;315&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;316&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;317&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;318&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;319&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;320&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;321&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;322&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;323&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;324&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;325&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;326&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;327&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;328&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;329&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;330&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;331&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;332&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;333&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;334&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;335&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;336&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;337&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;338&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;339&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;340&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;341&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;342&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;343&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;344&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;345&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;346&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;347&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;348&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;349&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;350&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;351&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;352&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;353&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;354&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;355&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;356&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;357&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;358&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;359&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;360&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;361&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;362&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;363&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;364&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;365&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;366&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;367&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;368&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;369&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;370&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;371&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;372&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;373&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;374&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;375&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;376&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;377&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;378&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;379&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;380&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;381&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;382&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;383&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;384&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;385&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;386&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;387&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;388&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;389&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;390&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;391&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;392&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;393&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;394&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;395&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;396&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;397&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;398&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;399&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;400&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;401&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;402&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;403&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;404&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;405&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;406&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;407&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;408&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;409&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;410&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;411&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;412&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;413&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;414&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;415&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;416&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;417&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;418&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;419&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;420&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;421&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;422&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;423&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;424&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;425&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;426&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;427&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;428&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;429&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;430&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;431&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;432&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;433&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;434&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;435&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;436&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;437&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;438&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;439&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;440&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;441&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;442&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;443&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;444&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;445&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;446&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;447&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;448&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;449&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;450&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;451&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;452&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;453&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;454&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;455&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;456&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;457&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;458&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;459&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;460&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;461&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;462&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;463&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;464&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;465&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;466&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;467&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;468&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;469&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;470&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;471&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;472&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;473&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;474&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;475&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;476&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;477&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;478&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;479&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;480&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;481&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;482&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;483&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;484&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;485&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;486&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;487&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;488&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;489&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;490&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;491&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;492&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;493&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;494&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;495&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;496&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;497&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;498&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;499&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;500&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;501&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;502&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;503&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;504&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;505&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;506&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;507&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;508&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;509&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;510&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;511&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;512&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;513&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;514&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;515&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;516&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;517&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;518&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;519&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;520&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;521&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;522&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;523&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;524&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;525&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;526&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;527&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;528&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;529&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;530&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;531&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;532&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;533&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;534&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;535&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;536&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;537&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;538&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;539&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;540&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;541&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;542&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;543&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;544&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;545&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;546&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;547&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;548&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;549&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;550&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;551&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;552&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;553&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;554&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;555&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;556&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;557&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;558&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;559&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;560&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;561&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;562&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;563&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;564&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;565&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;566&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;567&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;568&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;569&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;570&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;571&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;572&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;573&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;574&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;575&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;576&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;577&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;578&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;579&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;580&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;581&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;582&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;583&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;584&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;585&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;586&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;587&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;588&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;589&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;590&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;591&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;592&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;593&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;594&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;595&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;596&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;597&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;598&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;599&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;600&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;601&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;602&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;603&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;604&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;605&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;606&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;607&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;608&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;609&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;610&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;611&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;612&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;613&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;614&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;615&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;616&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;617&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;618&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;619&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;620&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;621&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;622&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;623&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;624&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;625&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;626&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;627&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;628&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;629&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;630&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;631&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;632&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;633&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;634&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;635&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;636&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;637&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;638&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;639&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;640&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;641&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;642&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;643&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;644&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;645&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;646&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;647&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;648&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;649&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;650&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;651&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;652&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;653&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;654&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;655&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;656&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;657&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;658&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;659&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;660&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;661&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;662&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;663&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;664&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;665&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;666&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;667&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;668&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;669&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;670&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;671&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;672&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;673&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;674&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;675&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;676&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;677&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;678&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;679&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;680&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;681&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;682&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;683&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;684&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;685&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;686&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;687&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;688&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;689&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;690&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;691&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;692&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;693&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;694&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;695&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;696&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;697&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;698&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;699&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;700&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;701&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;702&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;703&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;704&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;705&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;706&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;707&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;708&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;709&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;710&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;711&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;712&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;713&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;714&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;715&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;716&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;717&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;718&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;719&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;720&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;721&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;722&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;723&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;724&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;725&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;726&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;727&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;728&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;729&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;730&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;731&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;732&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;733&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;734&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;735&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;736&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;737&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;738&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;739&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;740&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;package main&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// import &amp;quot;syscall&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// import &amp;quot;os&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;flag&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;fmt&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;io/ioutil&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;os/exec&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;strconv&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;strings&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;time&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type basic struct &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //loadavg&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    load_1  float64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    load_5  float64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    load_15 float64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //cpu&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cpu_core       float64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cpu_usr        int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cpu_nice       int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cpu_sys        int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cpu_idl        int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cpu_iow        int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cpu_irq        int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cpu_softirq    int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cpu_steal      int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cpu_guest      int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cpu_guest_nice int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //swap&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    swap_in  int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    swap_out int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //net&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    net_recv int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    net_send int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //disk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    io_1  int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    io_2  int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    io_3  int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    io_4  int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    io_5  int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    io_6  int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    io_7  int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    io_8  int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    io_9  int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    io_10 int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    io_11 int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //tcprstat rt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    rt_count int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    rt_avg   int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    rt_a5    int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    rt_a9    int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //mysql -e &amp;quot;show global status&amp;quot; 不用\G&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //mysql -com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Com_select int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Com_insert int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Com_update int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Com_delete int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //mysql -hit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //while true;do s1=`mysql -e &amp;apos;show global status&amp;apos;|grep -w -E &amp;apos;Innodb_buffer_pool_read_requests|Innodb_buffer_pool_reads&amp;apos;|xargs echo|awk &amp;apos;&amp;#123;print $2&amp;#125;&amp;apos;`;s2=`mysql -e &amp;apos;show global status&amp;apos;|grep -w -E &amp;apos;Innodb_buffer_pool_read_requests|Innodb_buffer_pool_reads&amp;apos;|xargs echo|awk &amp;apos;&amp;#123;print $4&amp;#125;&amp;apos;`;sleep 1;ss1=`mysql -e &amp;apos;show global status&amp;apos;|grep -w -E &amp;apos;Innodb_buffer_pool_read_requests|Innodb_buffer_pool_reads&amp;apos;|xargs echo|awk &amp;apos;&amp;#123;print $2&amp;#125;&amp;apos;`;ss2=`mysql -e &amp;apos;show global status&amp;apos;|grep -w -E &amp;apos;Innodb_buffer_pool_read_requests|Innodb_buffer_pool_reads&amp;apos;|xargs echo|awk &amp;apos;&amp;#123;print $4&amp;#125;&amp;apos;`;rs1=$(($ss1-$s1+1));rs2=$(($ss2-$s2));rs3=$((1000000*($rs1-$rs2)/$rs1));echo $rs1,$rs2,$rs3;done&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // (Innodb_buffer_pool_read_requests - Innodb_buffer_pool_reads) / Innodb_buffer_pool_read_requests * 100%,每秒的计算&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Innodb_buffer_pool_read_requests int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Innodb_buffer_pool_reads         int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //mysql -innodb_rows&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Innodb_rows_inserted int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Innodb_rows_updated  int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Innodb_rows_deleted  int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Innodb_rows_read     int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //mysql -innodb_pages&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Innodb_buffer_pool_pages_data    int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Innodb_buffer_pool_pages_free    int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Innodb_buffer_pool_pages_dirty   int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Innodb_buffer_pool_pages_flushed int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //mysql --innodb_data&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Innodb_data_reads   int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Innodb_data_writes  int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Innodb_data_read    int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Innodb_data_written int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //mysql --innodb_log&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Innodb_os_log_fsyncs  int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Innodb_os_log_written int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //mysql --threads&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Threads_running   int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Threads_connected int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Threads_created   int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Threads_cached    int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //mysql --bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Bytes_received int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Bytes_sent     int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //mysql --innodb_status show engine innodb status&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //log unflushed = Log sequence number - Log flushed up to&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //uncheckpointed bytes = Log sequence number - Last checkpoint at&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //mysql -e &amp;quot;show engine innodb status\G&amp;quot;|grep -n -E -A4 -B1 &amp;quot;^TRANSACTIONS|LOG|ROW OPERATIONS&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //mysql -e &amp;quot;show engine innodb status\G&amp;quot;|grep -E &amp;quot;Last checkpoint|read view|queries inside|queue&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    log_sequence    int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    log_flushed     int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    history_list    int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    last_checkpoint int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    read_view       int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    query_inside    int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    query_queue     int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// type mysql struct &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type flags struct &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    interval      string //时间间隔 默认1秒&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    count         int    //运行时间 默认1秒&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    time          bool   //打印当前时间&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    nocolor       bool   //不显示颜色&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    load          bool   //打印Load info&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cpu           bool   //打印Cpu info&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    swap          bool   //打印swap info&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    disk          string //打印Disk info&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    net           string // 打印net info&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    host          string //mysql连接主机&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port          string // mysql连接断开&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    socket        string //mysql socket连接文件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    com           bool   //Print MySQL Status(Com_select,Com_insert,Com_update,Com_delete).&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    hit           bool   //Print Innodb Hit%.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    innodb_rows   bool   //Print Innodb Rows Status(Innodb_rows_inserted/updated/deleted/read).&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    innodb_pages  bool   //Print Innodb Buffer Pool Pages Status(Innodb_buffer_pool_pages_data/free/dirty/flushed)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    innodb_data   bool   //Print Innodb Data Status(Innodb_data_reads/writes/read/written)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    innodb_log    bool   //Print Innodb Log  Status(Innodb_os_log_fsyncs/written)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    innodb_status bool   //Print Innodb Status from Command: &amp;apos;Show Engine Innodb Status&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //(history list/ log unflushed/uncheckpointed bytes/ read views/ queries inside/queued)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    threads bool //Print Threads Status(Threads_running,Threads_connected,Threads_created,Threads_cached).&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    rt      bool //Print MySQL DB RT(us).&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    bytes   bool //Print Bytes received from/send to MySQL(Bytes_received,Bytes_sent).&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mysql  bool //Print MySQLInfo (include -t,-com,-hit,-T,-B).&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    innodb bool //Print InnodbInfo(include -t,-innodb_pages,-innodb_data,-innodb_log,-innodb_status)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sys    bool //Print SysInfo   (include -t,-l,-c,-s).&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    lazy   bool //Print Info      (include -t,-l,-c,-s,-com,-hit).&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    logfile        string //Print to Logfile.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    logfile_by_day bool   //One day a logfile,the suffix of logfile is &amp;apos;yyyy-mm-dd&amp;apos;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    other          []string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //and is valid with -L.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func (e *flags) init() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    interval := flag.String(&amp;quot;i&amp;quot;, &amp;quot;1&amp;quot;, &amp;quot;时间间隔 默认1秒&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    count := flag.Int(&amp;quot;C&amp;quot;, 0, &amp;quot;运行时间 默认无限&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    time := flag.Bool(&amp;quot;t&amp;quot;, false, &amp;quot;打印当前时间&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    nocolor := flag.Bool(&amp;quot;nocolor&amp;quot;, true, &amp;quot;不显示颜色&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    load := flag.Bool(&amp;quot;l&amp;quot;, false, &amp;quot;打印Load info&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cpu := flag.Bool(&amp;quot;c&amp;quot;, false, &amp;quot;打印Cpu info&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    swap := flag.Bool(&amp;quot;s&amp;quot;, false, &amp;quot;打印swap info&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    disk := flag.String(&amp;quot;d&amp;quot;, &amp;quot;none&amp;quot;, &amp;quot;打印Disk info&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    net := flag.String(&amp;quot;n&amp;quot;, &amp;quot;none&amp;quot;, &amp;quot;打印net info&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    host := flag.String(&amp;quot;H&amp;quot;, &amp;quot;127.0.0.1&amp;quot;, &amp;quot;Mysql连接主机，默认127.0.0.1&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port := flag.String(&amp;quot;P&amp;quot;, &amp;quot;3306&amp;quot;, &amp;quot;Mysql连接端口,默认3306&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    socket := flag.String(&amp;quot;S&amp;quot;, &amp;quot;none&amp;quot;, &amp;quot;mysql socket连接文件地址&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    com := flag.Bool(&amp;quot;com&amp;quot;, false, &amp;quot;Print MySQL Status(Com_select,Com_insert,Com_update,Com_delete).&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    hit := flag.Bool(&amp;quot;hit&amp;quot;, false, &amp;quot;Print Innodb Hit%.&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    innodb_rows := flag.Bool(&amp;quot;innodb_rows&amp;quot;, false, &amp;quot;Print Innodb Rows Status(Innodb_rows_inserted/updated/deleted/read).&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    innodb_pages := flag.Bool(&amp;quot;innodb_pages&amp;quot;, false, &amp;quot;Print Innodb Buffer Pool Pages Status(Innodb_buffer_pool_pages_data/free/dirty/flushed)&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    innodb_data := flag.Bool(&amp;quot;innodb_data&amp;quot;, false, &amp;quot;Print Innodb Data Status(Innodb_data_reads/writes/read/written)&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    innodb_log := flag.Bool(&amp;quot;innodb_log&amp;quot;, false, &amp;quot;Print Innodb Log  Status(Innodb_os_log_fsyncs/written)&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    innodb_status := flag.Bool(&amp;quot;innodb_status&amp;quot;, false, &amp;quot;Print Innodb Status from Command: &amp;apos;Show Engine Innodb Status&amp;apos;&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    threads := flag.Bool(&amp;quot;T&amp;quot;, false, &amp;quot;Print Threads Status(Threads_running,Threads_connected,Threads_created,Threads_cached).&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    rt := flag.Bool(&amp;quot;rt&amp;quot;, false, &amp;quot;Print MySQL DB RT(us).&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    bytes := flag.Bool(&amp;quot;B&amp;quot;, false, &amp;quot;Print Bytes received from/send to MySQL(Bytes_received,Bytes_sent).&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mysql := flag.Bool(&amp;quot;mysql&amp;quot;, false, &amp;quot;Print MySQLInfo (include -t,-com,-hit,-T,-B).&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    innodb := flag.Bool(&amp;quot;innodb&amp;quot;, false, &amp;quot;Print InnodbInfo(include -t,-innodb_pages,-innodb_data,-innodb_log,-innodb_status)&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sys := flag.Bool(&amp;quot;sys&amp;quot;, false, &amp;quot;Print SysInfo   (include -t,-l,-c,-s).&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    lazy := flag.Bool(&amp;quot;lazy&amp;quot;, false, &amp;quot;Print Info      (include -t,-l,-c,-s,-com,-hit).&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    logfile := flag.String(&amp;quot;L&amp;quot;, &amp;quot;none&amp;quot;, &amp;quot;Print to Logfile.&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    logfile_by_day := flag.Bool(&amp;quot;logfile_by_day&amp;quot;, false, &amp;quot;One day a logfile,the suffix of logfile is &amp;apos;yyyy-mm-dd&amp;apos;;&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    flag.Parse()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.interval = *interval&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.count = *count&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.time = *time&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.nocolor = *nocolor&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.load = *load&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.cpu = *cpu&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.swap = *swap&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.disk = *disk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.net = *net&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.host = *host&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.port = *port&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.socket = *socket&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.com = *com&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.hit = *hit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.innodb_rows = *innodb_rows&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.innodb_pages = *innodb_pages&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.innodb_data = *innodb_data&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.innodb_log = *innodb_log&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.innodb_status = *innodb_status&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.threads = *threads&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.rt = *rt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.bytes = *bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.mysql = *mysql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.innodb = *innodb&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.sys = *sys&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.lazy = *lazy&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.logfile = *logfile&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.logfile_by_day = *logfile_by_day&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.other = flag.Args()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func GetValue() map[string]interface&amp;#123;&amp;#125; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    u := flags&amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    u.init()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    info := map[string]interface&amp;#123;&amp;#125;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;interval&amp;quot;:           u.interval,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;count&amp;quot;:              u.count,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;time&amp;quot;:               u.time,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;nocolor&amp;quot;:            u.nocolor,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;load&amp;quot;:               u.load,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;cpu&amp;quot;:                u.cpu,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;swap&amp;quot;:               u.swap,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;disk&amp;quot;:               u.disk,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;net&amp;quot;:                u.net,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;port&amp;quot;:               u.port,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;socket&amp;quot;:             u.socket,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;com&amp;quot;:                u.com,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;hit&amp;quot;:                u.hit,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;innodb_rows&amp;quot;:        u.innodb_rows,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;innodb_pages&amp;quot;:       u.innodb_pages,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;innodb_data&amp;quot;:        u.innodb_data,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;innodb_log&amp;quot;:         u.innodb_log,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;innodb_status&amp;quot;:      u.innodb_status,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;threads&amp;quot;:            u.threads,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;rt&amp;quot;:                 u.rt,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;bytes&amp;quot;:              u.bytes,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;mysql&amp;quot;:              u.mysql,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;innodb&amp;quot;:             u.innodb,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;sys&amp;quot;:                u.sys,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;lazy&amp;quot;:               u.lazy,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;logfile&amp;quot;:            u.logfile,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;quot;logfile_by_daybool&amp;quot;: u.logfile_by_day,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return info&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func checkErr(errinfo error) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if errinfo != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        panic(errinfo.Error())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func execCommand(commands string) string &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // basic := &amp;quot;for x in &amp;#123;1&amp;#125;;do load=`top -bn 1|sed -n &amp;apos;1p&amp;apos;|awk &amp;apos;&amp;#123;print $12,$13,$14&amp;#125;&amp;apos;|sed &amp;apos;s/[[:space:]]//g&amp;apos;`;cpu=`top -bn 1|sed -n &amp;apos;3p&amp;apos;|awk &amp;apos;&amp;#123;print $2,$4,$6,$8,$10,$12,$14,$16&amp;#125;&amp;apos;|sed &amp;apos;s/[[:space:]]/,/g&amp;apos;`;echo $load,$cpu;done&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cmd := exec.Command(&amp;quot;bash&amp;quot;, &amp;quot;-c&amp;quot;, commands)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    stdout, err := cmd.StdoutPipe()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    checkErr(err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    _, errd := cmd.StderrPipe()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    checkErr(errd)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    errs := cmd.Start()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    checkErr(errs)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    bytesErr, err := ioutil.ReadAll(stdout)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    checkErr(err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return string(bytesErr)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func createCommand(info map[string]interface&amp;#123;&amp;#125;, ss basic) basic &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //rt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if info[&amp;quot;rt&amp;quot;] == true &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        var rt_cmd string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if info[&amp;quot;port&amp;quot;] == &amp;quot;3306&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            rt_cmd = &amp;quot;tcprstat -p 3306 -t 1 -n 1 -l `/sbin/ifconfig | grep &amp;apos;addr:[^ ]\\+&amp;apos; -o | cut -f 2 -d : | xargs echo | sed -e &amp;apos;s/ /,/g&amp;apos;`|awk &amp;apos;&amp;#123;print $2,$5,$9,$12&amp;#125;&amp;apos;|sed -n &amp;apos;2p&amp;apos;|sed &amp;apos;s/[[:space:]]/,/g&amp;apos;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            rt_cmd = &amp;quot;tcprstat -p &amp;quot; + info[&amp;quot;port&amp;quot;].(string) + &amp;quot; -t 1 -n 1 -l `/sbin/ifconfig | grep &amp;apos;addr:[^ ]\\+&amp;apos; -o | cut -f 2 -d : | xargs echo | sed -e &amp;apos;s/ /,/g&amp;apos;`|awk &amp;apos;&amp;#123;print $2,$5,$9,$12&amp;#125;&amp;apos;|sed -n &amp;apos;2p&amp;apos;|sed &amp;apos;s/[[:space:]]/,/g&amp;apos;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        rt_string := execCommand(rt_cmd)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        rt_string = strings.Replace(rt_string, &amp;quot;\n&amp;quot;, &amp;quot;&amp;quot;, -1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        rt_result := strings.Split(rt_string, &amp;quot;,&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.rt_count, _ = strconv.Atoi(rt_result[0])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.rt_avg, _ = strconv.Atoi(rt_result[0])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.rt_a5, _ = strconv.Atoi(rt_result[0])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.rt_a9, _ = strconv.Atoi(rt_result[0])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // swap          bool   //打印swap info&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if info[&amp;quot;swap&amp;quot;] == true || info[&amp;quot;load&amp;quot;] == true || info[&amp;quot;cpu&amp;quot;] == true &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        basic_cmd := &amp;quot;cat /proc/loadavg /proc/stat /proc/vmstat |sed &amp;apos;s/\\// china /g&amp;apos;|grep -w -E &amp;apos;china|cpu|pswpin|pswpout&amp;apos;|xargs echo|awk &amp;apos;&amp;#123;print $1,$2,$3,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$21&amp;#125;&amp;apos;|sed &amp;apos;s/[[:space:]]/,/g&amp;apos;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        basic_string := execCommand(basic_cmd)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        basic_string = strings.Replace(basic_string, &amp;quot;\n&amp;quot;, &amp;quot;&amp;quot;, -1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        basic_result := strings.Split(basic_string, &amp;quot;,&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.load_1, _ = strconv.ParseFloat(basic_result[0], 64)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.load_5, _ = strconv.ParseFloat(basic_result[1], 64)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.load_15, _ = strconv.ParseFloat(basic_result[2], 64)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.cpu_usr, _ = strconv.Atoi(basic_result[3])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.cpu_nice, _ = strconv.Atoi(basic_result[4])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.cpu_sys, _ = strconv.Atoi(basic_result[5])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.cpu_idl, _ = strconv.Atoi(basic_result[6])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.cpu_iow, _ = strconv.Atoi(basic_result[7])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.cpu_irq, _ = strconv.Atoi(basic_result[8])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.cpu_softirq, _ = strconv.Atoi(basic_result[9])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.cpu_steal, _ = strconv.Atoi(basic_result[10])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.cpu_guest, _ = strconv.Atoi(basic_result[11])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.cpu_guest_nice, _ = strconv.Atoi(basic_result[12])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.swap_in, _ = strconv.Atoi(basic_result[13])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.swap_out, _ = strconv.Atoi(basic_result[14])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //disk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if info[&amp;quot;disk&amp;quot;] != &amp;quot;none&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        disk_cmd := &amp;quot;cat /proc/diskstats |grep -w -E &amp;apos;&amp;quot; + info[&amp;quot;disk&amp;quot;].(string) + &amp;quot;&amp;apos;|awk &amp;apos;&amp;#123;print $4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14&amp;#125;&amp;apos;|sed &amp;apos;s/[[:space:]]/,/g&amp;apos;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        disk_string := execCommand(disk_cmd)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        disk_string = strings.Replace(disk_string, &amp;quot;\n&amp;quot;, &amp;quot;&amp;quot;, -1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        disk_result := strings.Split(disk_string, &amp;quot;,&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.io_1, _ = strconv.Atoi(disk_result[0])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.io_2, _ = strconv.Atoi(disk_result[1])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.io_3, _ = strconv.Atoi(disk_result[2])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.io_4, _ = strconv.Atoi(disk_result[3])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.io_5, _ = strconv.Atoi(disk_result[4])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.io_6, _ = strconv.Atoi(disk_result[5])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.io_7, _ = strconv.Atoi(disk_result[6])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.io_8, _ = strconv.Atoi(disk_result[7])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.io_9, _ = strconv.Atoi(disk_result[8])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.io_10, _ = strconv.Atoi(disk_result[9])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.io_11, _ = strconv.Atoi(disk_result[10])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //net&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if info[&amp;quot;net&amp;quot;] != &amp;quot;none&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        net_cmd := &amp;quot;cat /proc/net/dev |grep -E -w &amp;apos;&amp;quot; + info[&amp;quot;net&amp;quot;].(string) + &amp;quot;&amp;apos;|awk &amp;apos;&amp;#123;print $2,$10&amp;#125;&amp;apos;|sed &amp;apos;s/[[:space:]]/,/g&amp;apos;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        net_string := execCommand(net_cmd)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        net_string = strings.Replace(net_string, &amp;quot;\n&amp;quot;, &amp;quot;&amp;quot;, -1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        net_result := strings.Split(net_string, &amp;quot;,&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.net_recv, _ = strconv.Atoi(net_result[0])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.net_send, _ = strconv.Atoi(net_result[1])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // //mysql engine innodb status&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if info[&amp;quot;innodb_status&amp;quot;] == true &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        engine_cmd := &amp;quot;mysql -e &amp;apos;show engine innodb status\\G&amp;apos;|grep -w -E &amp;apos;History list|Log sequence|Log flushed|queries inside|queue|read views|Last checkpoint&amp;apos;|xargs echo|awk &amp;apos;&amp;#123;print $4,$8,$13,$17,$18,$22,$26&amp;#125;&amp;apos;|sed &amp;apos;s/[[:space:]]/,/g&amp;apos;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        engine_string := execCommand(engine_cmd)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        engine_string = strings.Replace(engine_string, &amp;quot;\n&amp;quot;, &amp;quot;&amp;quot;, -1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        engine_result := strings.Split(engine_string, &amp;quot;,&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.history_list, _ = strconv.Atoi(engine_result[0])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.log_sequence, _ = strconv.Atoi(engine_result[1])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.log_flushed, _ = strconv.Atoi(engine_result[2])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.last_checkpoint, _ = strconv.Atoi(engine_result[3])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.query_inside, _ = strconv.Atoi(engine_result[4])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.query_queue, _ = strconv.Atoi(engine_result[5])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.read_view, _ = strconv.Atoi(engine_result[6])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // //mysql global status&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if info[&amp;quot;com&amp;quot;] == true || info[&amp;quot;hit&amp;quot;] == true || info[&amp;quot;innodb_rows&amp;quot;] == true || info[&amp;quot;innodb_pages&amp;quot;] == true || info[&amp;quot;innodb_data&amp;quot;] == true || info[&amp;quot;innodb_log&amp;quot;] == true || info[&amp;quot;threads&amp;quot;] == true || info[&amp;quot;bytes&amp;quot;] == true &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        global_cmd := &amp;quot;mysql -e &amp;apos;show global status&amp;apos;|grep -w -E &amp;apos;Com_select|Com_insert|Com_update|Com_delete|Innodb_buffer_pool_read_requests|Innodb_buffer_pool_reads|Innodb_rows_inserted|Innodb_rows_updated|Innodb_rows_deleted|Innodb_rows_read|Innodb_buffer_pool_pages_data|Innodb_buffer_pool_pages_free|Innodb_buffer_pool_pages_dirty|Innodb_buffer_pool_pages_flushed|Innodb_data_reads|Innodb_data_writes|Innodb_data_read|Innodb_data_written|Innodb_os_log_fsyncs|Innodb_os_log_written|Threads_running|Threads_connected|Threads_created|Threads_cached|Bytes_received|Bytes_sent&amp;apos;|awk &amp;apos;&amp;#123;print $2&amp;#125;&amp;apos;|xargs echo|sed &amp;apos;s/[[:space:]]/,/g&amp;apos;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        global_string := execCommand(global_cmd)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        global_string = strings.Replace(global_string, &amp;quot;\n&amp;quot;, &amp;quot;&amp;quot;, -1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        global_result := strings.Split(global_string, &amp;quot;,&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.Bytes_received, _ = strconv.Atoi(global_result[0])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.Bytes_sent, _ = strconv.Atoi(global_result[1])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.Com_delete, _ = strconv.Atoi(global_result[2])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.Com_insert, _ = strconv.Atoi(global_result[3])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.Com_select, _ = strconv.Atoi(global_result[4])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.Com_update, _ = strconv.Atoi(global_result[5])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.Innodb_buffer_pool_pages_data, _ = strconv.Atoi(global_result[6])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.Innodb_buffer_pool_pages_dirty, _ = strconv.Atoi(global_result[7])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.Innodb_buffer_pool_pages_flushed, _ = strconv.Atoi(global_result[8])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.Innodb_buffer_pool_pages_free, _ = strconv.Atoi(global_result[9])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.Innodb_buffer_pool_read_requests, _ = strconv.Atoi(global_result[10])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.Innodb_buffer_pool_reads, _ = strconv.Atoi(global_result[11])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.Innodb_data_read, _ = strconv.Atoi(global_result[12])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.Innodb_data_reads, _ = strconv.Atoi(global_result[13])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.Innodb_data_writes, _ = strconv.Atoi(global_result[14])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.Innodb_data_written, _ = strconv.Atoi(global_result[15])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.Innodb_os_log_fsyncs, _ = strconv.Atoi(global_result[16])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.Innodb_os_log_written, _ = strconv.Atoi(global_result[17])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.Innodb_rows_deleted, _ = strconv.Atoi(global_result[18])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.Innodb_rows_inserted, _ = strconv.Atoi(global_result[19])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.Innodb_rows_read, _ = strconv.Atoi(global_result[20])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.Innodb_rows_updated, _ = strconv.Atoi(global_result[21])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.Threads_cached, _ = strconv.Atoi(global_result[22])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.Threads_connected, _ = strconv.Atoi(global_result[23])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.Threads_created, _ = strconv.Atoi(global_result[24])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ss.Threads_running, _ = strconv.Atoi(global_result[25])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return ss&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//文字字体 参数介绍：文本内容 文字颜色 背景颜色 是否下划线 是否高亮&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//http://www.cnblogs.com/frydsh/p/4139922.html&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func Colorize(text string, status string, background string, underline string, highshow string) string &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    out_one := &amp;quot;\033[&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    out_two := &amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    out_three := &amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    out_four := &amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //可动态配置字体颜色 背景色 高亮&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // 显示：0(默认)、1(粗体/高亮)、22(非粗体)、4(单条下划线)、24(无下划线)、5(闪烁)、25(无闪烁)、7(反显、翻转前景色和背景色)、27(无反显)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // 颜色：0(黑)、1(红)、2(绿)、 3(黄)、4(蓝)、5(洋红)、6(青)、7(白)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //  前景色为30+颜色值，如31表示前景色为红色；背景色为40+颜色值，如41表示背景色为红色。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if underline == &amp;quot;y&amp;quot; &amp;amp;&amp;amp; highshow == &amp;quot;y&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        out_four = &amp;quot;;1;4m&amp;quot; //高亮&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; else if underline != &amp;quot;y&amp;quot; &amp;amp;&amp;amp; highshow == &amp;quot;y&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        out_four = &amp;quot;;1m&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; else if underline == &amp;quot;y&amp;quot; &amp;amp;&amp;amp; highshow != &amp;quot;y&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        out_four = &amp;quot;;4m&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        out_four = &amp;quot;;22m&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    switch status &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    case &amp;quot;black&amp;quot;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        out_two = &amp;quot;30&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    case &amp;quot;red&amp;quot;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        out_two = &amp;quot;31&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    case &amp;quot;green&amp;quot;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        out_two = &amp;quot;32&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    case &amp;quot;yellow&amp;quot;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        out_two = &amp;quot;33&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    case &amp;quot;blue&amp;quot;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        out_two = &amp;quot;34&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    case &amp;quot;purple&amp;quot;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        out_two = &amp;quot;35&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    case &amp;quot;dgreen&amp;quot;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        out_two = &amp;quot;36&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    case &amp;quot;white&amp;quot;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        out_two = &amp;quot;37&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    default:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        out_two = &amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    switch background &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    case &amp;quot;black&amp;quot;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        out_three = &amp;quot;40;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    case &amp;quot;red&amp;quot;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        out_three = &amp;quot;41;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    case &amp;quot;green&amp;quot;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        out_three = &amp;quot;42;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    case &amp;quot;yellow&amp;quot;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        out_three = &amp;quot;43;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    case &amp;quot;blue&amp;quot;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        out_three = &amp;quot;44;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    case &amp;quot;purple&amp;quot;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        out_three = &amp;quot;45;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    case &amp;quot;dgreen&amp;quot;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        out_three = &amp;quot;46;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    case &amp;quot;white&amp;quot;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        out_three = &amp;quot;47;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    default:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        out_three = &amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return out_one + out_three + out_two + out_four + text + &amp;quot;\033[0m&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func perSecond_Int(before int, after int, time string) (string, bool) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var result interface&amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var ok bool&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var rs string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //转换时间为int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    seconds, err := strconv.Atoi(time)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    checkErr(err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    result = (after - before) / seconds&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // fmt.Println(result.(int))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // tmp = fmt.Sprintf(&amp;quot;%s&amp;quot;, reflect.TypeOf(result))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    switch result.(type) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    case int:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // fmt.Println(&amp;quot;int&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        rs = strconv.Itoa(result.(int))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    case int64:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fmt.Println(&amp;quot;int64&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        rs = strconv.FormatInt(result.(int64), 64)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    case float64:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fmt.Println(&amp;quot;float64&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        rs = strconv.FormatFloat(result.(float64), &amp;apos;E&amp;apos;, 5, 64)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    default:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        panic(&amp;quot;not fount number type in perSecond&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if result.(int) &amp;gt; 0 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ok = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ok = false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return rs, ok&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func floatToString(x float64, f int) string &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    rs := strconv.FormatFloat(x, &amp;apos;f&amp;apos;, f, 64)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return rs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func perSecond_Float(before float64, after float64, time string) (string, bool) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var result interface&amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var ok bool&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var rs string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //转换时间为float64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    seconds, err := strconv.ParseFloat(time, 64)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    checkErr(err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    result = (after - before) / seconds&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // tmp = fmt.Sprintf(&amp;quot;%s&amp;quot;, reflect.TypeOf(result))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    switch result.(type) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    case int:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // fmt.Println(&amp;quot;int&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        rs = strconv.Itoa(result.(int))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    case int64:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fmt.Println(&amp;quot;int64&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        rs = strconv.FormatInt(result.(int64), 64)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // case float32:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //     fmt.Println(&amp;quot;float32&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //     rs = strconv.FormatFloat(result.(float32), &amp;apos;f&amp;apos;, 4, 32)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    case float64:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fmt.Println(&amp;quot;float64&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        rs = strconv.FormatFloat(result.(float64), &amp;apos;f&amp;apos;, 4, 64)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    default:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        panic(&amp;quot;not fount number type in perSecond_Float&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if result.(int) &amp;gt; 0 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ok = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ok = false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return rs, ok&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func getNowTime() string &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    f := fmt.Sprintf(&amp;quot;%s&amp;quot;, time.Now().Format(&amp;quot;2006-01-02 15:04:05&amp;quot;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    timeformatdate, _ := time.Parse(&amp;quot;2006-01-02 15:04:05&amp;quot;, f)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    convtime := fmt.Sprintf(&amp;quot;%s&amp;quot;, timeformatdate.Format(&amp;quot;15:04:05&amp;quot;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return convtime&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//参数解析 输入参数字典 结果集字典 运行次数字典&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func gotNumber(flag_info map[string]interface&amp;#123;&amp;#125;, cmd_result basic, cmd_second basic, count int) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var title_summit string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var title_detail string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var data_detail string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //必打时间time信息&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if flag_info[&amp;quot;time&amp;quot;] == true &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        title_summit = Colorize(strings.Repeat(&amp;quot;-&amp;quot;, 8), &amp;quot;dgreen&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;y&amp;quot;) + &amp;quot; &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        title_detail = Colorize(&amp;quot;  time  |&amp;quot;, &amp;quot;dgreen&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;y&amp;quot;, &amp;quot;y&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        data_detail = Colorize(getNowTime(), &amp;quot;yellow&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;) + Colorize(&amp;quot;|&amp;quot;, &amp;quot;dgreen&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;y&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //loadavg 信息&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if flag_info[&amp;quot;load&amp;quot;] == true &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        title_summit += Colorize(&amp;quot;-----load-avg---- &amp;quot;, &amp;quot;dgreen&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;y&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        title_detail += Colorize(&amp;quot;  1m    5m   15m |&amp;quot;, &amp;quot;dgreen&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;y&amp;quot;, &amp;quot;y&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        //load 1 min&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if cmd_result.load_1 &amp;gt; cmd_result.cpu_core &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if cmd_result.load_1 &amp;gt;= 10.0 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                data_detail += Colorize(floatToString(cmd_result.load_1, 2), &amp;quot;red&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                data_detail += Colorize(floatToString(cmd_result.load_1, 2), &amp;quot;red&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            data_detail += &amp;quot; &amp;quot; + Colorize(floatToString(cmd_result.load_1, 2), &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if cmd_result.load_5 &amp;gt; cmd_result.cpu_core &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if cmd_result.load_1 &amp;gt;= 10.0 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                data_detail += Colorize(floatToString(cmd_result.load_5, 2), &amp;quot;red&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                data_detail += Colorize(floatToString(cmd_result.load_5, 2), &amp;quot;red&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            data_detail += &amp;quot;  &amp;quot; + Colorize(floatToString(cmd_result.load_5, 2), &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if cmd_result.load_15 &amp;gt; cmd_result.cpu_core &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if cmd_result.load_1 &amp;gt;= 10.0 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                data_detail += Colorize(floatToString(cmd_result.load_15, 2), &amp;quot;red&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;) + Colorize(&amp;quot;|&amp;quot;, &amp;quot;dgreen&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;y&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                data_detail += Colorize(floatToString(cmd_result.load_15, 2), &amp;quot;red&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;) + Colorize(&amp;quot;|&amp;quot;, &amp;quot;dgreen&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;y&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            data_detail += &amp;quot;  &amp;quot; + Colorize(floatToString(cmd_result.load_15, 2), &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;) + Colorize(&amp;quot;|&amp;quot;, &amp;quot;dgreen&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;y&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if flag_info[&amp;quot;swap&amp;quot;] == true &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        title_summit += Colorize(&amp;quot;---swap--- &amp;quot;, &amp;quot;dgreen&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;y&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        title_detail += Colorize(&amp;quot;   si   so|&amp;quot;, &amp;quot;dgreen&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;y&amp;quot;, &amp;quot;y&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if flag_info[&amp;quot;interval&amp;quot;] == &amp;quot;1&amp;quot; &amp;amp;&amp;amp; count == 0 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            data_detail += &amp;quot;    0    0&amp;quot; + Colorize(&amp;quot;|&amp;quot;, &amp;quot;dgreen&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;y&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; else if flag_info[&amp;quot;interval&amp;quot;] == &amp;quot;1&amp;quot; &amp;amp;&amp;amp; count &amp;gt; 0 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            si := cmd_second.swap_in - cmd_result.swap_in&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            so := cmd_second.swap_out - cmd_result.swap_out&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            si_string := strconv.Itoa(si)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            so_string := strconv.Itoa(so)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            in := strings.Repeat(&amp;quot; &amp;quot;, 5-len(si_string)) + si_string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            out := strings.Repeat(&amp;quot; &amp;quot;, 5-len(so_string)) + so_string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if si &amp;gt; 0 &amp;amp;&amp;amp; so &amp;gt; 0 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                data_detail += Colorize(in, &amp;quot;red&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;y&amp;quot;) + Colorize(out, &amp;quot;red&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;y&amp;quot;) + Colorize(&amp;quot;|&amp;quot;, &amp;quot;dgreen&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;y&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125; else if si == 0 &amp;amp;&amp;amp; so &amp;gt; 0 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                data_detail += Colorize(in, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;) + Colorize(out, &amp;quot;red&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;y&amp;quot;) + Colorize(&amp;quot;|&amp;quot;, &amp;quot;dgreen&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;y&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125; else if si &amp;gt; 0 &amp;amp;&amp;amp; so == 0 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                data_detail += Colorize(in, &amp;quot;red&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;y&amp;quot;) + Colorize(out, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;) + Colorize(&amp;quot;|&amp;quot;, &amp;quot;dgreen&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;y&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                data_detail += Colorize(in, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;) + Colorize(out, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;) + Colorize(&amp;quot;|&amp;quot;, &amp;quot;dgreen&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, &amp;quot;y&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if count == 0 || count%20 == 0 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fmt.Println(title_summit)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fmt.Println(title_detail)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fmt.Println(data_detail)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// func main() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//     for i := 0; i &amp;lt; 50; i++ &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//         time.Sleep(100 * time.Millisecond)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//         h := strings.Repeat(&amp;quot;=&amp;quot;, i) + strings.Repeat(&amp;quot; &amp;quot;, 49-i)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//         h = Colorize(h, &amp;quot;warn&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//         fmt.Printf(&amp;quot;\r%.0f%%[%s]&amp;quot;, float64(i)/49*100, h)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//         os.Stdout.Sync()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//     fmt.Println(&amp;quot;\nAll System Go!&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func main() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    info := GetValue()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ss := basic&amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    second := basic&amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //计算CPU核数&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cpu_core_cmd := &amp;quot;grep processor /proc/cpuinfo | wc -l&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cpu_string := execCommand(cpu_core_cmd)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cpu_string = strings.Replace(cpu_string, &amp;quot;\n&amp;quot;, &amp;quot;&amp;quot;, -1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ss.cpu_core, _ = strconv.ParseFloat(cpu_string, 64)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if info[&amp;quot;mysql&amp;quot;] == true &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        info[&amp;quot;time&amp;quot;] = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        info[&amp;quot;com&amp;quot;] = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        info[&amp;quot;hit&amp;quot;] = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        info[&amp;quot;threads&amp;quot;] = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        info[&amp;quot;bytes&amp;quot;] = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if info[&amp;quot;innodb&amp;quot;] == true &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        info[&amp;quot;time&amp;quot;] = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        info[&amp;quot;innodb_pages&amp;quot;] = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        info[&amp;quot;innodb_data&amp;quot;] = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        info[&amp;quot;innodb_log&amp;quot;] = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        info[&amp;quot;innodb_status&amp;quot;] = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if info[&amp;quot;sys&amp;quot;] == true &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        info[&amp;quot;time&amp;quot;] = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        info[&amp;quot;load&amp;quot;] = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        info[&amp;quot;cpu&amp;quot;] = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        info[&amp;quot;swap&amp;quot;] = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if info[&amp;quot;lazy&amp;quot;] == true &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        info[&amp;quot;time&amp;quot;] = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        info[&amp;quot;load&amp;quot;] = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        info[&amp;quot;cpu&amp;quot;] = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        info[&amp;quot;swap&amp;quot;] = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        info[&amp;quot;com&amp;quot;] = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        info[&amp;quot;hit&amp;quot;] = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if info[&amp;quot;count&amp;quot;] == 0 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        i := 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        for &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            second = createCommand(info, ss)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            gotNumber(info, ss, second, i)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ss = second&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            time.Sleep(time.Second)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            i++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        for i := 0; i &amp;lt;= info[&amp;quot;count&amp;quot;].(int); i++ &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            second = createCommand(info, ss)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            gotNumber(info, ss, second, i)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ss = second&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            time.Sleep(time.Second)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // for i := 1; i &amp;lt; 100; i++ &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //     cmds := createCommand(info)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //     fmt.Println(gotNumber(info, cmds))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //     time.Sleep(time.Second)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // for i := 1; i &amp;lt; 100; i++ &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //     if info[&amp;quot;rt&amp;quot;] == true &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //         cmds := createCommand(info)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //         fmt.Println(cmds)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //     &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //         cmds := createCommand(info)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //         fmt.Println(cmds)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //         time.Sleep(time.Second)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // mysql := flag.Bool(&amp;quot;mysql&amp;quot;, false, &amp;quot;Print MySQLInfo (include -t,-com,-hit,-T,-B).&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // innodb := flag.Bool(&amp;quot;innodb&amp;quot;, false, &amp;quot;Print InnodbInfo(include -t,-innodb_pages,-innodb_data,-innodb_log,-innodb_status)&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // sys := flag.Bool(&amp;quot;sys&amp;quot;, false, &amp;quot;Print SysInfo   (include -t,-l,-c,-s).&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // lazy := flag.Bool(&amp;quot;lazy&amp;quot;, false, &amp;quot;Print Info      (include -t,-l,-c,-s,-com,-hit).&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //这个直接string打印&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //其余的用算法打印出来 本就是小数点&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // ss := execCommand(&amp;quot;echo &amp;apos;scale=2;4/5&amp;apos;|bc&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // f, _ := ss.(float64)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // fmt.Println(f)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // if info[&amp;quot;disk&amp;quot;] != &amp;quot;none&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //     fmt.Println(info)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //     fmt.Println(info[&amp;quot;disk&amp;quot;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //     fmt.Println(info)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //     fmt.Println(info[&amp;quot;disk&amp;quot;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//基础:load+cpu+swap&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//cat /proc/loadavg /proc/stat /proc/vmstat /proc/net/dev /proc/diskstats |grep -E &amp;apos;/|cpu|pswpin|pswpout&amp;apos;|sed &amp;apos;s/\// china /g&amp;apos;|grep -E -w &amp;apos;china|cpu|pswpin|pswpout&amp;apos;|xargs echo|awk &amp;apos;&amp;#123;print $1,$2,$3,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$20/240,$22/240&amp;#125;&amp;apos;|sed &amp;apos;s/[[:space:]]/,/g&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//0.22,0.27,0.31,1673683,41,2065716,343819349,6613289,63,105102,0,0,0,0,0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//基础+网络&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//cat /proc/loadavg /proc/stat /proc/vmstat /proc/net/dev /proc/diskstats |grep -E &amp;apos;/|cpu|pswpin|pswpout|eth0&amp;apos;|sed &amp;apos;s/\// china /g&amp;apos;|grep -E -w &amp;apos;china|cpu|pswpin|pswpout|eth0&amp;apos;|xargs echo|awk &amp;apos;&amp;#123;print $1,$2,$3,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$20/240,$22/240,$24,$32&amp;#125;&amp;apos;|sed &amp;apos;s/[[:space:]]/,/g&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//基础+磁盘&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//cat /proc/loadavg /proc/stat /proc/vmstat /proc/net/dev /proc/diskstats |grep -E &amp;apos;/|cpu|pswpin|pswpout|sda&amp;apos;|sed &amp;apos;s/\// china /g&amp;apos;|grep -E -w &amp;apos;china|cpu|pswpin|pswpout|sda&amp;apos;|xargs echo|awk &amp;apos;&amp;#123;print $1,$2,$3,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$20/240,$22/240,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36&amp;#125;&amp;apos;|sed &amp;apos;s/[[:space:]]/,/g&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//全数据：基础+网络+磁盘&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// cat /proc/loadavg /proc/stat /proc/vmstat /proc/net/dev /proc/diskstats |grep -E &amp;apos;/|cpu|pswpin|pswpout|eth0|sda&amp;apos;|sed &amp;apos;s/\// china /g&amp;apos;|grep -E -w &amp;apos;china|cpu|pswpin|pswpout|sda|eth0&amp;apos;|xargs echo|awk &amp;apos;&amp;#123;print $1,$2,$3,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$20/240,$22/240,$24,$32,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53&amp;#125;&amp;apos;|sed &amp;apos;s/[[:space:]]/,/g&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Golang重构Orzdba数据库分析工具&quot;&gt;&lt;a href=&quot;#Golang重构Orzdba数据库分析工具&quot; class=&quot;headerlink&quot; title=&quot;Golang重构Orzdba数据库分析工具&quot;&gt;&lt;/a&gt;Golang重构Orzdba数据库分析工具&lt;/h1&gt;&lt;h2 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h2&gt;&lt;p&gt;之前当运维DBA，处于学习的目的用Golang重构了淘宝Dba开源的Orzdba,学习golang的同时了解数据库和Linux系统相关的知识，现分享出来大家学习&lt;/p&gt;
&lt;h2 id=&quot;代码&quot;&gt;&lt;a href=&quot;#代码&quot; class=&quot;headerlink&quot; title=&quot;代码&quot;&gt;&lt;/a&gt;代码&lt;/h2&gt;
    
    </summary>
    
      <category term="golang" scheme="http://www.lflxp.cn/categories/golang/"/>
    
    
      <category term="golang" scheme="http://www.lflxp.cn/tags/golang/"/>
    
  </entry>
  
  <entry>
    <title>gin框架之数据库查询操作封装</title>
    <link href="http://www.lflxp.cn/2016/04/09/2016-04-09-gin%E6%A1%86%E6%9E%B6%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5/"/>
    <id>http://www.lflxp.cn/2016/04/09/2016-04-09-gin框架之数据库增删改查/</id>
    <published>2016-04-09T09:30:41.293Z</published>
    <updated>2016-04-09T10:47:40.887Z</updated>
    
    <content type="html">&lt;h1 id=&quot;数据库查询封装&quot;&gt;&lt;a href=&quot;#数据库查询封装&quot; class=&quot;headerlink&quot; title=&quot;数据库查询封装&quot;&gt;&lt;/a&gt;数据库查询封装&lt;/h1&gt;&lt;h2 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h2&gt;&lt;p&gt;之所以自己写数据库操作封装是因为golang对数据库的操作太复杂，对于用惯了python的包的人来说伤不起，就自己写了一个&lt;/p&gt;
&lt;h2 id=&quot;代码&quot;&gt;&lt;a href=&quot;#代码&quot; class=&quot;headerlink&quot; title=&quot;代码&quot;&gt;&lt;/a&gt;代码&lt;/h2&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;135&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;136&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;137&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;138&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;139&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;140&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;141&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;142&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;143&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;144&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;145&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;146&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;147&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;148&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;149&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;150&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;151&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;152&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;153&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;154&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;155&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;156&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;157&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;158&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;159&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;160&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;161&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;162&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;163&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;164&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;165&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;166&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;167&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;168&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;169&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;170&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;171&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;172&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;173&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;174&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;175&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;176&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;177&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;178&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;179&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;180&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;181&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;182&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;183&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;184&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;185&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;186&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;187&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;188&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;189&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;190&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;191&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;193&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;194&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;195&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;196&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;197&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;198&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;199&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;200&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;201&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;202&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;203&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;204&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;205&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;206&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;207&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;208&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;209&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;210&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;211&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;212&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;213&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;214&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;215&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;216&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;217&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;218&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;219&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;220&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;221&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;222&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;223&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;224&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;225&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;226&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;227&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;228&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;229&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;230&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;231&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;232&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;233&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;234&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;235&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;236&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;237&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;238&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;239&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;240&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;241&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;242&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;243&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;244&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;245&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;246&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;247&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;248&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;249&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;250&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;package models&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;database/sql&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;errors&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    . &amp;quot;gin_monitor/config&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;strings&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;quot;fmt&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    _ &amp;quot;github.com/go-sql-driver/mysql&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//数据库连接DSN&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;const (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    DbType = &amp;quot;mysql&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // DefaultConn = &amp;quot;root:system@tcp(172.16.4.51:3306)/monitor?charset=utf8&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//mysql动态连接池&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var db *sql.DB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var DefaultConn string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//连接数据库基本数据字典&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Info struct &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    username string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    password string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    host     string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port     string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    dbname   string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    charset  string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func CheckErr(err error) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        panic(err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func init() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //获取配置文件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    info := Info&amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    info.username = GetConfig(&amp;quot;mysql&amp;quot;, &amp;quot;username&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    info.password = GetConfig(&amp;quot;mysql&amp;quot;, &amp;quot;password&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    info.host = GetConfig(&amp;quot;mysql&amp;quot;, &amp;quot;host&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    info.port = GetConfig(&amp;quot;mysql&amp;quot;, &amp;quot;port&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    info.dbname = GetConfig(&amp;quot;mysql&amp;quot;, &amp;quot;dbname&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    info.charset = GetConfig(&amp;quot;mysql&amp;quot;, &amp;quot;charset&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //组装MYSQL连接DSN连接&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    DefaultConn = info.username + &amp;quot;:&amp;quot; + info.password + &amp;quot;@tcp(&amp;quot; + info.host + &amp;quot;:&amp;quot; + info.port + &amp;quot;)/&amp;quot; + info.dbname + &amp;quot;?charset=&amp;quot; + info.charset&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;quot;初始化数据库连接池&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    db, _ = sql.Open(DbType, DefaultConn)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    db.SetMaxOpenConns(2000)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    db.SetMaxIdleConns(1000)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    db.Ping()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//定义一个接口，只要实现了这个接口的方法就可以调用这个接口&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Db interface &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //http://127.0.0.1/mysql/query?sql=select host,type,table_schema,table_name,table_rows,table_size_m,index_size_m,sysdates from monitorss order by index_size_m desc limit 100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Query() (map[int]map[string]string, error)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //http://172.16.4.51/mysql/update?table=tttt&amp;amp;set=name:lxp&amp;amp;where=id:1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Update() error&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // http://127.0.0.1/mysql/insert?table=ttt&amp;amp;data=name:lixueping,id:1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Insert() error&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // http://127.0.0.1/mysql/delete?table=ttt&amp;amp;where=id:1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Delete() error&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//定义mysql结构，条件全部满足后就可以实现接口方法&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Mysql struct &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Sql string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //table-&amp;gt;map[string]string  data-&amp;gt;map[string]map[string]string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Data map[string]interface&amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Oracle struct &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Username, Password, Host, Port, Db, Sql string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Mongodb struct &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Username, Password, Host, Port, Db, Sql string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//实现mysql的db接口&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//&amp;quot;root:system@tcp(172.16.4.51:3306)/monitor?charset=utf8&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func (m Mysql) Query() (map[int]map[string]string, error) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //通过数据库连接池db&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    rows, err := db.Query(m.Sql)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return nil, errors.New(&amp;quot;\n查询&amp;quot; + m.Sql + &amp;quot;失败,原因:\n&amp;quot; + err.Error())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    defer rows.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //字典类型&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //构造scanArgs、values两个数组，scanArgs的每个值指向values相应值的地址&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    columns, _ := rows.Columns()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    scanArgs := make([]interface&amp;#123;&amp;#125;, len(columns))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    values := make([]sql.RawBytes, len(columns))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for i := range values &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        scanArgs[i] = &amp;amp;values[i]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //最后得到的map&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    results := make(map[int]map[string]string)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    i := 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for rows.Next() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        //将行数据保存到record字典&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        err = rows.Scan(scanArgs...)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return nil, errors.New(&amp;quot;结果组装失败,原因:\n&amp;quot; + err.Error())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        row := make(map[string]string)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        for k, v := range values &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            key := columns[k]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            row[key] = string(v)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        results[i] = row&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        i++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return results, nil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func (m Mysql) Insert() error &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //m.Data由table和data构成&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //初始化一个结果集&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    args := make([]interface&amp;#123;&amp;#125;, len(m.Data[&amp;quot;data&amp;quot;].(map[string]string)))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    hosts := &amp;quot;(&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //统计次数&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    count := 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //组装结果集和sql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for k, v := range m.Data[&amp;quot;data&amp;quot;].(map[string]string) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        args[count] = v&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        count++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if count != len(m.Data[&amp;quot;data&amp;quot;].(map[string]string)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            hosts += k + &amp;quot;,&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            hosts += k + &amp;quot;)&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sqlScript := &amp;quot;INSERT INTO &amp;quot; + m.Data[&amp;quot;table&amp;quot;].(string) + &amp;quot; &amp;quot; + hosts + &amp;quot; VALUES (?&amp;quot; + strings.Repeat(&amp;quot;,?&amp;quot;, len(m.Data[&amp;quot;data&amp;quot;].(map[string]string))-1) + &amp;quot;)&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // println(sqlScript)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        println(sqlScript, args)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _, err := db.Query(sqlScript, args...)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        由于自带的insert比如写死参数，无法动态调配，所以换成组装SQL的形式，以下代码留着学习&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    stmt, err := db.Prepare(sqlScript)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    defer stmt.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return errors.New(sqlScript + &amp;quot; 字段不存在或者数据不正确！&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    _, err = stmt.Exec(args...)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CheckErr(err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return err&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func (m Mysql) Update() error &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //m.Data由table、set和where构成&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //初始化一个结果集&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    args := make([]interface&amp;#123;&amp;#125;, len(m.Data[&amp;quot;set&amp;quot;].(map[string]string))+len(m.Data[&amp;quot;where&amp;quot;].(map[string]string)))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //统计次数&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    count := 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    c_where := 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //组装结果集set和where&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    set := &amp;quot; SET &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    where := &amp;quot; WHERE &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for k, v := range m.Data[&amp;quot;set&amp;quot;].(map[string]string) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        args[count] = v&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        count++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if count != len(m.Data[&amp;quot;set&amp;quot;].(map[string]string)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            set += k + &amp;quot;=?, &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            set += k + &amp;quot;=? &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for kk, vv := range m.Data[&amp;quot;where&amp;quot;].(map[string]string) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        args[count] = vv&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        count++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        c_where++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if len(m.Data[&amp;quot;where&amp;quot;].(map[string]string)) == 1 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            where += kk + &amp;quot;=?&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; else if c_where != len(m.Data[&amp;quot;where&amp;quot;].(map[string]string)) &amp;amp;&amp;amp; len(m.Data[&amp;quot;where&amp;quot;].(map[string]string)) != 1 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            where += kk + &amp;quot;=? and &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; else if c_where == len(m.Data[&amp;quot;where&amp;quot;].(map[string]string)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            where += kk + &amp;quot;=? &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sqlScript := &amp;quot;UPDATE &amp;quot; + m.Data[&amp;quot;table&amp;quot;].(string) + set + where&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // println(sqlScript)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        println(sqlScript, args)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _, err := db.Query(sqlScript, args...)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        由于自带的insert比如写死参数，无法动态调配，所以换成组装SQL的形式，以下代码留着学习&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    stmt, err := db.Prepare(sqlScript)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    defer stmt.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return errors.New(sqlScript + &amp;quot; 字段不存在或者数据不正确！&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    _, err = stmt.Exec(args...)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CheckErr(err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return err&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func (m Mysql) Delete() error &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //m.Data由table和where构成&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //初始化一个结果集&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    args := make([]interface&amp;#123;&amp;#125;, len(m.Data[&amp;quot;where&amp;quot;].(map[string]string)))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //统计次数&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    count := 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //组装结果集set和where&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    where := &amp;quot; WHERE &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for kk, vv := range m.Data[&amp;quot;where&amp;quot;].(map[string]string) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        args[count] = vv&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        count++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if len(m.Data[&amp;quot;where&amp;quot;].(map[string]string)) == 1 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            where += kk + &amp;quot;=?&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; else if count != len(m.Data[&amp;quot;where&amp;quot;].(map[string]string)) &amp;amp;&amp;amp; len(m.Data[&amp;quot;where&amp;quot;].(map[string]string)) != 1 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            where += kk + &amp;quot;=? and &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; else if count == len(m.Data[&amp;quot;where&amp;quot;].(map[string]string)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            where += kk + &amp;quot;=? &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sqlScript := &amp;quot;DELETE FROM &amp;quot; + m.Data[&amp;quot;table&amp;quot;].(string) + where&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // println(sqlScript)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        println(sqlScript, args)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _, err := db.Query(sqlScript, args...)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        由于自带的insert比如写死参数，无法动态调配，所以换成组装SQL的形式，以下代码留着学习&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    stmt, err := db.Prepare(sqlScript)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    defer stmt.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return errors.New(sqlScript + &amp;quot; 字段不存在或者数据不正确！&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    _, err = stmt.Exec(args...)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CheckErr(err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return err&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;数据库查询封装&quot;&gt;&lt;a href=&quot;#数据库查询封装&quot; class=&quot;headerlink&quot; title=&quot;数据库查询封装&quot;&gt;&lt;/a&gt;数据库查询封装&lt;/h1&gt;&lt;h2 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h2&gt;&lt;p&gt;之所以自己写数据库操作封装是因为golang对数据库的操作太复杂，对于用惯了python的包的人来说伤不起，就自己写了一个&lt;/p&gt;
&lt;h2 id=&quot;代码&quot;&gt;&lt;a href=&quot;#代码&quot; class=&quot;headerlink&quot; title=&quot;代码&quot;&gt;&lt;/a&gt;代码&lt;/h2&gt;
    
    </summary>
    
      <category term="golang-gin" scheme="http://www.lflxp.cn/categories/golang-gin/"/>
    
    
      <category term="golang" scheme="http://www.lflxp.cn/tags/golang/"/>
    
  </entry>
  
  <entry>
    <title>gin框架之cache缓存</title>
    <link href="http://www.lflxp.cn/2016/04/09/2016-04-09-gin%E6%A1%86%E6%9E%B6%E4%B9%8Bcache%E7%BC%93%E5%AD%98/"/>
    <id>http://www.lflxp.cn/2016/04/09/2016-04-09-gin框架之cache缓存/</id>
    <published>2016-04-09T09:25:36.455Z</published>
    <updated>2016-04-09T10:47:49.789Z</updated>
    
    <content type="html">&lt;h1 id=&quot;gin框架之cache缓存&quot;&gt;&lt;a href=&quot;#gin框架之cache缓存&quot; class=&quot;headerlink&quot; title=&quot;gin框架之cache缓存&quot;&gt;&lt;/a&gt;gin框架之cache缓存&lt;/h1&gt;&lt;h2 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h2&gt;&lt;p&gt;通过Golang自带的同步锁自己实现一个缓存数据库，利用map大字典和同步锁机制。&lt;/p&gt;
&lt;h2 id=&quot;代码&quot;&gt;&lt;a href=&quot;#代码&quot; class=&quot;headerlink&quot; title=&quot;代码&quot;&gt;&lt;/a&gt;代码&lt;/h2&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;package cache&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;quot;fmt&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;sync&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;time&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//过期时间 10小时&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;const Time int64 = 1 //3600 * 10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//动态缓存数据库&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var Caches *CacheManager&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type CacheManager struct &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    lock   *sync.RWMutex&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    caches map[string]*Cache&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Cache struct &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Value interface&amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Times int64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func init() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Caches = NewCacheManager(300)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func NewCacheManager(size int) *CacheManager &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return &amp;amp;CacheManager&amp;#123;new(sync.RWMutex), make(map[string]*Cache, size)&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func (this *CacheManager) Set(key string, v interface&amp;#123;&amp;#125;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    this.lock.Lock()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    x := Cache&amp;#123;Value: v, Times: Time&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    this.caches[key] = &amp;amp;x&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    this.lock.Unlock()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func (this *CacheManager) Get(key string) *Cache &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    this.lock.RLock()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    v := this.caches[key]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    this.lock.RUnlock()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return v&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func (this *CacheManager) Delete(key string) *Cache &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    this.lock.Lock()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    v := this.caches[key]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    delete(this.caches, key)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    this.lock.Unlock()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return v&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func (this *CacheManager) IsExist(key string) bool &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if xy := this.Get(key); xy != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func (this *CacheManager) IsExpired(key string, ttl int) bool &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       cannot convert nil to type Cache&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       解决方法：传递指针和指针地址直接使用值进行判断和封装&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if xy := this.Get(key); xy != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return (time.Now().Unix() - xy.Times) &amp;gt;= int64(ttl)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// func main() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//  // cache := NewCacheManager(300)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//  cache.Set(&amp;quot;one&amp;quot;, 1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//  cache.Set(&amp;quot;two&amp;quot;, 2)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//  cache.Set(&amp;quot;three&amp;quot;, 3)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//  time.Sleep(time.Second * 3)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//  fmt.Println(cache.Get(&amp;quot;two&amp;quot;).Value.(int))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//  fmt.Println(&amp;quot;three 过期了吗:&amp;quot;, cache.IsExpired(&amp;quot;one&amp;quot;, 1))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;gin框架之cache缓存&quot;&gt;&lt;a href=&quot;#gin框架之cache缓存&quot; class=&quot;headerlink&quot; title=&quot;gin框架之cache缓存&quot;&gt;&lt;/a&gt;gin框架之cache缓存&lt;/h1&gt;&lt;h2 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h2&gt;&lt;p&gt;通过Golang自带的同步锁自己实现一个缓存数据库，利用map大字典和同步锁机制。&lt;/p&gt;
&lt;h2 id=&quot;代码&quot;&gt;&lt;a href=&quot;#代码&quot; class=&quot;headerlink&quot; title=&quot;代码&quot;&gt;&lt;/a&gt;代码&lt;/h2&gt;
    
    </summary>
    
      <category term="golang-gin" scheme="http://www.lflxp.cn/categories/golang-gin/"/>
    
    
      <category term="golang" scheme="http://www.lflxp.cn/tags/golang/"/>
    
  </entry>
  
  <entry>
    <title>gin框架之mysql动态连接池</title>
    <link href="http://www.lflxp.cn/2016/04/09/2016-04-09-gin%E6%A1%86%E6%9E%B6%E4%B9%8Bmysql%E5%8A%A8%E6%80%81%E8%BF%9E%E6%8E%A5%E6%B1%A0/"/>
    <id>http://www.lflxp.cn/2016/04/09/2016-04-09-gin框架之mysql动态连接池/</id>
    <published>2016-04-09T09:23:48.450Z</published>
    <updated>2016-04-09T10:47:54.643Z</updated>
    
    <content type="html">&lt;h1 id=&quot;自己实现mysql数据库动态连接池&quot;&gt;&lt;a href=&quot;#自己实现mysql数据库动态连接池&quot; class=&quot;headerlink&quot; title=&quot;自己实现mysql数据库动态连接池&quot;&gt;&lt;/a&gt;自己实现mysql数据库动态连接池&lt;/h1&gt;&lt;h2 id=&quot;关键点&quot;&gt;&lt;a href=&quot;#关键点&quot; class=&quot;headerlink&quot; title=&quot;关键点&quot;&gt;&lt;/a&gt;关键点&lt;/h2&gt;&lt;p&gt;通过一个全局变量var db *sql.DB实现动态连接池的作用&lt;/p&gt;
&lt;h2 id=&quot;代码&quot;&gt;&lt;a href=&quot;#代码&quot; class=&quot;headerlink&quot; title=&quot;代码&quot;&gt;&lt;/a&gt;代码&lt;/h2&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;135&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;136&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;137&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;138&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;139&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;140&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;141&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;142&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;143&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;144&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;145&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;146&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;147&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;148&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;149&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;150&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;151&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;152&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;153&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;154&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;155&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;156&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;157&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;158&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;159&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;160&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;161&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;162&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;163&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;164&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;165&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;166&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;167&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;168&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;169&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;170&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;171&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;172&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;173&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;174&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;175&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;176&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;177&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;178&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;179&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;180&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;181&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;182&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;183&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;184&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;185&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;186&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;187&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;188&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;189&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;190&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;191&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;193&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;194&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;195&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;196&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;197&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;198&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;199&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;200&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;201&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;202&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;203&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;204&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;205&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;206&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;207&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;208&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;209&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;210&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;211&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;212&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;213&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;214&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;215&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;216&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;217&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;218&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;219&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;220&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;221&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;222&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;223&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;224&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;225&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;226&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;227&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;228&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;229&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;230&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;231&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;232&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;233&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;234&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;235&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;236&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;237&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;238&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;239&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;240&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;241&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;242&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;243&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;244&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;245&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;246&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;247&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;248&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;249&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;250&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;package models&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;database/sql&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;errors&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    . &amp;quot;gin_monitor/config&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;strings&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;quot;fmt&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    _ &amp;quot;github.com/go-sql-driver/mysql&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//数据库连接DSN&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;const (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    DbType = &amp;quot;mysql&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // DefaultConn = &amp;quot;root:system@tcp(172.16.4.51:3306)/monitor?charset=utf8&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//mysql动态连接池&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var db *sql.DB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var DefaultConn string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//连接数据库基本数据字典&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Info struct &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    username string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    password string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    host     string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    port     string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    dbname   string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    charset  string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func CheckErr(err error) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        panic(err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func init() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //获取配置文件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    info := Info&amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    info.username = GetConfig(&amp;quot;mysql&amp;quot;, &amp;quot;username&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    info.password = GetConfig(&amp;quot;mysql&amp;quot;, &amp;quot;password&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    info.host = GetConfig(&amp;quot;mysql&amp;quot;, &amp;quot;host&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    info.port = GetConfig(&amp;quot;mysql&amp;quot;, &amp;quot;port&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    info.dbname = GetConfig(&amp;quot;mysql&amp;quot;, &amp;quot;dbname&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    info.charset = GetConfig(&amp;quot;mysql&amp;quot;, &amp;quot;charset&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //组装MYSQL连接DSN连接&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    DefaultConn = info.username + &amp;quot;:&amp;quot; + info.password + &amp;quot;@tcp(&amp;quot; + info.host + &amp;quot;:&amp;quot; + info.port + &amp;quot;)/&amp;quot; + info.dbname + &amp;quot;?charset=&amp;quot; + info.charset&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;quot;初始化数据库连接池&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    db, _ = sql.Open(DbType, DefaultConn)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    db.SetMaxOpenConns(2000)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    db.SetMaxIdleConns(1000)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    db.Ping()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//定义一个接口，只要实现了这个接口的方法就可以调用这个接口&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Db interface &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //http://127.0.0.1/mysql/query?sql=select host,type,table_schema,table_name,table_rows,table_size_m,index_size_m,sysdates from monitorss order by index_size_m desc limit 100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Query() (map[int]map[string]string, error)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //http://172.16.4.51/mysql/update?table=tttt&amp;amp;set=name:lxp&amp;amp;where=id:1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Update() error&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // http://127.0.0.1/mysql/insert?table=ttt&amp;amp;data=name:lixueping,id:1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Insert() error&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // http://127.0.0.1/mysql/delete?table=ttt&amp;amp;where=id:1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Delete() error&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//定义mysql结构，条件全部满足后就可以实现接口方法&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Mysql struct &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Sql string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //table-&amp;gt;map[string]string  data-&amp;gt;map[string]map[string]string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Data map[string]interface&amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Oracle struct &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Username, Password, Host, Port, Db, Sql string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;type Mongodb struct &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Username, Password, Host, Port, Db, Sql string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//实现mysql的db接口&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//&amp;quot;root:system@tcp(172.16.4.51:3306)/monitor?charset=utf8&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func (m Mysql) Query() (map[int]map[string]string, error) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //通过数据库连接池db&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    rows, err := db.Query(m.Sql)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return nil, errors.New(&amp;quot;\n查询&amp;quot; + m.Sql + &amp;quot;失败,原因:\n&amp;quot; + err.Error())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    defer rows.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //字典类型&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //构造scanArgs、values两个数组，scanArgs的每个值指向values相应值的地址&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    columns, _ := rows.Columns()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    scanArgs := make([]interface&amp;#123;&amp;#125;, len(columns))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    values := make([]sql.RawBytes, len(columns))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for i := range values &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        scanArgs[i] = &amp;amp;values[i]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //最后得到的map&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    results := make(map[int]map[string]string)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    i := 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for rows.Next() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        //将行数据保存到record字典&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        err = rows.Scan(scanArgs...)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return nil, errors.New(&amp;quot;结果组装失败,原因:\n&amp;quot; + err.Error())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        row := make(map[string]string)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        for k, v := range values &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            key := columns[k]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            row[key] = string(v)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        results[i] = row&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        i++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return results, nil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func (m Mysql) Insert() error &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //m.Data由table和data构成&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //初始化一个结果集&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    args := make([]interface&amp;#123;&amp;#125;, len(m.Data[&amp;quot;data&amp;quot;].(map[string]string)))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    hosts := &amp;quot;(&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //统计次数&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    count := 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //组装结果集和sql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for k, v := range m.Data[&amp;quot;data&amp;quot;].(map[string]string) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        args[count] = v&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        count++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if count != len(m.Data[&amp;quot;data&amp;quot;].(map[string]string)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            hosts += k + &amp;quot;,&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            hosts += k + &amp;quot;)&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sqlScript := &amp;quot;INSERT INTO &amp;quot; + m.Data[&amp;quot;table&amp;quot;].(string) + &amp;quot; &amp;quot; + hosts + &amp;quot; VALUES (?&amp;quot; + strings.Repeat(&amp;quot;,?&amp;quot;, len(m.Data[&amp;quot;data&amp;quot;].(map[string]string))-1) + &amp;quot;)&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // println(sqlScript)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        println(sqlScript, args)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _, err := db.Query(sqlScript, args...)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        由于自带的insert比如写死参数，无法动态调配，所以换成组装SQL的形式，以下代码留着学习&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    stmt, err := db.Prepare(sqlScript)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    defer stmt.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return errors.New(sqlScript + &amp;quot; 字段不存在或者数据不正确！&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    _, err = stmt.Exec(args...)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CheckErr(err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return err&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func (m Mysql) Update() error &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //m.Data由table、set和where构成&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //初始化一个结果集&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    args := make([]interface&amp;#123;&amp;#125;, len(m.Data[&amp;quot;set&amp;quot;].(map[string]string))+len(m.Data[&amp;quot;where&amp;quot;].(map[string]string)))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //统计次数&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    count := 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    c_where := 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //组装结果集set和where&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    set := &amp;quot; SET &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    where := &amp;quot; WHERE &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for k, v := range m.Data[&amp;quot;set&amp;quot;].(map[string]string) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        args[count] = v&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        count++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if count != len(m.Data[&amp;quot;set&amp;quot;].(map[string]string)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            set += k + &amp;quot;=?, &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            set += k + &amp;quot;=? &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for kk, vv := range m.Data[&amp;quot;where&amp;quot;].(map[string]string) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        args[count] = vv&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        count++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        c_where++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if len(m.Data[&amp;quot;where&amp;quot;].(map[string]string)) == 1 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            where += kk + &amp;quot;=?&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; else if c_where != len(m.Data[&amp;quot;where&amp;quot;].(map[string]string)) &amp;amp;&amp;amp; len(m.Data[&amp;quot;where&amp;quot;].(map[string]string)) != 1 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            where += kk + &amp;quot;=? and &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; else if c_where == len(m.Data[&amp;quot;where&amp;quot;].(map[string]string)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            where += kk + &amp;quot;=? &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sqlScript := &amp;quot;UPDATE &amp;quot; + m.Data[&amp;quot;table&amp;quot;].(string) + set + where&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // println(sqlScript)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        println(sqlScript, args)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _, err := db.Query(sqlScript, args...)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        由于自带的insert比如写死参数，无法动态调配，所以换成组装SQL的形式，以下代码留着学习&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    stmt, err := db.Prepare(sqlScript)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    defer stmt.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return errors.New(sqlScript + &amp;quot; 字段不存在或者数据不正确！&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    _, err = stmt.Exec(args...)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CheckErr(err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return err&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func (m Mysql) Delete() error &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //m.Data由table和where构成&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //初始化一个结果集&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    args := make([]interface&amp;#123;&amp;#125;, len(m.Data[&amp;quot;where&amp;quot;].(map[string]string)))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //统计次数&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    count := 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //组装结果集set和where&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    where := &amp;quot; WHERE &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for kk, vv := range m.Data[&amp;quot;where&amp;quot;].(map[string]string) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        args[count] = vv&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        count++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if len(m.Data[&amp;quot;where&amp;quot;].(map[string]string)) == 1 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            where += kk + &amp;quot;=?&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; else if count != len(m.Data[&amp;quot;where&amp;quot;].(map[string]string)) &amp;amp;&amp;amp; len(m.Data[&amp;quot;where&amp;quot;].(map[string]string)) != 1 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            where += kk + &amp;quot;=? and &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; else if count == len(m.Data[&amp;quot;where&amp;quot;].(map[string]string)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            where += kk + &amp;quot;=? &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sqlScript := &amp;quot;DELETE FROM &amp;quot; + m.Data[&amp;quot;table&amp;quot;].(string) + where&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // println(sqlScript)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        println(sqlScript, args)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _, err := db.Query(sqlScript, args...)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        由于自带的insert比如写死参数，无法动态调配，所以换成组装SQL的形式，以下代码留着学习&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    stmt, err := db.Prepare(sqlScript)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    defer stmt.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return errors.New(sqlScript + &amp;quot; 字段不存在或者数据不正确！&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    _, err = stmt.Exec(args...)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CheckErr(err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return err&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;自己实现mysql数据库动态连接池&quot;&gt;&lt;a href=&quot;#自己实现mysql数据库动态连接池&quot; class=&quot;headerlink&quot; title=&quot;自己实现mysql数据库动态连接池&quot;&gt;&lt;/a&gt;自己实现mysql数据库动态连接池&lt;/h1&gt;&lt;h2 id=&quot;关键点&quot;&gt;&lt;a href=&quot;#关键点&quot; class=&quot;headerlink&quot; title=&quot;关键点&quot;&gt;&lt;/a&gt;关键点&lt;/h2&gt;&lt;p&gt;通过一个全局变量var db *sql.DB实现动态连接池的作用&lt;/p&gt;
&lt;h2 id=&quot;代码&quot;&gt;&lt;a href=&quot;#代码&quot; class=&quot;headerlink&quot; title=&quot;代码&quot;&gt;&lt;/a&gt;代码&lt;/h2&gt;
    
    </summary>
    
      <category term="golang-gin" scheme="http://www.lflxp.cn/categories/golang-gin/"/>
    
    
      <category term="golang" scheme="http://www.lflxp.cn/tags/golang/"/>
    
  </entry>
  
  <entry>
    <title>gin框架之路由语法</title>
    <link href="http://www.lflxp.cn/2016/04/09/2016-04-09-gin%E6%A1%86%E6%9E%B6%E4%B9%8B%E8%B7%AF%E7%94%B1%E5%99%A8/"/>
    <id>http://www.lflxp.cn/2016/04/09/2016-04-09-gin框架之路由器/</id>
    <published>2016-04-09T09:21:08.697Z</published>
    <updated>2016-04-09T10:47:45.528Z</updated>
    
    <content type="html">&lt;h1 id=&quot;gin框架之路由语法&quot;&gt;&lt;a href=&quot;#gin框架之路由语法&quot; class=&quot;headerlink&quot; title=&quot;gin框架之路由语法&quot;&gt;&lt;/a&gt;gin框架之路由语法&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;记录一下golang的web框架gin的router语法，不然多久不看就搞忘了&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;代码&quot;&gt;&lt;a href=&quot;#代码&quot; class=&quot;headerlink&quot; title=&quot;代码&quot;&gt;&lt;/a&gt;代码&lt;/h2&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;135&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;136&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;137&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;138&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;139&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;140&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;141&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;142&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;143&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;144&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;145&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;146&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;147&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;148&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;149&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;150&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;151&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;152&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;153&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;154&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;155&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;156&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;157&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;158&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;159&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;160&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;161&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;162&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;163&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;164&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;165&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;166&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;167&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;168&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;169&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;170&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;171&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;172&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;173&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;174&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;175&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;176&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;177&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;178&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;179&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;180&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;181&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;182&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;183&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;184&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;185&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;186&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;187&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;188&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;189&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;190&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;191&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;193&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;194&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;195&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;196&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;197&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;198&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;199&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;200&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;201&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;202&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;203&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;204&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;205&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;206&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;207&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;208&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;209&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;210&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;211&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;212&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;213&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;214&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;215&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;216&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;217&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;218&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;219&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;220&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;221&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;222&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;223&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;224&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;225&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;226&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;227&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;228&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;229&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;230&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;231&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;232&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;233&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;234&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;235&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;236&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;237&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;238&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;239&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;240&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;241&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;242&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;243&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;244&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;245&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;246&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;247&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;248&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;package router&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;fmt&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;gin_monitor/cache&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    . &amp;quot;gin_monitor/config&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    . &amp;quot;gin_monitor/controllers&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    . &amp;quot;gin_monitor/models&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;github.com/gin-gonic/contrib/sessions&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;github.com/gin-gonic/gin&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;quot;html/template&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;net/http&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;quot;text/template&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//通过接口Db实现自己的封装查询&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func DoQuery(db Db) (map[int]map[string]string, error) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    result, err := db.Query()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return result, err&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func DoInsert(db Db) error &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    err := db.Insert()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return err&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func DoUpdate(db Db) error &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    err := db.Update()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return err&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func DoDelete(db Db) error &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    err := db.Delete()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return err&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func StartHttpServer() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // gin.SetMode(gin.ReleaseMode)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    router := gin.Default()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //session&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //session middleware&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    store := sessions.NewCookieStore([]byte(&amp;quot;secret&amp;quot;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    router.Use(sessions.Sessions(&amp;quot;mysession&amp;quot;, store))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    router.GET(&amp;quot;/session&amp;quot;, func(c *gin.Context) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        session := sessions.Default(c)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        var count int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        v := session.Get(&amp;quot;count&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if v == nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            count = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            count = v.(int)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            count += 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        session.Set(&amp;quot;count&amp;quot;, count)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // fmt.Println(session.Get(&amp;quot;count&amp;quot;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        session.Save()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        c.JSON(200, gin.H&amp;#123;&amp;quot;count&amp;quot;: count&amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // HTML rendering -&amp;gt;[支持正则表达式]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //单个目录&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // router.LoadHTMLGlob(&amp;quot;../view/tmplates/*&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //多个目录&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    router.LoadHTMLGlob(&amp;quot;../view/*/*&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // router.LoadHTMLFiles(&amp;quot;templates/template1.html&amp;quot;, &amp;quot;templates/template2.html&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // template.ParseFiles(&amp;quot;content.tmpl&amp;quot;, &amp;quot;footer.tmpl&amp;quot;, &amp;quot;header.tmpl&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // html_header := template.Must(template.ParseFiles(&amp;quot;../view/hcf/header.tmpl&amp;quot;, &amp;quot;../view/hcf/footer.tmpl&amp;quot;, &amp;quot;../view/hcf/content.tmpl&amp;quot;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // router.SetHTMLTemplate(html_header)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    router.GET(&amp;quot;/hao&amp;quot;, func(c *gin.Context) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        c.String(http.StatusOK, &amp;quot;hello world&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    router.GET(&amp;quot;/&amp;quot;, func(c *gin.Context) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        c.HTML(http.StatusOK, &amp;quot;index.html&amp;quot;, gin.H&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;title&amp;quot;: &amp;quot;首页&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    router.GET(&amp;quot;/err&amp;quot;, func(c *gin.Context) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        //配合从定向使用&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // c.Redirect(http.StatusBadRequest, &amp;quot;/err&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        c.HTML(http.StatusOK, &amp;quot;tmp.tmpl&amp;quot;, gin.H&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;title&amp;quot;: &amp;quot;错误&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;jump&amp;quot;:  &amp;quot;refresh&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;quot;body&amp;quot;:  &amp;quot;访问错误，跳转到主页！&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    router.GET(&amp;quot;/data&amp;quot;, func(c *gin.Context) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        sql := &amp;quot;select * from configs&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        x := Mysql&amp;#123;Sql: sql&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        rs, err := DoQuery(x)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            fmt.Println(err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        result := MapToJson(rs)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        c.String(http.StatusOK, result)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    table := router.Group(&amp;quot;/table&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        table.GET(&amp;quot;1&amp;quot;, func(c *gin.Context) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            c.HTML(http.StatusOK, &amp;quot;table.html&amp;quot;, gin.H&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;quot;title&amp;quot;: &amp;quot;CONFIGS&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        table.GET(&amp;quot;2&amp;quot;, func(c *gin.Context) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            c.HTML(http.StatusOK, &amp;quot;table2.html&amp;quot;, gin.H&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;quot;title&amp;quot;: &amp;quot;CONFIGS&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        table.GET(&amp;quot;3&amp;quot;, func(c *gin.Context) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            c.HTML(http.StatusOK, &amp;quot;table3.html&amp;quot;, gin.H&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;quot;title&amp;quot;: &amp;quot;CONFIGS&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        table.GET(&amp;quot;4&amp;quot;, func(c *gin.Context) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            c.HTML(http.StatusOK, &amp;quot;table4.html&amp;quot;, gin.H&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;quot;title&amp;quot;: &amp;quot;CONFIGS&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        table.GET(&amp;quot;5&amp;quot;, func(c *gin.Context) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            c.HTML(http.StatusOK, &amp;quot;table5.html&amp;quot;, gin.H&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;quot;title&amp;quot;: &amp;quot;CONFIGS&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ca := router.Group(&amp;quot;/cache&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ca.GET(&amp;quot;set&amp;quot;, func(c *gin.Context) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            key := c.Query(&amp;quot;key&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            value := c.Query(&amp;quot;value&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            cache.Caches.Set(key, value)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            c.String(http.StatusOK, &amp;quot;缓存设置成功&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ca.GET(&amp;quot;get&amp;quot;, func(c *gin.Context) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            key := c.Query(&amp;quot;key&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            tmp := &amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if cache.Caches.IsExist(key) == true &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                tmp = cache.Caches.Get(key).Value.(string)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                tmp = &amp;quot;查无此数据&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            c.HTML(http.StatusOK, &amp;quot;cache.html&amp;quot;, gin.H&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;quot;name&amp;quot;: tmp,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mysql := router.Group(&amp;quot;/mysql&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mysql.GET(&amp;quot;query&amp;quot;, func(c *gin.Context) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            sql := c.Query(&amp;quot;sql&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            x := Mysql&amp;#123;Sql: sql&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            rs, err := DoQuery(x)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                fmt.Println(err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            c.HTML(http.StatusOK, &amp;quot;hao.html&amp;quot;, gin.H&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;quot;title&amp;quot;: &amp;quot;Main website&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;quot;body&amp;quot;:  rs,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;quot;ip&amp;quot;:    c.ClientIP(),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;quot;type&amp;quot;:  c.ContentType(),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                //http://127.0.0.1:8080/index?name=123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;quot;name&amp;quot;:  c.DefaultQuery(&amp;quot;name&amp;quot;, &amp;quot;lixueping&amp;quot;),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;quot;color&amp;quot;: &amp;quot;red&amp;quot;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mysql.GET(&amp;quot;insert&amp;quot;, func(c *gin.Context) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            //http://127.0.0.1/mysql/insert?data=name:lxp,host:china&amp;amp;table=tttt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            data := c.Query(&amp;quot;data&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            table := c.Query(&amp;quot;table&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            rs := DataToInsert(table, data)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            err := DoInsert(rs)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                c.String(http.StatusOK, err.Error())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                c.String(http.StatusOK, &amp;quot;insert成功&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mysql.GET(&amp;quot;update&amp;quot;, func(c *gin.Context) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            set := c.Query(&amp;quot;set&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            where := c.Query(&amp;quot;where&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            table := c.Query(&amp;quot;table&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            rs := DataToUpdate(table, set, where)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            err := DoUpdate(rs)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                c.String(http.StatusOK, err.Error())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                c.String(http.StatusOK, &amp;quot;update成功&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        mysql.GET(&amp;quot;delete&amp;quot;, func(c *gin.Context) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            table := c.Query(&amp;quot;table&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            where := c.Query(&amp;quot;where&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            rs := DataToDelete(table, where)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // err := rs.Delete() 与下面等效 此使用对象方法 下面使用接口的方法&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            err := DoDelete(rs)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                c.String(http.StatusOK, err.Error())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                c.String(http.StatusOK, &amp;quot;delete成功&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cg := router.Group(&amp;quot;/config&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        cg.GET(&amp;quot;query&amp;quot;, func(c *gin.Context) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            group := c.DefaultQuery(&amp;quot;group&amp;quot;, &amp;quot;database&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            item := c.DefaultQuery(&amp;quot;item&amp;quot;, &amp;quot;username&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            result := GetConfig(group, item)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            c.String(http.StatusOK, result)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        cg.GET(&amp;quot;update&amp;quot;, func(c *gin.Context) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            c.String(http.StatusOK, cg.BasePath())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        cg.GET(&amp;quot;delete&amp;quot;, func(c *gin.Context) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            group := c.DefaultQuery(&amp;quot;group&amp;quot;, &amp;quot;database&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            item := c.DefaultQuery(&amp;quot;item&amp;quot;, &amp;quot;username&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            rs := DelConfig(group, item)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if rs == true &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                c.String(http.StatusOK, &amp;quot;删除成功&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                c.String(http.StatusOK, &amp;quot;删除失败&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Serving static files&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // router.Static(&amp;quot;/static&amp;quot;, &amp;quot;../tag/tag.go&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // router.StaticFS(&amp;quot;/path_static&amp;quot;, http.Dir(&amp;quot;d:\\&amp;quot;)) //http.FileSystem&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // router.StaticFile(&amp;quot;/file_static&amp;quot;, &amp;quot;d:\\123.jpg&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //载入本地js css 的关键&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    router.StaticFS(&amp;quot;/static&amp;quot;, http.Dir(&amp;quot;../static&amp;quot;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    router.Run(&amp;quot;:80&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;代码解析&quot;&gt;&lt;a href=&quot;#代码解析&quot; class=&quot;headerlink&quot; title=&quot;代码解析&quot;&gt;&lt;/a&gt;代码解析&lt;/h2&gt;</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;gin框架之路由语法&quot;&gt;&lt;a href=&quot;#gin框架之路由语法&quot; class=&quot;headerlink&quot; title=&quot;gin框架之路由语法&quot;&gt;&lt;/a&gt;gin框架之路由语法&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;记录一下golang的web框架gin的router语法，不然多久不看就搞忘了&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;代码&quot;&gt;&lt;a href=&quot;#代码&quot; class=&quot;headerlink&quot; title=&quot;代码&quot;&gt;&lt;/a&gt;代码&lt;/h2&gt;
    
    </summary>
    
      <category term="golang-gin" scheme="http://www.lflxp.cn/categories/golang-gin/"/>
    
    
      <category term="golang" scheme="http://www.lflxp.cn/tags/golang/"/>
    
  </entry>
  
  <entry>
    <title>IP扫描工具</title>
    <link href="http://www.lflxp.cn/2016/04/09/2016-04-09-%E8%A7%A3%E6%9E%90IP/"/>
    <id>http://www.lflxp.cn/2016/04/09/2016-04-09-解析IP/</id>
    <published>2016-04-09T09:00:10.030Z</published>
    <updated>2016-04-09T10:47:59.555Z</updated>
    
    <content type="html">&lt;h1 id=&quot;IP解析&quot;&gt;&lt;a href=&quot;#IP解析&quot; class=&quot;headerlink&quot; title=&quot;IP解析&quot;&gt;&lt;/a&gt;IP解析&lt;/h1&gt;&lt;h2 id=&quot;该端代码是我自己写的ip扫描的一部分，后续会写上更多代码&quot;&gt;&lt;a href=&quot;#该端代码是我自己写的ip扫描的一部分，后续会写上更多代码&quot; class=&quot;headerlink&quot; title=&quot;该端代码是我自己写的ip扫描的一部分，后续会写上更多代码&quot;&gt;&lt;/a&gt;该端代码是我自己写的ip扫描的一部分，后续会写上更多代码&lt;/h2&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;package ip&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;strings&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;log&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;strconv&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//  &amp;quot;fmt&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;os&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var p = log.Println&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//var pp = fmt.Printf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func CheckIp(ips string) ([]string,string) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    result:=strings.Split(ips,&amp;quot;.&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    FinallyItems,FinallyInfo:=SingleOrDouble(result)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return FinallyInfo,FinallyItems&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func StringToInt(x string) int &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    y,err :=strconv.Atoi(x)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err !=nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        panic(err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return y&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//将172.31,32.0-100.1，255 IP地址按&amp;quot;,&amp;quot;|&amp;quot;.&amp;quot;|&amp;quot;-&amp;quot;进行划分，分为三类，单个IP,范围IP和多值IP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func ParseStringToInt(s string) (string,[]int) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var types string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var result []int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if strings.Contains(s,&amp;quot;-&amp;quot;) == false &amp;amp;&amp;amp; strings.Contains(s,&amp;quot;,&amp;quot;) == false &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        types = &amp;quot;Single&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        result =GetNums(StringToInt(s),StringToInt(s))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; else if strings.Contains(s,&amp;quot;-&amp;quot;) == true &amp;amp;&amp;amp; strings.Contains(s,&amp;quot;,&amp;quot;) == false &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            types = &amp;quot;Double&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            res:=strings.Split(s,&amp;quot;-&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//          p(res)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            aa:=res[0]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            bb:=res[1]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            result =GetNums(StringToInt(aa),StringToInt(bb))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125; else if strings.Contains(s,&amp;quot;-&amp;quot;) == false &amp;amp;&amp;amp; strings.Contains(s,&amp;quot;,&amp;quot;) == true &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                types = &amp;quot;MutilValues&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                tmp := strings.Split(s,&amp;quot;,&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                for _,value :=range tmp &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    result=append(result,StringToInt(value))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return types,result&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//func SingleOrDouble(a []string) (string,[]string) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func SingleOrDouble(a []string) (string,[]string) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    list :=make([]string,4)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    nums := make([][]int,4)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ip_info :=make([]string,0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for x,y:= range a &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        switch x &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            case 0:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                item1,num1 := ParseStringToInt(y)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                nums[0] =num1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                list[0] = item1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            case 1:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                item2,num2 := ParseStringToInt(y)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                nums[1] =num2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                list[1] = item2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            case 2:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                item3,num3 := ParseStringToInt(y)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                nums[2] =num3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                list[2] = item3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            case 3:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                item4,num4 := ParseStringToInt(y)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                nums[3] =num4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                list[3] = item4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            default:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                p(&amp;quot;ERROR:Out of range limited by 4&amp;quot;) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                os.Exit(1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    result:=list[0]+&amp;quot;-&amp;quot;+list[1]+&amp;quot;-&amp;quot;+list[2]+&amp;quot;-&amp;quot;+list[3]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for _,aa :=range nums[0] &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        for _,bb :=range nums[1] &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            for _,cc :=range nums[2] &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                for _,dd :=range nums[3] &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    ip_info = append(ip_info,strconv.Itoa(aa)+&amp;quot;.&amp;quot;+strconv.Itoa(bb)+&amp;quot;.&amp;quot;+strconv.Itoa(cc)+&amp;quot;.&amp;quot;+strconv.Itoa(dd))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//  p(ip_info)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return result,ip_info&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func init() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    log.Println(&amp;quot;开始初始化checkIp包函数&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;代码分析&quot;&gt;&lt;a href=&quot;#代码分析&quot; class=&quot;headerlink&quot; title=&quot;代码分析&quot;&gt;&lt;/a&gt;代码分析&lt;/h2&gt;&lt;hr&gt;
&lt;h1 id=&quot;端口扫描&quot;&gt;&lt;a href=&quot;#端口扫描&quot; class=&quot;headerlink&quot; title=&quot;端口扫描&quot;&gt;&lt;/a&gt;端口扫描&lt;/h1&gt;&lt;h2 id=&quot;代码&quot;&gt;&lt;a href=&quot;#代码&quot; class=&quot;headerlink&quot; title=&quot;代码&quot;&gt;&lt;/a&gt;代码&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;135&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;136&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;137&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;138&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;139&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;140&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;141&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;142&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;143&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;144&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;145&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;146&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;147&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;148&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;149&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;150&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;151&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;152&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;153&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;154&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;155&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;156&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;157&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;158&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;159&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;160&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;161&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;162&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;163&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;164&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;165&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;166&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;167&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;168&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;169&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;170&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;171&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;172&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;173&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;174&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;175&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;176&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;177&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;178&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;179&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;180&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;181&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;182&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;183&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;184&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;185&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;186&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;187&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;188&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;189&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;190&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;191&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;193&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;194&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;195&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;196&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;197&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;198&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;199&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;200&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;201&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;202&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;203&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;204&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;205&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;206&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;207&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;package mutil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //  &amp;quot;log&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;net&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;runtime&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // &amp;quot;sync&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;time&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //  . &amp;quot;flags&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    . &amp;quot;Study/ip&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;fmt&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func init() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    p(&amp;quot;Scan批量扫描端口功能(默认)：main.exe -ip=172.31,16.0-11.1-254 -item=scan -threads=10 -svar=debug -port=22,3306 (或者 -port=22-3306)&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//定义job方法&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// func (e *jobs) StartPort(host string, port string, done chan bool, status chan int, wg sync.WaitGroup) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func (e *jobs) StartPort(host string, port string, done chan bool, status chan int) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ch := make(chan int)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //并行执行扫描任务，否则是单线程 关键点go  &amp;lt;-ch&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    go e.ScanPort(host, port, ch, done, status)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;-ch&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//定义job方法&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// func (e *jobs) ScanPort(host string, port string, ch chan int, done chan bool, status chan int, wg sync.WaitGroup) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func (e *jobs) ScanPort(host string, port string, ch chan int, done chan bool, status chan int) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        remote = host + &amp;quot;:&amp;quot; + port&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ch &amp;lt;- 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    conn, err := net.DialTimeout(&amp;quot;tcp&amp;quot;, remote, time.Millisecond*sshTimeOut)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //携程处理并打印成功的信息，并屏蔽失败信息&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    go func() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        //去掉这for循环 go func()&amp;#123; go func()&amp;#123;&amp;#125;&amp;#125;() 这种结构的goroutine就可以关闭了&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        //      for &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        // defer wg.Done()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        select &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        case task_one := &amp;lt;-e.job:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if e.success == true &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                pp(task_one, &amp;quot;pid&amp;quot;, e.pid)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125; else if e.success == false &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                break&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                //                      p(task_one, &amp;quot;pid&amp;quot;, e.pid)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        case &amp;lt;-time.After(time.Second * sshTimeOut):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            runtime.Goexit()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        //      &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //如果失败返回失败信息并标识失败并记录 然后退出&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        msg := remote + &amp;quot; failed&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        e.success = false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        e.job &amp;lt;- msg&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        status &amp;lt;- 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        //      os.Exit(1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        runtime.Goexit()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    msg1 := host + &amp;quot; --&amp;gt;&amp;quot; + port + &amp;quot;&amp;lt;-- ok&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.job &amp;lt;- msg1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    e.success = true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    status &amp;lt;- 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //执行完后总是关闭连接&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    defer conn.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    runtime.Goexit()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//增加了线程数调节&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func ScanPorts(ips []string, ports []string, threads int) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var count int = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var countProcess int = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var finishedCount int = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var resultCount int = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    status := make(chan int)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //获取任务数&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    LengthTasks := len(ips) * len(ports)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    pf(&amp;quot;共有任务数:%d,并发线程数:%d&amp;quot;, LengthTasks, threads)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //初始化jobs结构体数组对象&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    task := make([]jobs, LengthTasks)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //启动线程maxGo（255）完成数量的阶段性标识&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //如果theads为1时,不设置缓冲 则程序会卡住&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    processF := make(chan int, threads)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //完成标识&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    done := make(chan bool)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // var wg sync.WaitGroup&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //统计成功和失败次数，并返回结束通道channel&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    go func(s string) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _, ok := &amp;lt;-processF&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        for ok &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if countOk+countFaild == LengthTasks &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                //              pf(&amp;quot;全部扫描完毕，其中共计 %d,其中成功 %d 次 失败 %d 次,还在运行的线程数 %d&amp;quot;,LengthTasks,countOk,countFaild,runtime.NumGoroutine())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                pf(&amp;quot;全部扫描完毕，其中共计 %d,其中成功 %d 次 失败 %d 次(按任意键退出！)&amp;quot;, LengthTasks, countOk, countFaild)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                done &amp;lt;- true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125; else if finishedCount == threads &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;lt;-processF&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                resultCount += threads&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                //              pf(&amp;quot;完成  %d 个线程,正在运行 %d 个线程,共计 %d 线程完成&amp;quot;,finishedCount,runtime.NumGoroutine(),resultCount)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                pf(&amp;quot;启动并完成  %d 个线程,共启动 %d 线程,正在执行%d 个线程&amp;quot;, finishedCount, resultCount, runtime.NumGoroutine())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                finishedCount = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                // processF &amp;lt;- 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            select &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            case res := &amp;lt;-status:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                if res == 1 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    countOk += 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    finishedCount += 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125; else if res == 0 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    countFaild += 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    finishedCount += 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            default:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;(&amp;quot;参数&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //启动扫描任务&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for _, ip := range ips &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        for _, port := range ports &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            switch &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            case count == LengthTasks-1:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                // wg.Add(1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                task[count].init(count)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                task[count].StartPort(ip, port, done, status)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                pf(&amp;quot;+++++++++所有%d个线程全部开启+++++++++&amp;quot;, LengthTasks)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            case count%threads != 0:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                // wg.Add(1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                //因为gotinue里面已经设置线程退出，所以不需要再判断休眠 效率较低&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                task[count].init(count)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                task[count].StartPort(ip, port, done, status)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                count += 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                //                  switch &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                //                      case runtime.NumGoroutine() &amp;gt;= threads:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                //                          pf(&amp;quot;当前线程数 %d 已达到最大值 ,等待3秒消化队列！！！&amp;quot;,runtime.NumGoroutine())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                //                          time.Sleep(time.Second * 1000)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                //                      case runtime.NumGoroutine() &amp;lt; threads:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                //                          task[count].init(count)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                //                          task[count].StartPort(ip, port, done,status)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                //                          count += 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                //                  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            case count%threads == 0 &amp;amp;&amp;amp; count != 0:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                // wg.Add(1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                task[count].init(count)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                task[count].StartPort(ip, port, done, status)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                countProcess += threads&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                //                  pf(&amp;quot;------------开启%d个线程------------&amp;quot;,countProcess)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                //                  time.Sleep(time.Millisecond * waitTime)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                // &amp;lt;-processF&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                processF &amp;lt;- 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                count += 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            case count == 0:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                // wg.Add(1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                task[count].init(count)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                task[count].StartPort(ip, port, done, status) //, wg&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                //                  pf(&amp;quot;------------开启%d个线程------------&amp;quot;,count)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                count += 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //等待所有waitGroup进行管理完成后退出&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //  task[1].Stop()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //等待扫描完成信号&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;-done&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func Start(info map[string]string, threads int) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    runtime.GOMAXPROCS(runtime.NumCPU())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //获取参数配置项&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //  info,_,_,_ :=GetValue()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ips, ip_item := CheckIp(info[&amp;quot;ip&amp;quot;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ports, port_item := CheckPort(info[&amp;quot;port&amp;quot;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    pp(&amp;quot;HOST:PORT类型为:&amp;quot;, ip_item, &amp;quot;:&amp;quot;, port_item)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if threads &amp;lt;= 0 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        p(&amp;quot;线程数必须大于等于1&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        p(&amp;quot;ip_information : &amp;quot;, ips)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        p(&amp;quot;port_information : &amp;quot;, ports)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        p(&amp;quot;如果想打印出详细连接信息，请看main.exe -h&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //查看s.ip值类型&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //  test.Check(s.ip)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //  test.Check(s.port)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    now := time.Now()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ScanPorts(ips, ports, threads)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    end_time := time.Now()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var dur_time time.Duration = end_time.Sub(now)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //  var min float64 = dur_time.Minutes()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var sec float64 = dur_time.Seconds()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //  var nano int64 = dur_time.Nanoseconds()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    pf(&amp;quot;耗时 %f 秒&amp;quot;, sec)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var input string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fmt.Scanln(&amp;amp;input)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    pp(&amp;quot;done&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;代码分析-1&quot;&gt;&lt;a href=&quot;#代码分析-1&quot; class=&quot;headerlink&quot; title=&quot;代码分析&quot;&gt;&lt;/a&gt;代码分析&lt;/h2&gt;&lt;hr&gt;
&lt;h1 id=&quot;ssh密码漏洞扫描&quot;&gt;&lt;a href=&quot;#ssh密码漏洞扫描&quot; class=&quot;headerlink&quot; title=&quot;ssh密码漏洞扫描&quot;&gt;&lt;/a&gt;ssh密码漏洞扫描&lt;/h1&gt;&lt;h2 id=&quot;代码-1&quot;&gt;&lt;a href=&quot;#代码-1&quot; class=&quot;headerlink&quot; title=&quot;代码&quot;&gt;&lt;/a&gt;代码&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;135&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;136&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;137&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;138&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;139&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;140&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;141&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;142&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;143&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;144&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;145&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;146&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;147&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;148&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;149&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;150&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;151&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;152&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;153&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;154&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;155&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;156&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;157&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;158&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;159&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;160&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;161&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;162&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;163&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;164&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;165&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;166&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;167&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;168&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;169&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;170&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;171&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;172&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;173&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;174&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;175&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;176&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;177&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;178&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;179&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;180&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;181&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;182&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;183&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;184&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;185&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;186&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;187&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;188&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;189&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;190&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;191&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;193&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;194&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;195&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;196&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;197&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;198&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;199&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;200&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;201&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;202&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;203&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;204&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;205&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;206&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;207&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;208&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;209&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;210&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;211&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;212&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;213&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;214&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;215&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;216&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;217&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;218&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;219&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;220&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;221&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;222&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;223&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;224&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;225&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;226&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;227&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;228&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;229&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;230&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;231&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;232&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;233&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;234&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;235&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;236&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;237&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;238&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;239&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;240&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;241&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;242&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;243&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;244&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;245&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;246&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;247&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;248&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;249&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;250&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;251&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;252&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;253&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;254&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;255&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;256&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;257&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;258&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;259&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;260&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;261&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;package mutil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;code.google.com/p/go.crypto/ssh&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //    &amp;quot;log&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //    . &amp;quot;flags&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //    &amp;quot;strings&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    . &amp;quot;Study/ip&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;fmt&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;net&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;runtime&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;time&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func init() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    p(&amp;quot;Ssh批量命令功能：main.exe -ip=172.31.0.1-254 -item=ssh -threads=255 -svar=debug -username=root -passwd=******/([0-9]+) service mysql status;ip a&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func prepareInfo(info map[string]string, com []string) ([]string, []string, string, map[string]string) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var command string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //  info,_,_,com := GetValue()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ips, ip_item := CheckIp(info[&amp;quot;ip&amp;quot;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ports, port_item := CheckPort(info[&amp;quot;port&amp;quot;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    p(&amp;quot;HOST:PORT类型为:&amp;quot;, ip_item, &amp;quot;:&amp;quot;, port_item)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        p(&amp;quot;ip_information : &amp;quot;, ips)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        p(&amp;quot;port_information : &amp;quot;, ports)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        p(&amp;quot;如果想打印出详细连接信息，请看main.exe -h&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for xx, yy := range com &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if xx == len(com)-1 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            command += yy&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            command += yy + &amp;quot; &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return ips, ports, command, info&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func (e *jobs) SshStart(host string, port string, command string, info map[string]string, status chan int) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ch := make(chan int)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    go e.SshCheck(host, port, command, info, status, ch)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;-ch&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func (e *jobs) SshCheck(host string, port string, command string, info map[string]string, status chan int, ch chan int) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        remote = host + &amp;quot;:&amp;quot; + port&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ch &amp;lt;- 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //  check := func(err error, msg string) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //            log.Fatalf(&amp;quot;%s error: %v&amp;quot;, msg, err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //          status &amp;lt;- 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //            return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    conn, err := net.DialTimeout(&amp;quot;tcp&amp;quot;, remote, time.Millisecond*sshTimeOut)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //      check(err,&amp;quot;DialTimeout&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            p(&amp;quot;Failed to dial net 22: &amp;quot;, err.Error())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        status &amp;lt;- 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        runtime.Goexit()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    defer conn.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    passwds := ParserAutoPasswd(host, info)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for _, passwd := range passwds &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        go e.SshSingleCheck(remote, info, passwd, command, status)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //    client, err := ssh.Dial(&amp;quot;tcp&amp;quot;, remote, &amp;amp;ssh.ClientConfig&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //        User: info[&amp;quot;username&amp;quot;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //        Auth: []ssh.AuthMethod&amp;#123;ssh.Password(password)&amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //    &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ////    check(err, &amp;quot;dial&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //      if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //          p(&amp;quot;Failed to dial: &amp;quot;+remote + err.Error())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //      &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //          status &amp;lt;- 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //          return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //      &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //    session,err := client.NewSession()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ////    check(err, &amp;quot;new session&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //  if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //      if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //          p(&amp;quot;Failed to create session: &amp;quot;+remote + err.Error())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //      &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //          status &amp;lt;- 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //          return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //      &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //    b,err := session.Output(command)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //      if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //          p(&amp;quot;Failed to exec command：&amp;quot;+remote+command+err.Error())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //      &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //      status &amp;lt;- 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //      return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //    pf(&amp;quot;%s :(%s/%s) %s&amp;quot;, remote,info[&amp;quot;username&amp;quot;],password,string(b))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //    status &amp;lt;- 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //    defer session.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func (e *jobs) SshSingleCheck(remote string, info map[string]string, passwd string, command string, status chan int) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    client, err := ssh.Dial(&amp;quot;tcp&amp;quot;, remote, &amp;amp;ssh.ClientConfig&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        User: info[&amp;quot;username&amp;quot;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Auth: []ssh.AuthMethod&amp;#123;ssh.Password(passwd)&amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            pf(&amp;quot;%s %s error: %v&amp;quot;, err, &amp;quot;dial&amp;quot;, remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        status &amp;lt;- 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        runtime.Goexit()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    session, err := client.NewSession()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            p(&amp;quot;Failed to dial: &amp;quot; + remote + err.Error())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        status &amp;lt;- 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        runtime.Goexit()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    b, err := session.Output(command)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            p(&amp;quot;Failed to exec command：&amp;quot; + remote + command + err.Error())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        status &amp;lt;- 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        runtime.Goexit()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    pf(&amp;quot;%s(root/%s) : %s&amp;quot;, remote, passwd, string(b))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    status &amp;lt;- 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    defer session.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    runtime.Goexit()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func StartSshCheck(basic map[string]string, com []string, threads int) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    runtime.GOMAXPROCS(runtime.NumCPU())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    now := time.Now()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    status := make(chan int)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    finish := make(chan bool)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ips, ports, command, info := prepareInfo(basic, com)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    LengthTasks := len(ips) * len(ports)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //启动线程maxGo（255）完成数量的阶段性标识&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    processF := make(chan int, threads)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //初始化jobs结构体数组对象&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    task := make([]jobs, LengthTasks)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    pf(&amp;quot;共有任务数:%d,并发线程数:%d&amp;quot;, LengthTasks, threads)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if threads &amp;lt;= 0 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        p(&amp;quot;线程数必须大于等于1&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var count int = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var countProcess int = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var finishedCount int = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var resultCount int = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    go func() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _, ok := &amp;lt;-processF&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        for ok &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if countOk+countFaild == LengthTasks &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                //              pf(&amp;quot;全部扫描完毕，其中共计 %d,其中成功 %d 次 失败 %d 次,还在运行的线程数 %d&amp;quot;,LengthTasks,countOk,countFaild,runtime.NumGoroutine())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                pf(&amp;quot;全部扫描完毕，其中共计 %d,其中成功 %d 次 失败 %d 次(按任意键退出！)&amp;quot;, LengthTasks, countOk, countFaild)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                finish &amp;lt;- true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125; else if finishedCount == threads &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                resultCount += threads&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                //              pf(&amp;quot;完成  %d 个线程,正在运行 %d 个线程,共计 %d 线程完成&amp;quot;,finishedCount,runtime.NumGoroutine(),resultCount)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                pf(&amp;quot;完成  %d 个线程,共启动 %d 线程,正在执行%d 个线程&amp;quot;, finishedCount, resultCount, runtime.NumGoroutine())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                finishedCount = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;lt;-processF&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            select &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            case res := &amp;lt;-status:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                if res == 1 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    countOk += 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    finishedCount += 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125; else if res == 0 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    countFaild += 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    finishedCount += 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            default:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for _, ip := range ips &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        for _, port := range ports &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            switch &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            case count == LengthTasks-1:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                task[count].init(count)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                task[count].SshStart(ip, port, command, info, status)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                pf(&amp;quot;+++++++++所有%d个线程全部开启+++++++++&amp;quot;, LengthTasks)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            case count%threads != 0:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                //                  task[count].init(count)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                //                  task[count].SshStart(ip,port,command,info,status)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                //                  pf(&amp;quot;------------开启%d个线程------------&amp;quot;,count)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                //                  count += 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                switch &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                case runtime.NumGoroutine() &amp;gt;= threads*10:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    pf(&amp;quot;当前线程数 %d 已达到最大值: %d ,等待3秒消化队列！！！&amp;quot;, runtime.NumGoroutine(), threads*2)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    time.Sleep(time.Second * 3)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                case runtime.NumGoroutine() &amp;lt; threads*10:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    task[count].init(count)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    task[count].SshStart(ip, port, command, info, status)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    //                  pf(&amp;quot;------------开启%d个线程------------&amp;quot;,count)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    count += 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            case count%threads == 0 &amp;amp;&amp;amp; count != 0:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                task[count].init(count)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                task[count].SshStart(ip, port, command, info, status)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                countProcess += threads&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                pf(&amp;quot;------------开启%d个线程------------&amp;quot;, countProcess)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                //                  time.Sleep(time.Millisecond * waitTime)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                processF &amp;lt;- 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                count += 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            case count == 0:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                task[count].init(count)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                task[count].SshStart(ip, port, command, info, status)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                //                  pf(&amp;quot;------------开启%d个线程------------&amp;quot;,count)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                count += 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;-finish&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    end_time := time.Now()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var dur_time time.Duration = end_time.Sub(now)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //  var min float64 = dur_time.Minutes()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var sec float64 = dur_time.Seconds()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //  var nano int64 = dur_time.Nanoseconds()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    pf(&amp;quot;耗时 %f 秒&amp;quot;, sec)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var input string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fmt.Scanln(&amp;amp;input)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    pp(&amp;quot;done&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;代码分析-2&quot;&gt;&lt;a href=&quot;#代码分析-2&quot; class=&quot;headerlink&quot; title=&quot;代码分析&quot;&gt;&lt;/a&gt;代码分析&lt;/h2&gt;&lt;hr&gt;
&lt;h1 id=&quot;批量登陆操作&quot;&gt;&lt;a href=&quot;#批量登陆操作&quot; class=&quot;headerlink&quot; title=&quot;批量登陆操作&quot;&gt;&lt;/a&gt;批量登陆操作&lt;/h1&gt;&lt;h2 id=&quot;代码-2&quot;&gt;&lt;a href=&quot;#代码-2&quot; class=&quot;headerlink&quot; title=&quot;代码&quot;&gt;&lt;/a&gt;代码&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;135&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;136&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;137&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;138&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;139&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;140&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;141&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;142&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;143&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;144&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;145&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;146&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;147&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;148&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;149&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;150&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;151&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;152&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;153&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;154&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;155&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;156&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;157&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;158&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;159&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;160&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;161&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;162&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;163&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;164&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;165&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;166&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;167&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;168&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;169&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;170&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;171&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;172&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;173&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;174&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;175&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;176&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;177&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;178&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;179&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;180&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;181&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;182&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;183&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;184&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;185&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;186&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;187&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;188&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;189&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;190&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;191&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;193&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;194&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;195&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;196&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;197&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;198&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;199&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;200&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;201&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;202&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;203&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;204&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;205&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;206&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;207&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;208&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;209&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;210&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;211&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;212&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;213&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;214&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;215&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;216&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;217&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;218&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;219&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;220&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;221&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;222&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;223&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;224&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;225&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;226&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;227&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;228&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;229&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;230&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;231&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;232&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;233&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;234&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;235&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;236&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;237&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;238&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;239&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;240&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;241&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;242&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;243&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;244&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;245&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;246&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;247&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;248&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;249&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;250&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;251&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;252&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;253&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;254&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;255&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;256&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;257&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;258&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;259&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;260&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;261&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;262&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;263&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;264&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;265&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;266&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;267&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;268&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;269&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;270&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;271&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;272&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;273&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;274&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;275&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;276&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;277&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;278&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;279&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;280&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;281&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;282&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;283&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;284&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;285&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;286&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;287&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;288&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;289&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;290&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;291&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;292&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;293&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;294&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;295&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;296&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;297&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;298&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;299&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;300&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;301&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;302&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;303&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;304&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;305&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;306&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;307&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;308&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;309&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;310&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;311&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;312&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;313&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;314&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;315&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;316&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;317&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;318&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;319&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;320&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;321&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;322&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;323&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;324&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;325&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;326&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;327&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;328&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;329&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;330&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;331&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;332&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;333&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;334&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;335&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;336&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;337&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;338&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;339&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;340&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;341&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;342&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;343&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;344&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;package mutil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    . &amp;quot;Study/ip&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;code.google.com/p/go.crypto/ssh&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;net&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;os&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;time&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func init() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    p(&amp;quot;Login批量登陆功能：main.exe -ip=172.31.0.1-254 -item=login -svar=debug -username=root -passwd=******&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func TerminalSingleCheck(remote string, info map[string]string, passwd string, status chan int) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    client, err := ssh.Dial(&amp;quot;tcp&amp;quot;, remote, &amp;amp;ssh.ClientConfig&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        User: info[&amp;quot;username&amp;quot;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Auth: []ssh.AuthMethod&amp;#123;ssh.Password(passwd)&amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            pf(&amp;quot;%s %s error: %v&amp;quot;, err, &amp;quot;dial&amp;quot;, remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        status &amp;lt;- 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    session, err := client.NewSession()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            p(&amp;quot;Failed to dial: &amp;quot; + remote + err.Error())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        status &amp;lt;- 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    defer session.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    session.Stdout = os.Stdout&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    session.Stderr = os.Stderr&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    session.Stdin = os.Stdin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    modes := ssh.TerminalModes&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ssh.ECHO:          0,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ssh.TTY_OP_ISPEED: 14400,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ssh.TTY_OP_OSPEED: 14400,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    err = session.RequestPty(&amp;quot;xterm&amp;quot;, 25, 100, modes)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //    check(err, &amp;quot;request pty&amp;quot;,remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            pf(&amp;quot;%s %s error: %v&amp;quot;, err, &amp;quot;request pty&amp;quot;, remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        status &amp;lt;- 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    err = session.Shell()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //    check(err, &amp;quot;start shell&amp;quot;,remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            pf(&amp;quot;%s %s error: %v&amp;quot;, err, &amp;quot;start shell&amp;quot;, remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        status &amp;lt;- 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    err = session.Wait()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //    check(err, &amp;quot;return&amp;quot;,remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            pf(&amp;quot;%s %s error: %v&amp;quot;, err, &amp;quot;return&amp;quot;, remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        status &amp;lt;- 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func SshTerminal(host string, port string, info map[string]string) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        remote     = host + &amp;quot;:&amp;quot; + port&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        xx     int = 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    status := make(chan int, 1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //  check := func(err error, msg string,remote string) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //            pf(&amp;quot;%s %s error: %v&amp;quot;,remote, msg, err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //            return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //检查目标机端口是否存在借此判断主机是否存在&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    conn, err := net.DialTimeout(&amp;quot;tcp&amp;quot;, remote, time.Millisecond*sshTimeOut)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //      check(err,&amp;quot;DialTimeout&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            pf(&amp;quot;Host %s DialTimeout so it is not existed : %s &amp;quot;, remote, err.Error())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    defer conn.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    passwds := ParserAutoPasswd(host, info)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for _, passwd := range passwds &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        TerminalSingleCheck(remote, info, passwd, status)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        yy := &amp;lt;-status&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if yy == 0 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            xx += 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if xx == len(passwds) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            p(&amp;quot;Failed to Login at &amp;quot; + remote + &amp;quot;:error passwd or username! &amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func AutoLoginCheck(host string, port string, info map[string]string) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //func SshTest(host string,port string,command string,info map[string]string) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        remote = host + &amp;quot;:&amp;quot; + port&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    tmp := ConfigAutoPasswd(host, &amp;quot;******&amp;quot;, &amp;quot;([0-9]+)&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //  tmp:=ParserAutoPasswd(host,info)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    conn, err := net.DialTimeout(&amp;quot;tcp&amp;quot;, remote, time.Millisecond*sshTimeOut)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //      check(err,&amp;quot;DialTimeout&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            pf(&amp;quot;Host %s DialTimeout so it is not existed : %s &amp;quot;, remote, err.Error())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    defer conn.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if client, err := ssh.Dial(&amp;quot;tcp&amp;quot;, remote, &amp;amp;ssh.ClientConfig&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        User: info[&amp;quot;username&amp;quot;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Auth: []ssh.AuthMethod&amp;#123;ssh.Password(info[&amp;quot;passwd&amp;quot;])&amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;); err == nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        //      p(reflect.TypeOf(client))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        session, err := client.NewSession()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        //    check(err, &amp;quot;new session&amp;quot;,remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                pf(&amp;quot;%s %s error: %v&amp;quot;, err, &amp;quot;new session&amp;quot;, remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        pf(&amp;quot;%s -&amp;gt;(root/%s)&amp;quot;, remote, info[&amp;quot;passwd&amp;quot;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        defer session.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        session.Stdout = os.Stdout&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        session.Stderr = os.Stderr&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        session.Stdin = os.Stdin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        modes := ssh.TerminalModes&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ssh.ECHO:          0,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ssh.TTY_OP_ISPEED: 14400,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ssh.TTY_OP_OSPEED: 14400,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        err = session.RequestPty(&amp;quot;xterm&amp;quot;, 25, 100, modes)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        //    check(err, &amp;quot;request pty&amp;quot;,remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                pf(&amp;quot;%s %s error: %v&amp;quot;, err, &amp;quot;request pty&amp;quot;, remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        err = session.Shell()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        //    check(err, &amp;quot;start shell&amp;quot;,remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                pf(&amp;quot;%s %s error: %v&amp;quot;, err, &amp;quot;start shell&amp;quot;, remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        err = session.Wait()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        //    check(err, &amp;quot;return&amp;quot;,remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                pf(&amp;quot;%s %s error: %v&amp;quot;, err, &amp;quot;return&amp;quot;, remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; else if client, err := ssh.Dial(&amp;quot;tcp&amp;quot;, remote, &amp;amp;ssh.ClientConfig&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        User: info[&amp;quot;username&amp;quot;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Auth: []ssh.AuthMethod&amp;#123;ssh.Password(tmp)&amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;); err == nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        session, err := client.NewSession()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        //    check(err, &amp;quot;new session&amp;quot;,remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                pf(&amp;quot;%s %s error: %v&amp;quot;, err, &amp;quot;new session&amp;quot;, remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        pf(&amp;quot;%s -&amp;gt;(root/%s)&amp;quot;, remote, tmp)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        defer session.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        session.Stdout = os.Stdout&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        session.Stderr = os.Stderr&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        session.Stdin = os.Stdin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        modes := ssh.TerminalModes&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ssh.ECHO:          0,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ssh.TTY_OP_ISPEED: 14400,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ssh.TTY_OP_OSPEED: 14400,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        err = session.RequestPty(&amp;quot;xterm&amp;quot;, 25, 100, modes)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        //    check(err, &amp;quot;request pty&amp;quot;,remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                pf(&amp;quot;%s %s error: %v&amp;quot;, err, &amp;quot;request pty&amp;quot;, remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        err = session.Shell()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        //    check(err, &amp;quot;start shell&amp;quot;,remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                pf(&amp;quot;%s %s error: %v&amp;quot;, err, &amp;quot;start shell&amp;quot;, remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        err = session.Wait()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        //    check(err, &amp;quot;return&amp;quot;,remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                pf(&amp;quot;%s %s error: %v&amp;quot;, err, &amp;quot;return&amp;quot;, remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; else if client, err := ssh.Dial(&amp;quot;tcp&amp;quot;, remote, &amp;amp;ssh.ClientConfig&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        User: info[&amp;quot;username&amp;quot;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Auth: []ssh.AuthMethod&amp;#123;ssh.Password(&amp;quot;******&amp;quot;)&amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;); err == nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        session, err := client.NewSession()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        //    check(err, &amp;quot;new session&amp;quot;,remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                pf(&amp;quot;%s %s error: %v&amp;quot;, err, &amp;quot;new session&amp;quot;, remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        pf(&amp;quot;%s -&amp;gt;(root/%s)&amp;quot;, remote, &amp;quot;******&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        defer session.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        session.Stdout = os.Stdout&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        session.Stderr = os.Stderr&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        session.Stdin = os.Stdin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        modes := ssh.TerminalModes&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ssh.ECHO:          0,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ssh.TTY_OP_ISPEED: 14400,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ssh.TTY_OP_OSPEED: 14400,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        err = session.RequestPty(&amp;quot;xterm&amp;quot;, 25, 100, modes)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        //    check(err, &amp;quot;request pty&amp;quot;,remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                pf(&amp;quot;%s %s error: %v&amp;quot;, err, &amp;quot;request pty&amp;quot;, remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        err = session.Shell()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        //    check(err, &amp;quot;start shell&amp;quot;,remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                pf(&amp;quot;%s %s error: %v&amp;quot;, err, &amp;quot;start shell&amp;quot;, remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        err = session.Wait()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        //    check(err, &amp;quot;return&amp;quot;,remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                pf(&amp;quot;%s %s error: %v&amp;quot;, err, &amp;quot;return&amp;quot;, remote)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        p(&amp;quot;Failed to Login at &amp;quot; + remote + &amp;quot;:error passwd or username! &amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func TerminalStart(info map[string]string) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ips, ip_item := CheckIp(info[&amp;quot;ip&amp;quot;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ports, port_item := CheckPort(info[&amp;quot;port&amp;quot;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    p(&amp;quot;HOST:PORT类型为:&amp;quot;, ip_item, &amp;quot;:&amp;quot;, port_item)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //打印详细ip信息&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        p(&amp;quot;ip_information : &amp;quot;, ips)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        p(&amp;quot;port_information : &amp;quot;, ports)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        p(&amp;quot;如果想打印出详细连接信息，请看main.exe -h&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //  ch :=make(chan int)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //  return ips,ports,info&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for _, ip := range ips &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        for _, port := range ports &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            SshTerminal(ip, port, info)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            //          &amp;lt;- ch&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func TerminalAutoStart(info map[string]string) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ips, ip_item := CheckIp(info[&amp;quot;ip&amp;quot;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ports, port_item := CheckPort(info[&amp;quot;port&amp;quot;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    p(&amp;quot;HOST:PORT类型为:&amp;quot;, ip_item, &amp;quot;:&amp;quot;, port_item)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //打印详细ip信息&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if info[&amp;quot;svar&amp;quot;] == &amp;quot;debug&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        p(&amp;quot;ip_information : &amp;quot;, ips)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        p(&amp;quot;port_information : &amp;quot;, ports)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        p(&amp;quot;如果想打印出详细连接信息，请看main.exe -h&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //  ch :=make(chan int)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //  return ips,ports,info&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for _, ip := range ips &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        for _, port := range ports &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            AutoLoginCheck(ip, port, info)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;代码解析&quot;&gt;&lt;a href=&quot;#代码解析&quot; class=&quot;headerlink&quot; title=&quot;代码解析&quot;&gt;&lt;/a&gt;代码解析&lt;/h2&gt;&lt;h1 id=&quot;多密码验证&quot;&gt;&lt;a href=&quot;#多密码验证&quot; class=&quot;headerlink&quot; title=&quot;多密码验证&quot;&gt;&lt;/a&gt;多密码验证&lt;/h1&gt;&lt;h2 id=&quot;代码-3&quot;&gt;&lt;a href=&quot;#代码-3&quot; class=&quot;headerlink&quot; title=&quot;代码&quot;&gt;&lt;/a&gt;代码&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;135&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;136&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;137&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;138&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;139&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;140&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;141&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;142&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;143&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;144&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;145&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;146&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;147&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;148&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;149&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;150&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;151&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;152&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;153&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;154&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;155&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;156&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;157&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;158&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;159&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;160&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;161&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;162&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;163&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;164&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;165&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;166&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;167&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;168&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;169&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;170&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;171&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;172&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;173&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;174&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;175&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;176&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;177&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;178&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;179&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;180&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;181&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;182&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;183&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;184&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;185&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;186&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;187&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;188&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;189&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;190&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;191&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;193&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;194&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;195&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;196&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;197&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;198&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;199&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;200&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;201&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;202&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;203&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;204&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;205&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;206&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;package mutil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;regexp&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;strings&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;code.google.com/p/go.crypto/ssh&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;net&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;time&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func ParserAutoPasswd(host string,info map[string]string) []string &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var tmp string = &amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ttt :=make([]string,0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//  var results string = &amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//  var result string = &amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//  ch :=make(chan int,1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//  out :=make(chan *ssh.Client,1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    y:=strings.Split(host,&amp;quot;.&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    switch len(y[3]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        case 1:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            tmp = &amp;quot;00&amp;quot;+y[3]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        case 2:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            tmp = &amp;quot;0&amp;quot;+y[3]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        case 3:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            tmp = y[3]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        default:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if strings.Contains(info[&amp;quot;passwd&amp;quot;],&amp;quot;/&amp;quot;) == true &amp;amp;&amp;amp; strings.Contains(info[&amp;quot;passwd&amp;quot;],&amp;quot;,&amp;quot;) == false &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        passwd:=strings.Split(info[&amp;quot;passwd&amp;quot;],&amp;quot;/&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        r:=regexp.MustCompile(passwd[1])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        result := r.ReplaceAllString(passwd[0], tmp)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//      TryConnSSH(host,port,info[&amp;quot;username&amp;quot;],result,info[&amp;quot;svar&amp;quot;],out,ch)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ttt=append(ttt,result)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//      p(host+&amp;quot;-&amp;gt;&amp;quot;+result)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//      results=result&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; else if strings.Contains(info[&amp;quot;passwd&amp;quot;],&amp;quot;,&amp;quot;) == true &amp;amp;&amp;amp; strings.Contains(info[&amp;quot;passwd&amp;quot;],&amp;quot;/&amp;quot;) == false &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        res:=strings.Split(info[&amp;quot;passwd&amp;quot;],&amp;quot;,&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        for _,x:=range res &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ttt=append(ttt,x)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//      p(host+&amp;quot;-&amp;gt;&amp;quot;,ttt,&amp;quot;目前暂不支持多密码选择登录&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; else if strings.Contains(info[&amp;quot;passwd&amp;quot;],&amp;quot;,&amp;quot;) == false &amp;amp;&amp;amp; strings.Contains(info[&amp;quot;passwd&amp;quot;],&amp;quot;/&amp;quot;) == false &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ttt=append(ttt,info[&amp;quot;passwd&amp;quot;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//      p(host+&amp;quot;-&amp;gt;&amp;quot;,ttt)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//      results=info[&amp;quot;passwd&amp;quot;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; else if strings.Contains(info[&amp;quot;passwd&amp;quot;],&amp;quot;,&amp;quot;) == true &amp;amp;&amp;amp; strings.Contains(info[&amp;quot;passwd&amp;quot;],&amp;quot;/&amp;quot;) == true &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        passwd:=strings.Split(info[&amp;quot;passwd&amp;quot;],&amp;quot;,&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        for _,yy :=range passwd &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if strings.Contains(yy,&amp;quot;/&amp;quot;) == true &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                password:=strings.Split(yy,&amp;quot;/&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                rr:=regexp.MustCompile(password[1])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                results := rr.ReplaceAllString(password[0], tmp)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                ttt=append(ttt,results)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                ttt=append(ttt,yy)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//      p(host+&amp;quot;-&amp;gt;&amp;quot;,ttt,&amp;quot;目前暂不支持多密码和正则表达式混合选择登录&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return ttt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func TryConn(host string,port string,username string,passwd string,client *ssh.Client) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        remote = host +&amp;quot;:&amp;quot;+port&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//      client *ssh.Client&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//  tmp :=ConfigAutoPasswd(host,&amp;quot;******&amp;quot;,&amp;quot;([0-9]+)&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    client, err := ssh.Dial(&amp;quot;tcp&amp;quot;, remote, &amp;amp;ssh.ClientConfig&amp;#123;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        User: username,  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Auth: []ssh.AuthMethod&amp;#123;ssh.Password(passwd)&amp;#125;,  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        p(host+&amp;quot;-&amp;gt;&amp;quot;,err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    p(host+&amp;quot;-&amp;gt; ok&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func SshChecks(host string,port string,command string,info map[string]string,ch chan int) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//func SshTest(host string,port string,command string,info map[string]string) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        remote = host + &amp;quot;:&amp;quot; + port&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    tmp := ConfigAutoPasswd(host,&amp;quot;******&amp;quot;,&amp;quot;([0-9]+)&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ch&amp;lt;-1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    conn, err := net.DialTimeout(&amp;quot;tcp&amp;quot;, remote, time.Millisecond * sshTimeOut)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//      check(err,&amp;quot;DialTimeout&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//          p(&amp;quot;DialTimeout: &amp;quot;+remote + err.Error())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    defer conn.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if client, err := ssh.Dial(&amp;quot;tcp&amp;quot;, remote, &amp;amp;ssh.ClientConfig&amp;#123;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        User: info[&amp;quot;username&amp;quot;],  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Auth: []ssh.AuthMethod&amp;#123;ssh.Password(info[&amp;quot;passwd&amp;quot;])&amp;#125;,  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;); err == nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//      p(reflect.TypeOf(client))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        session,err := client.NewSession()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//          p(&amp;quot;Failed to create session: &amp;quot;+remote + err.Error())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        b,err := session.Output(command)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//          p(&amp;quot;Failed to exec command：&amp;quot;+remote+command+err.Error())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        pf(&amp;quot;%s(root/%s) : %s&amp;quot;, remote,info[&amp;quot;passwd&amp;quot;],string(b))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        defer session.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; else if client, err := ssh.Dial(&amp;quot;tcp&amp;quot;, remote, &amp;amp;ssh.ClientConfig&amp;#123;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        User: info[&amp;quot;username&amp;quot;],  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Auth: []ssh.AuthMethod&amp;#123;ssh.Password(tmp)&amp;#125;,  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;); err == nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        session,err := client.NewSession()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//          p(&amp;quot;Failed to create session: &amp;quot;+remote + err.Error())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        b,err := session.Output(command)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//          p(&amp;quot;Failed to exec command：&amp;quot;+remote+command+err.Error())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        pf(&amp;quot;%s(root/%s) : %s&amp;quot;, remote,tmp,string(b))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        defer session.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; else if client, err := ssh.Dial(&amp;quot;tcp&amp;quot;, remote, &amp;amp;ssh.ClientConfig&amp;#123;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        User: info[&amp;quot;username&amp;quot;],  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Auth: []ssh.AuthMethod&amp;#123;ssh.Password(&amp;quot;******&amp;quot;)&amp;#125;,  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;); err == nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        session,err := client.NewSession()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//          p(&amp;quot;Failed to create session: &amp;quot;+remote + err.Error())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        b,err := session.Output(command)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if err != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//          p(&amp;quot;Failed to exec command：&amp;quot;+remote+command+err.Error())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        pf(&amp;quot;%s(root/%s) : %s&amp;quot;, remote,&amp;quot;******&amp;quot;,string(b))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        defer session.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        p(&amp;quot;Failed to Login at &amp;quot;+remote+&amp;quot;:error passwd or username! &amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func ConfigAutoPasswd(host string,rule string,reg string) string &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var tmp string = &amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    y:=strings.Split(host,&amp;quot;.&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    switch len(y[3]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        case 1:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            tmp = &amp;quot;00&amp;quot;+y[3]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        case 2:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            tmp = &amp;quot;0&amp;quot;+y[3]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        case 3:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            tmp = y[3]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        default:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//      r:=regexp.MustCompile(&amp;quot;([0-9]+)&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    r:=regexp.MustCompile(reg)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//      return r.ReplaceAllString(&amp;quot;******&amp;quot;, tmp)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    result := r.ReplaceAllString(rule, tmp)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return result       &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func TryConnSSH(host string,port string,username string,passwd string,info string,out chan *ssh.Client,over chan int) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        remote = host +&amp;quot;:&amp;quot;+port&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//  tmp :=ConfigAutoPasswd(host,&amp;quot;******&amp;quot;,&amp;quot;([0-9]+)&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if client, err := ssh.Dial(&amp;quot;tcp&amp;quot;, remote, &amp;amp;ssh.ClientConfig&amp;#123;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        User: username,  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Auth: []ssh.AuthMethod&amp;#123;ssh.Password(passwd)&amp;#125;,  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;); err == nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        out &amp;lt;- client&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        over &amp;lt;- 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; else if client, err := ssh.Dial(&amp;quot;tcp&amp;quot;, remote, &amp;amp;ssh.ClientConfig&amp;#123;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        User: username,  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Auth: []ssh.AuthMethod&amp;#123;ssh.Password(passwd)&amp;#125;,  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;); err != nil || info == &amp;quot;detail&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        p(&amp;quot;Failed to dial: &amp;quot;+remote + err.Error())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        out &amp;lt;- client&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        over &amp;lt;- 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//  panic(&amp;quot;&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;代码分析-3&quot;&gt;&lt;a href=&quot;#代码分析-3&quot; class=&quot;headerlink&quot; title=&quot;代码分析&quot;&gt;&lt;/a&gt;代码分析&lt;/h2&gt;</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;IP解析&quot;&gt;&lt;a href=&quot;#IP解析&quot; class=&quot;headerlink&quot; title=&quot;IP解析&quot;&gt;&lt;/a&gt;IP解析&lt;/h1&gt;&lt;h2 id=&quot;该端代码是我自己写的ip扫描的一部分，后续会写上更多代码&quot;&gt;&lt;a href=&quot;#该端代码是我自己写的ip扫描的一部分，后续会写上更多代码&quot; class=&quot;headerlink&quot; title=&quot;该端代码是我自己写的ip扫描的一部分，后续会写上更多代码&quot;&gt;&lt;/a&gt;该端代码是我自己写的ip扫描的一部分，后续会写上更多代码&lt;/h2&gt;
    
    </summary>
    
      <category term="golang" scheme="http://www.lflxp.cn/categories/golang/"/>
    
    
      <category term="golang" scheme="http://www.lflxp.cn/tags/golang/"/>
    
  </entry>
  
  <entry>
    <title>Golang实现莫尔斯代码转换</title>
    <link href="http://www.lflxp.cn/2016/04/09/2016-04-09-%E4%B8%AD%E6%96%87%E8%8E%AB%E5%B0%94%E6%96%AF%E4%BB%A3%E7%A0%81%E5%8A%A0%E8%A7%A3%E5%AF%86/"/>
    <id>http://www.lflxp.cn/2016/04/09/2016-04-09-中文莫尔斯代码加解密/</id>
    <published>2016-04-09T08:56:36.850Z</published>
    <updated>2016-04-09T10:48:41.743Z</updated>
    
    <content type="html">&lt;h1 id=&quot;用Golang的字典完成莫尔斯代码的转换&quot;&gt;&lt;a href=&quot;#用Golang的字典完成莫尔斯代码的转换&quot; class=&quot;headerlink&quot; title=&quot;用Golang的字典完成莫尔斯代码的转换&quot;&gt;&lt;/a&gt;用Golang的字典完成莫尔斯代码的转换&lt;/h1&gt;&lt;p&gt;基于学习的目的编写代码加密解密的小工具&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;135&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;136&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;137&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;138&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;139&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;140&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;141&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;142&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;143&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;144&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;145&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;146&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;147&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;148&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;149&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;150&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;151&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;152&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;153&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;154&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;155&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;156&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;157&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;158&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;159&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;160&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;161&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;162&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;163&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;164&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;165&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;166&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;167&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;168&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;169&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;170&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;171&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;172&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;173&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;174&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;175&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;176&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;177&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;178&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;179&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;180&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;181&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;182&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;183&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;184&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;185&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;186&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;187&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;188&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;189&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;190&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;191&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;193&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;194&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;195&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;196&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;197&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;198&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;199&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;200&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;201&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;202&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;203&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;204&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;205&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;206&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;207&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;208&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;209&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;210&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;211&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;212&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;213&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;214&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;215&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;216&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;217&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;218&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;package main&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;bufio&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;fmt&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;os&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;runtime&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;strconv&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;strings&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;time&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var mapString map[string]string = map[string]string&amp;#123;&amp;quot;a&amp;quot;: &amp;quot;.-&amp;quot;, &amp;quot;b&amp;quot;: &amp;quot;-...&amp;quot;, &amp;quot;c&amp;quot;: &amp;quot;-.-.&amp;quot;, &amp;quot;d&amp;quot;: &amp;quot;-..&amp;quot;, &amp;quot;e&amp;quot;: &amp;quot;.&amp;quot;, &amp;quot;f&amp;quot;: &amp;quot;..-.&amp;quot;, &amp;quot;g&amp;quot;: &amp;quot;--.&amp;quot;, &amp;quot;h&amp;quot;: &amp;quot;....&amp;quot;, &amp;quot;i&amp;quot;: &amp;quot;..&amp;quot;, &amp;quot;j&amp;quot;: &amp;quot;.---&amp;quot;, &amp;quot;k&amp;quot;: &amp;quot;-.-&amp;quot;, &amp;quot;l&amp;quot;: &amp;quot;.-..&amp;quot;, &amp;quot;m&amp;quot;: &amp;quot;--&amp;quot;, &amp;quot;n&amp;quot;: &amp;quot;-.&amp;quot;, &amp;quot;o&amp;quot;: &amp;quot;---&amp;quot;, &amp;quot;p&amp;quot;: &amp;quot;.--.&amp;quot;, &amp;quot;q&amp;quot;: &amp;quot;--.-&amp;quot;, &amp;quot;r&amp;quot;: &amp;quot;.-.&amp;quot;, &amp;quot;s&amp;quot;: &amp;quot;...&amp;quot;, &amp;quot;t&amp;quot;: &amp;quot;-&amp;quot;, &amp;quot;u&amp;quot;: &amp;quot;..-&amp;quot;, &amp;quot;v&amp;quot;: &amp;quot;...-&amp;quot;, &amp;quot;w&amp;quot;: &amp;quot;.--&amp;quot;, &amp;quot;x&amp;quot;: &amp;quot;-..-&amp;quot;, &amp;quot;y&amp;quot;: &amp;quot;-.--&amp;quot;, &amp;quot;z&amp;quot;: &amp;quot;--..&amp;quot;, &amp;quot;(&amp;quot;: &amp;quot;-.--.&amp;quot;, &amp;quot;)&amp;quot;: &amp;quot;-.--.-&amp;quot;, &amp;quot;-&amp;quot;: &amp;quot;-....-&amp;quot;, &amp;quot;1&amp;quot;: &amp;quot;.----&amp;quot;, &amp;quot;2&amp;quot;: &amp;quot;..---&amp;quot;, &amp;quot;3&amp;quot;: &amp;quot;...--&amp;quot;, &amp;quot;4&amp;quot;: &amp;quot;....-&amp;quot;, &amp;quot;5&amp;quot;: &amp;quot;.....&amp;quot;, &amp;quot;6&amp;quot;: &amp;quot;-....&amp;quot;, &amp;quot;7&amp;quot;: &amp;quot;--...&amp;quot;, &amp;quot;8&amp;quot;: &amp;quot;---..&amp;quot;, &amp;quot;9&amp;quot;: &amp;quot;----.&amp;quot;, &amp;quot;0&amp;quot;: &amp;quot;-----&amp;quot;, &amp;quot;?&amp;quot;: &amp;quot;..--..&amp;quot;, &amp;quot;/&amp;quot;: &amp;quot;-..-.&amp;quot;, &amp;quot;.&amp;quot;: &amp;quot;.-.-.-&amp;quot;, &amp;quot;@&amp;quot;: &amp;quot;.--.-.&amp;quot;, &amp;quot;:&amp;quot;: &amp;quot;---...&amp;quot;, &amp;quot;,&amp;quot;: &amp;quot;--..--&amp;quot;, &amp;quot;;&amp;quot;: &amp;quot;-.-.-.&amp;quot;, &amp;quot;=&amp;quot;: &amp;quot;-...-&amp;quot;, &amp;quot;&amp;apos;&amp;quot;: &amp;quot;.---.&amp;quot;, &amp;quot;!&amp;quot;: &amp;quot;-.-.--&amp;quot;, &amp;quot;_&amp;quot;: &amp;quot;..--.-&amp;quot;, &amp;quot;\&amp;quot;&amp;quot;: &amp;quot;.-..-.&amp;quot;, &amp;quot;$&amp;quot;: &amp;quot;...-.-&amp;quot;, &amp;quot;&amp;amp;&amp;quot;: &amp;quot;.-...&amp;quot;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func main() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    runtime.GOMAXPROCS(runtime.NumCPU())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    scanner := bufio.NewScanner(os.Stdin)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fmt.Printf(&amp;quot;莫尔斯密码加密输入1，解密输入2，加密文件输入3，解密文件输入4:&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for scanner.Scan() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        switch scanner.Text() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        case &amp;quot;1&amp;quot;, &amp;quot;Y&amp;quot;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            inputReaders := bufio.NewReader(os.Stdin)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            fmt.Printf(&amp;quot;请输入需要加密的内容:&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            inputs, errs := inputReaders.ReadString(&amp;apos;\n&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            if errs != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                fmt.Println(&amp;quot;输入错误 %s&amp;quot;, errs)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                return&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            input_lower := strings.ToLower(inputs)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            var result string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            //将字符串转换为unicode数组 然后将unicode数组转换为莫尔斯代码&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            result = unicodeOrMap(charToInt(input_lower))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            fmt.Printf(&amp;quot;【源码】: %s【转译】: %s\n&amp;quot;, inputs, result)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            fmt.Printf(&amp;quot;莫尔斯密码【继续】加密输入1，解密输入2，加密文件输入3，解密文件输入4:&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        case &amp;quot;2&amp;quot;, &amp;quot;N&amp;quot;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            scanner := bufio.NewScanner(os.Stdin)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            fmt.Printf(&amp;quot;请输入需要解密的内容:&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            var result string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            for scanner.Scan() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                if scanner.Text() == &amp;quot;exit&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    fmt.Println(&amp;quot;退出！&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    os.Exit(1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                result = parseMorse(scanner.Text())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                fmt.Printf(&amp;quot;【源码】 %s\n【转译】 %s\n&amp;quot;, scanner.Text(), result)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                fmt.Printf(&amp;quot;莫尔斯密码【继续】加密输入1，解密输入2，加密文件输入3，解密文件输入4:&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                break&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        case &amp;quot;3&amp;quot;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            var path_file string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            var path_save string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            fmt.Printf(&amp;quot;请输入需要加密的文件路径:&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            fmt.Scanln(&amp;amp;path_file)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            fmt.Printf(&amp;quot;请输入加密文件保存路径:&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            fmt.Scanln(&amp;amp;path_save)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            //统计字符&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            count := 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            //处理行数&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            rows := 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            //创建文件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            f1, err1 := os.Create(path_save)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            check(err1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            defer f1.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            //打开文件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            f, err := os.OpenFile(path_file, os.O_RDONLY, 0660)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            check(err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            defer f.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // file := ioutil.ReadAll(f)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            file := bufio.NewScanner(f)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // detail, _ := file.ReadString(&amp;apos;\n&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            //逐行转码&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            for file.Scan() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                detail := strings.ToLower(file.Text())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                //转码&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                mores := unicodeOrMap(charToInt(detail))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                n1, err2 := f1.WriteString(mores)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                check(err2)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                count += n1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                rows++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                if rows%100 == 0 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    fmt.Printf(&amp;quot;%s:已处理 %d 行\n&amp;quot;, time.Now().Format(&amp;quot;2006-01-02 15:04:05&amp;quot;), rows)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // f1.Sync()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // //写入文件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // w := bufio.ReadWriter(f1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // n4, err2 := w.WriteString(mores)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            fmt.Printf(&amp;quot;数据加密成功 %d 行 共计处理 %d 字节，文件保存在 %s\n&amp;quot;, rows, count, path_save)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            fmt.Printf(&amp;quot;莫尔斯密码【继续】加密输入1，解密输入2，加密文件输入3，解密文件输入4:&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            break&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        case &amp;quot;4&amp;quot;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            var path_file string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            var path_save string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            fmt.Printf(&amp;quot;请输入需要解密的文件路径:&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            fmt.Scanln(&amp;amp;path_file)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            fmt.Printf(&amp;quot;请输入解密文件保存路径:&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            fmt.Scanln(&amp;amp;path_save)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            //统计字符&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            count := 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            //处理行数&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            rows := 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            //创建文件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            f1, err1 := os.Create(path_save)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            check(err1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            defer f1.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            //打开文件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            f, err := os.OpenFile(path_file, os.O_RDONLY, 0660)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            check(err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            defer f.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // file := ioutil.ReadAll(f)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            file := bufio.NewScanner(f)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // detail, _ := file.ReadString(&amp;apos;\n&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            //循环转码&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            for file.Scan() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                mores := parseMorse(file.Text())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                n1, err2 := f1.WriteString(mores)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                check(err2)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                count += n1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                rows++&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                if rows%100 == 0 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    fmt.Printf(&amp;quot;%s:已处理 %d 行\n&amp;quot;, time.Now().Format(&amp;quot;2006-01-02 15:04:05&amp;quot;), rows)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // f1.Sync()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // //写入文件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // w := bufio.ReadWriter(f1)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // n4, err2 := w.WriteString(mores)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            fmt.Printf(&amp;quot;数据解密成功 %d 行 共计处理 %d 字节，文件保存在 %s\n&amp;quot;, rows, count, path_save)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            fmt.Printf(&amp;quot;莫尔斯密码【继续】加密输入1，解密输入2，加密文件输入3，解密文件输入4:&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            break&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        case &amp;quot;exit&amp;quot;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            fmt.Println(&amp;quot;退出程序！&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            os.Exit(0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        default:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            fmt.Printf(&amp;quot;莫尔斯密码【继续】加密输入1，解密输入2，加密文件输入3，解密文件输入4:&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            break&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func check(e error) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if e != nil &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        panic(e)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//unicode转换成莫尔斯代码&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func unicodeOrMap(in []int) string &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    //匹配中文 英语字母 或者标点符号&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var result string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for _, value := range in &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if mapString[string(value)] != &amp;quot;&amp;quot; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            result += mapString[string(value)] + &amp;quot; &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            //当是中文时&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            tmp_china := strconv.Itoa(value)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            for _, v := range tmp_china &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                // fmt.Println(string(v))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                result += mapString[string(v)]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            result += &amp;quot; &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return result + &amp;quot;\n&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//莫尔斯代码 解密 明文&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func parseMorse(in string) string &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    substrs := strings.Split(in, &amp;quot; &amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    length := len(mapString)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    tmpString := make(map[string]string, length)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for k, v := range mapString &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        tmpString[v] = k&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var result string = &amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for _, value := range substrs &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if len(value) == 25 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            one := tmpString[value[0:5]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            two := tmpString[value[5:10]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            three := tmpString[value[10:15]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            four := tmpString[value[15:20]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            five := tmpString[value[20:25]]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            tmp := one + two + three + four + five&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            values_tmp, _ := strconv.Atoi(tmp)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            result += string(values_tmp)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            result += tmpString[value] + &amp;quot; &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return result + &amp;quot;\n&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//中文|英文字符串翻译成unicode格式&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func charToInt(in string) []int &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    tmp := []rune(in)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    result := make([]int, len(tmp))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for i := 0; i &amp;lt; len(tmp); i++ &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        result[i] = int(tmp[i])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return result&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;用Golang的字典完成莫尔斯代码的转换&quot;&gt;&lt;a href=&quot;#用Golang的字典完成莫尔斯代码的转换&quot; class=&quot;headerlink&quot; title=&quot;用Golang的字典完成莫尔斯代码的转换&quot;&gt;&lt;/a&gt;用Golang的字典完成莫尔斯代码的转换&lt;/h1&gt;&lt;p&gt;基于学习的目的编写代码加密解密的小工具&lt;br&gt;
    
    </summary>
    
      <category term="golang" scheme="http://www.lflxp.cn/categories/golang/"/>
    
    
      <category term="golang" scheme="http://www.lflxp.cn/tags/golang/"/>
    
  </entry>
  
  <entry>
    <title>python生成exe可执行文件:py2exe</title>
    <link href="http://www.lflxp.cn/2016/04/09/2016-04-09-py2exe%E4%BD%BF%E7%94%A8/"/>
    <id>http://www.lflxp.cn/2016/04/09/2016-04-09-py2exe使用/</id>
    <published>2016-04-09T08:36:36.704Z</published>
    <updated>2016-04-09T08:54:34.909Z</updated>
    
    <content type="html">&lt;h1 id=&quot;python生成可执行文件exe&quot;&gt;&lt;a href=&quot;#python生成可执行文件exe&quot; class=&quot;headerlink&quot; title=&quot;python生成可执行文件exe&quot;&gt;&lt;/a&gt;python生成可执行文件exe&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;用py2exe生成windows可执行文件&lt;br&gt;&lt;a href=&quot;https://sourceforge.net/projects/py2exe/files/py2exe/0.6.9/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;py2exe安装地址&lt;/a&gt;下载32位python2.7进行安装&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;第一步-编写python脚本hello-py&quot;&gt;&lt;a href=&quot;#第一步-编写python脚本hello-py&quot; class=&quot;headerlink&quot; title=&quot;第一步 编写python脚本hello.py&quot;&gt;&lt;/a&gt;第一步 编写python脚本hello.py&lt;/h1&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;print &amp;quot;hello&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;raw_input()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;第二步-可以在任何路径任何位置新建一个名为setup-py的文件，这里把setup-py建在e盘根目录&quot;&gt;&lt;a href=&quot;#第二步-可以在任何路径任何位置新建一个名为setup-py的文件，这里把setup-py建在e盘根目录&quot; class=&quot;headerlink&quot; title=&quot;第二步 可以在任何路径任何位置新建一个名为setup.py的文件，这里把setup.py建在e盘根目录&quot;&gt;&lt;/a&gt;第二步 可以在任何路径任何位置新建一个名为setup.py的文件，这里把setup.py建在e盘根目录&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;setup.py代码如下&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;from distutils.core import setup&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import py2exe&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;setup(console=[r&amp;apos;e:/gopath/src/encry/main/hello.py&amp;apos;])&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;第三步-打开命令提示符-cmd-。&quot;&gt;&lt;a href=&quot;#第三步-打开命令提示符-cmd-。&quot; class=&quot;headerlink&quot; title=&quot;第三步 打开命令提示符(cmd)。&quot;&gt;&lt;/a&gt;第三步 打开命令提示符(cmd)。&lt;/h1&gt;&lt;p&gt;注意：不是python解析器，看到网上很多人都把其理解为python解析器，注意：python解析器！！！是cmd&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;进入setup.py目录下执行以下命令&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ python setup.py py2exe&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;执行结果大体如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;creating D:\gopath\src\encry\main\build\bdist.win32\winexe\collect-2.7\unittest&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;byte-compiling D:\Python27\lib\unittest\case.py to unittest\case.pyc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;byte-compiling D:\Python27\lib\unittest\loader.py to unittest\loader.pyc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;byte-compiling D:\Python27\lib\unittest\main.py to unittest\main.pyc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;byte-compiling D:\Python27\lib\unittest\result.py to unittest\result.pyc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;byte-compiling D:\Python27\lib\unittest\runner.py to unittest\runner.pyc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;byte-compiling D:\Python27\lib\unittest\signals.py to unittest\signals.pyc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;byte-compiling D:\Python27\lib\unittest\suite.py to unittest\suite.pyc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;byte-compiling D:\Python27\lib\unittest\util.py to unittest\util.pyc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;byte-compiling D:\Python27\lib\warnings.py to warnings.pyc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;byte-compiling D:\Python27\lib\weakref.py to weakref.pyc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;byte-compiling D:\gopath\src\encry\main\build\bdist.win32\winexe\temp\_ctypes.py to _ctypes.pyc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;byte-compiling D:\gopath\src\encry\main\build\bdist.win32\winexe\temp\_hashlib.py to _hashlib.pyc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;byte-compiling D:\gopath\src\encry\main\build\bdist.win32\winexe\temp\bz2.py to bz2.pyc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;byte-compiling D:\gopath\src\encry\main\build\bdist.win32\winexe\temp\select.py to select.pyc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;byte-compiling D:\gopath\src\encry\main\build\bdist.win32\winexe\temp\unicodedata.py to unicodedata.pyc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*** copy extensions ***&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;copying D:\Python27\DLLs\_ctypes.pyd -&amp;gt; D:\gopath\src\encry\main\dist&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;copying D:\Python27\DLLs\_hashlib.pyd -&amp;gt; D:\gopath\src\encry\main\dist&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;copying D:\Python27\DLLs\bz2.pyd -&amp;gt; D:\gopath\src\encry\main\dist&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;copying D:\Python27\DLLs\select.pyd -&amp;gt; D:\gopath\src\encry\main\dist&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;copying D:\Python27\DLLs\unicodedata.pyd -&amp;gt; D:\gopath\src\encry\main\dist&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*** copy dlls ***&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;copying D:\Python27\w9xpopen.exe -&amp;gt; D:\gopath\src\encry\main\dist&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;copying C:\WINDOWS\system32\python27.dll -&amp;gt; D:\gopath\src\encry\main\dist&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;setting sys.winver for &amp;apos;D:\gopath\src\encry\main\dist\python27.dll&amp;apos; to &amp;apos;py2exe&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;copying D:\Python27\lib\site-packages\py2exe\run.exe -&amp;gt; D:\gopath\src\encry\main\dist\jiajie.exe&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*** binary dependencies ***&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Your executable(s) also depend on these dlls which are not included,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;you may or may not need to distribute them.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Make sure you have the license if you distribute any of them, and&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make sure you don&amp;apos;t distribute files belonging to the operating system.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   OLEAUT32.dll - C:\WINDOWS\system32\OLEAUT32.dll&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   USER32.dll - C:\WINDOWS\system32\USER32.dll&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   SHELL32.dll - C:\WINDOWS\system32\SHELL32.dll&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   ole32.dll - C:\WINDOWS\system32\ole32.dll&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   ADVAPI32.dll - C:\WINDOWS\system32\ADVAPI32.dll&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   WS2_32.dll - C:\WINDOWS\system32\WS2_32.dll&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   GDI32.dll - C:\WINDOWS\system32\GDI32.dll&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   KERNEL32.dll - C:\WINDOWS\system32\KERNEL32.dll&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;D:\gopath\src\encry\main&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;第四步-去setup-py目录下看是否生成了名为dist的文件夹&quot;&gt;&lt;a href=&quot;#第四步-去setup-py目录下看是否生成了名为dist的文件夹&quot; class=&quot;headerlink&quot; title=&quot;第四步 去setup.py目录下看是否生成了名为dist的文件夹&quot;&gt;&lt;/a&gt;第四步 去setup.py目录下看是否生成了名为dist的文件夹&lt;/h1&gt;&lt;font color=&quot;red&quot;&gt;进入文件夹dist，点击hello.exe就可以运行你打包的程序了。&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;red&quot;&gt;而dist文件夹就是你打包好的程序文件夹，记住，发布的时候要把里面的所有文件都一同发布！！！&lt;/font&gt;</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;python生成可执行文件exe&quot;&gt;&lt;a href=&quot;#python生成可执行文件exe&quot; class=&quot;headerlink&quot; title=&quot;python生成可执行文件exe&quot;&gt;&lt;/a&gt;python生成可执行文件exe&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;用
    
    </summary>
    
      <category term="python" scheme="http://www.lflxp.cn/categories/python/"/>
    
    
      <category term="python" scheme="http://www.lflxp.cn/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>python实现终端带颜色显示</title>
    <link href="http://www.lflxp.cn/2016/04/09/2016-04-09-%E5%B8%A6%E9%A2%9C%E8%89%B2%E7%9A%84%E7%BB%88%E7%AB%AF%E6%98%BE%E7%A4%BA/"/>
    <id>http://www.lflxp.cn/2016/04/09/2016-04-09-带颜色的终端显示/</id>
    <published>2016-04-09T08:22:56.966Z</published>
    <updated>2016-04-09T10:48:29.056Z</updated>
    
    <content type="html">&lt;h1 id=&quot;python制作可执行小工具必备终端显示&quot;&gt;&lt;a href=&quot;#python制作可执行小工具必备终端显示&quot; class=&quot;headerlink&quot; title=&quot;python制作可执行小工具必备终端显示&quot;&gt;&lt;/a&gt;&lt;font color=&quot;red&quot;&gt;python制作可执行小工具必备终端显示&lt;/font&gt;&lt;/h1&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;135&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;136&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;137&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;138&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;139&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;140&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;141&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;142&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;143&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;144&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;145&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;146&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;147&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;148&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;149&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;150&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;151&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;152&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;153&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;154&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;155&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;156&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;157&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;158&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;159&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;160&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;161&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;162&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;163&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;164&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;165&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;166&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;167&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;168&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;169&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;170&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;171&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;172&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;173&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;174&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;175&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;176&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;177&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;178&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;179&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;180&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;181&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;182&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;183&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;184&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;185&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;186&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;187&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;188&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;189&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;190&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;191&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;193&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;194&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;195&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;196&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;197&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;198&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;199&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;200&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;201&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;202&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;203&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;204&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;205&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;206&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;207&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;208&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;209&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;210&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;211&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;212&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;213&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;214&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;215&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;216&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;217&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#! /usr/bin/env python&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#coding=utf-8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import ctypes,sys&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;STD_INPUT_HANDLE = -10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;STD_OUTPUT_HANDLE = -11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;STD_ERROR_HANDLE = -12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# 字体颜色定义 ,关键在于颜色编码，由2位十六进制组成，分别取0~f，前一位指的是背景色，后一位指的是字体色&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#由于该函数的限制，应该是只有这16种，可以前景色与背景色组合。也可以几种颜色通过或运算组合，组合后还是在这16种颜色中&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Windows CMD命令行 字体颜色定义 text colors&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FOREGROUND_BLACK = 0x00 # black.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FOREGROUND_DARKBLUE = 0x01 # dark blue.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FOREGROUND_DARKGREEN = 0x02 # dark green.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FOREGROUND_DARKSKYBLUE = 0x03 # dark skyblue.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FOREGROUND_DARKRED = 0x04 # dark red.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FOREGROUND_DARKPINK = 0x05 # dark pink.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FOREGROUND_DARKYELLOW = 0x06 # dark yellow.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FOREGROUND_DARKWHITE = 0x07 # dark white.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FOREGROUND_DARKGRAY = 0x08 # dark gray.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FOREGROUND_BLUE = 0x09 # blue.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FOREGROUND_GREEN = 0x0a # green.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FOREGROUND_SKYBLUE = 0x0b # skyblue.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FOREGROUND_RED = 0x0c # red.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FOREGROUND_PINK = 0x0d # pink.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FOREGROUND_YELLOW = 0x0e # yellow.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FOREGROUND_WHITE = 0x0f # white.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Windows CMD命令行 背景颜色定义 background colors&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BACKGROUND_BLUE = 0x10 # dark blue.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BACKGROUND_GREEN = 0x20 # dark green.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BACKGROUND_DARKSKYBLUE = 0x30 # dark skyblue.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BACKGROUND_DARKRED = 0x40 # dark red.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BACKGROUND_DARKPINK = 0x50 # dark pink.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BACKGROUND_DARKYELLOW = 0x60 # dark yellow.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BACKGROUND_DARKWHITE = 0x70 # dark white.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BACKGROUND_DARKGRAY = 0x80 # dark gray.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BACKGROUND_BLUE = 0x90 # blue.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BACKGROUND_GREEN = 0xa0 # green.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BACKGROUND_SKYBLUE = 0xb0 # skyblue.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BACKGROUND_RED = 0xc0 # red.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BACKGROUND_PINK = 0xd0 # pink.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BACKGROUND_YELLOW = 0xe0 # yellow.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BACKGROUND_WHITE = 0xf0 # white.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# get handle&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;std_out_handle = ctypes.windll.kernel32.GetStdHandle(STD_OUTPUT_HANDLE)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;def set_cmd_text_color(color, handle=std_out_handle):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Bool = ctypes.windll.kernel32.SetConsoleTextAttribute(handle, color)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return Bool&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#reset white&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;def resetColor():&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    set_cmd_text_color(FOREGROUND_RED | FOREGROUND_GREEN | FOREGROUND_BLUE)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;###############################################################&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#暗蓝色&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#dark blue&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;def printDarkBlue(mess):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    set_cmd_text_color(FOREGROUND_DARKBLUE)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sys.stdout.write(mess)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    resetColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#暗绿色&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#dark green&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;def printDarkGreen(mess):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    set_cmd_text_color(FOREGROUND_DARKGREEN)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sys.stdout.write(mess)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    resetColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#暗天蓝色&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#dark sky blue&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;def printDarkSkyBlue(mess):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    set_cmd_text_color(FOREGROUND_DARKSKYBLUE)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sys.stdout.write(mess)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    resetColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#暗红色&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#dark red&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;def printDarkRed(mess):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    set_cmd_text_color(FOREGROUND_DARKRED)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sys.stdout.write(mess)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    resetColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#暗粉红色&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#dark pink&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;def printDarkPink(mess):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    set_cmd_text_color(FOREGROUND_DARKPINK)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sys.stdout.write(mess)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    resetColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#暗黄色&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#dark yellow&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;def printDarkYellow(mess):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    set_cmd_text_color(FOREGROUND_DARKYELLOW)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sys.stdout.write(mess)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    resetColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#暗白色&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#dark white&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;def printDarkWhite(mess):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    set_cmd_text_color(FOREGROUND_DARKWHITE)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sys.stdout.write(mess)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    resetColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#暗灰色&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#dark gray&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;def printDarkGray(mess):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    set_cmd_text_color(FOREGROUND_DARKGRAY)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sys.stdout.write(mess)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    resetColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#蓝色&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#blue&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;def printBlue(mess):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    set_cmd_text_color(FOREGROUND_BLUE)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sys.stdout.write(mess)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    resetColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#绿色&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#green&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;def printGreen(mess):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    set_cmd_text_color(FOREGROUND_GREEN)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sys.stdout.write(mess)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    resetColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#天蓝色&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#sky blue&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;def printSkyBlue(mess):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    set_cmd_text_color(FOREGROUND_SKYBLUE)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sys.stdout.write(mess)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    resetColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#红色&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#red&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;def printRed(mess):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    set_cmd_text_color(FOREGROUND_RED)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sys.stdout.write(mess)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    resetColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#粉红色&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#pink&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;def printPink(mess):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    set_cmd_text_color(FOREGROUND_PINK)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sys.stdout.write(mess)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    resetColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#黄色&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#yellow&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;def printYellow(mess):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    set_cmd_text_color(FOREGROUND_YELLOW)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sys.stdout.write(mess)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    resetColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#白色&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#white&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;def printWhite(mess):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    set_cmd_text_color(FOREGROUND_WHITE)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sys.stdout.write(mess)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    resetColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;##################################################&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#白底黑字&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#white bkground and black text&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;def printWhiteBlack(mess):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    set_cmd_text_color(FOREGROUND_BLACK | BACKGROUND_WHITE)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sys.stdout.write(mess)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    resetColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#白底黑字&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#white bkground and black text&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;def printWhiteBlack_2(mess):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    set_cmd_text_color(0xf0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sys.stdout.write(mess)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    resetColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#黄底蓝字&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#white bkground and black text&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;def printYellowRed(mess):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    set_cmd_text_color(BACKGROUND_YELLOW | FOREGROUND_RED)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sys.stdout.write(mess)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    resetColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;##############################################################&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;if __name__ == &amp;apos;__main__&amp;apos;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    print&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    printDarkBlue(u&amp;apos;printDarkBlue:暗蓝色文字\n&amp;apos;.encode(&amp;apos;gb2312&amp;apos;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    printDarkGreen(u&amp;apos;printDarkGreen:暗绿色文字\n&amp;apos;.encode(&amp;apos;gb2312&amp;apos;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    printDarkSkyBlue(u&amp;apos;printDarkSkyBlue:暗天蓝色文字\n&amp;apos;.encode(&amp;apos;gb2312&amp;apos;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    printDarkRed(u&amp;apos;printDarkRed:暗红色文字\n&amp;apos;.encode(&amp;apos;gb2312&amp;apos;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    printDarkPink(u&amp;apos;printDarkPink:暗粉红色文字\n&amp;apos;.encode(&amp;apos;gb2312&amp;apos;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    printDarkYellow(u&amp;apos;printDarkYellow:暗黄色文字\n&amp;apos;.encode(&amp;apos;gb2312&amp;apos;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    printDarkWhite(u&amp;apos;printDarkWhite:暗白色文字\n&amp;apos;.encode(&amp;apos;gb2312&amp;apos;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    printDarkGray(u&amp;apos;printDarkGray:暗灰色文字\n&amp;apos;.encode(&amp;apos;gb2312&amp;apos;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    printBlue(u&amp;apos;printBlue:蓝色文字\n&amp;apos;.encode(&amp;apos;gb2312&amp;apos;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    printGreen(u&amp;apos;printGreen:绿色文字\n&amp;apos;.encode(&amp;apos;gb2312&amp;apos;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    printSkyBlue(u&amp;apos;printSkyBlue:天蓝色文字\n&amp;apos;.encode(&amp;apos;gb2312&amp;apos;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    printRed(u&amp;apos;printRed:红色文字\n&amp;apos;.encode(&amp;apos;gb2312&amp;apos;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    printPink(u&amp;apos;printPink:粉红色文字\n&amp;apos;.encode(&amp;apos;gb2312&amp;apos;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    printYellow(u&amp;apos;printYellow:黄色文字\n&amp;apos;.encode(&amp;apos;gb2312&amp;apos;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    printWhite(u&amp;apos;printWhite:白色文字\n&amp;apos;.encode(&amp;apos;gb2312&amp;apos;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    printWhiteBlack(u&amp;apos;printWhiteBlack:白底黑字输出\n&amp;apos;.encode(&amp;apos;gb2312&amp;apos;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    printWhiteBlack_2(u&amp;apos;printWhiteBlack_2:白底黑字输出（直接传入16进制参数）\n&amp;apos;.encode(&amp;apos;gb2312&amp;apos;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    printYellowRed(u&amp;apos;printYellowRed:黄底红字输出\n&amp;apos;.encode(&amp;apos;gb2312&amp;apos;))&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;python制作可执行小工具必备终端显示&quot;&gt;&lt;a href=&quot;#python制作可执行小工具必备终端显示&quot; class=&quot;headerlink&quot; title=&quot;python制作可执行小工具必备终端显示&quot;&gt;&lt;/a&gt;&lt;font color=&quot;red&quot;&gt;python制作可执行小工具必备终端显示&lt;/font&gt;&lt;/h1&gt;
    
    </summary>
    
      <category term="python" scheme="http://www.lflxp.cn/categories/python/"/>
    
    
      <category term="python" scheme="http://www.lflxp.cn/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>Golang实现任意进制转换</title>
    <link href="http://www.lflxp.cn/2016/04/09/2016-04-09-%E4%BB%BB%E6%84%8F%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2/"/>
    <id>http://www.lflxp.cn/2016/04/09/2016-04-09-任意进制转换/</id>
    <published>2016-04-09T08:19:43.045Z</published>
    <updated>2016-04-09T10:48:37.640Z</updated>
    
    <content type="html">&lt;h1 id=&quot;76位进制内任意进制数的转换&quot;&gt;&lt;a href=&quot;#76位进制内任意进制数的转换&quot; class=&quot;headerlink&quot; title=&quot;76位进制内任意进制数的转换&quot;&gt;&lt;/a&gt;76位进制内任意进制数的转换&lt;/h1&gt;&lt;p&gt;压缩数据用，无损压缩&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;package main&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;fmt&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;math&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;strconv&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;strings&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var tenToAny map[int]string = map[int]string&amp;#123;0: &amp;quot;0&amp;quot;, 1: &amp;quot;1&amp;quot;, 2: &amp;quot;2&amp;quot;, 3: &amp;quot;3&amp;quot;, 4: &amp;quot;4&amp;quot;, 5: &amp;quot;5&amp;quot;, 6: &amp;quot;6&amp;quot;, 7: &amp;quot;7&amp;quot;, 8: &amp;quot;8&amp;quot;, 9: &amp;quot;9&amp;quot;, 10: &amp;quot;a&amp;quot;, 11: &amp;quot;b&amp;quot;, 12: &amp;quot;c&amp;quot;, 13: &amp;quot;d&amp;quot;, 14: &amp;quot;e&amp;quot;, 15: &amp;quot;f&amp;quot;, 16: &amp;quot;g&amp;quot;, 17: &amp;quot;h&amp;quot;, 18: &amp;quot;i&amp;quot;, 19: &amp;quot;j&amp;quot;, 20: &amp;quot;k&amp;quot;, 21: &amp;quot;l&amp;quot;, 22: &amp;quot;m&amp;quot;, 23: &amp;quot;n&amp;quot;, 24: &amp;quot;o&amp;quot;, 25: &amp;quot;p&amp;quot;, 26: &amp;quot;q&amp;quot;, 27: &amp;quot;r&amp;quot;, 28: &amp;quot;s&amp;quot;, 29: &amp;quot;t&amp;quot;, 30: &amp;quot;u&amp;quot;, 31: &amp;quot;v&amp;quot;, 32: &amp;quot;w&amp;quot;, 33: &amp;quot;x&amp;quot;, 34: &amp;quot;y&amp;quot;, 35: &amp;quot;z&amp;quot;, 36: &amp;quot;:&amp;quot;, 37: &amp;quot;;&amp;quot;, 38: &amp;quot;&amp;lt;&amp;quot;, 39: &amp;quot;=&amp;quot;, 40: &amp;quot;&amp;gt;&amp;quot;, 41: &amp;quot;?&amp;quot;, 42: &amp;quot;@&amp;quot;, 43: &amp;quot;[&amp;quot;, 44: &amp;quot;]&amp;quot;, 45: &amp;quot;^&amp;quot;, 46: &amp;quot;_&amp;quot;, 47: &amp;quot;&amp;#123;&amp;quot;, 48: &amp;quot;|&amp;quot;, 49: &amp;quot;&amp;#125;&amp;quot;, 50: &amp;quot;A&amp;quot;, 51: &amp;quot;B&amp;quot;, 52: &amp;quot;C&amp;quot;, 53: &amp;quot;D&amp;quot;, 54: &amp;quot;E&amp;quot;, 55: &amp;quot;F&amp;quot;, 56: &amp;quot;G&amp;quot;, 57: &amp;quot;H&amp;quot;, 58: &amp;quot;I&amp;quot;, 59: &amp;quot;J&amp;quot;, 60: &amp;quot;K&amp;quot;, 61: &amp;quot;L&amp;quot;, 62: &amp;quot;M&amp;quot;, 63: &amp;quot;N&amp;quot;, 64: &amp;quot;O&amp;quot;, 65: &amp;quot;P&amp;quot;, 66: &amp;quot;Q&amp;quot;, 67: &amp;quot;R&amp;quot;, 68: &amp;quot;S&amp;quot;, 69: &amp;quot;T&amp;quot;, 70: &amp;quot;U&amp;quot;, 71: &amp;quot;V&amp;quot;, 72: &amp;quot;W&amp;quot;, 73: &amp;quot;X&amp;quot;, 74: &amp;quot;Y&amp;quot;, 75: &amp;quot;Z&amp;quot;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func main() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fmt.Println(decimalToAny(9999, 76))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fmt.Println(anyToDecimal(&amp;quot;1F[&amp;quot;, 76))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 10进制转任意进制&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func decimalToAny(num, n int) string &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    new_num_str := &amp;quot;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var remainder int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var remainder_string string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for num != 0 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        remainder = num % n&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if 76 &amp;gt; remainder &amp;amp;&amp;amp; remainder &amp;gt; 9 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            remainder_string = tenToAny[remainder]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            remainder_string = strconv.Itoa(remainder)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        new_num_str = remainder_string + new_num_str&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        num = num / n&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return new_num_str&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// map根据value找key&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func findkey(in string) int &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    result := -1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for k, v := range tenToAny &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if in == v &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            result = k&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return result&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 任意进制转10进制&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func anyToDecimal(num string, n int) int &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var new_num float64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    new_num = 0.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    nNum := len(strings.Split(num, &amp;quot;&amp;quot;)) - 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for _, value := range strings.Split(num, &amp;quot;&amp;quot;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        tmp := float64(findkey(value))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if tmp != -1 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            new_num = new_num + tmp*math.Pow(float64(n), float64(nNum))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            nNum = nNum - 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            break&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return int(new_num)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;76位进制内任意进制数的转换&quot;&gt;&lt;a href=&quot;#76位进制内任意进制数的转换&quot; class=&quot;headerlink&quot; title=&quot;76位进制内任意进制数的转换&quot;&gt;&lt;/a&gt;76位进制内任意进制数的转换&lt;/h1&gt;&lt;p&gt;压缩数据用，无损压缩&lt;br&gt;
    
    </summary>
    
      <category term="golang" scheme="http://www.lflxp.cn/categories/golang/"/>
    
    
      <category term="golang" scheme="http://www.lflxp.cn/tags/golang/"/>
    
  </entry>
  
  <entry>
    <title>map根据value找key</title>
    <link href="http://www.lflxp.cn/2016/04/09/2016-04-09-map%E7%9A%84%E5%A6%99%E7%94%A8/"/>
    <id>http://www.lflxp.cn/2016/04/09/2016-04-09-map的妙用/</id>
    <published>2016-04-09T08:14:31.928Z</published>
    <updated>2016-04-09T10:45:46.305Z</updated>
    
    <content type="html">&lt;h1 id=&quot;golang字典根据值取找key&quot;&gt;&lt;a href=&quot;#golang字典根据值取找key&quot; class=&quot;headerlink&quot; title=&quot;golang字典根据值取找key&quot;&gt;&lt;/a&gt;golang字典根据值取找key&lt;/h1&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// map根据value找key&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func findkey(in string) int &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    result := -1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for k, v := range tenToAny &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if in == v &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            result = k&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return result&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;golang字典根据值取找key&quot;&gt;&lt;a href=&quot;#golang字典根据值取找key&quot; class=&quot;headerlink&quot; title=&quot;golang字典根据值取找key&quot;&gt;&lt;/a&gt;golang字典根据值取找key&lt;/h1&gt;
    
    </summary>
    
      <category term="golang" scheme="http://www.lflxp.cn/categories/golang/"/>
    
    
      <category term="golang" scheme="http://www.lflxp.cn/tags/golang/"/>
    
  </entry>
  
  <entry>
    <title>字符串转ASCII码</title>
    <link href="http://www.lflxp.cn/2016/04/09/2016-04-09-%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%ACascii%E7%A0%81/"/>
    <id>http://www.lflxp.cn/2016/04/09/2016-04-09-字符串转ascii码/</id>
    <published>2016-04-09T08:07:20.356Z</published>
    <updated>2016-04-09T10:48:32.823Z</updated>
    
    <content type="html">&lt;h1 id=&quot;字符转ASCII码&quot;&gt;&lt;a href=&quot;#字符转ASCII码&quot; class=&quot;headerlink&quot; title=&quot;字符转ASCII码&quot;&gt;&lt;/a&gt;字符转ASCII码&lt;/h1&gt;&lt;p&gt;最近在重构python代码，python中转ascii码异常简单 ord() ,ascii码转字符chr()&lt;br&gt;Golang找了好久，最后发现自己以前写的代码写过，记录一下。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;package main&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;fmt&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func main() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fmt.Println(charToInt(&amp;quot;lixueping&amp;quot;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var ascToStr map[int]string = map[int]string&amp;#123;32: &amp;quot; &amp;quot;, 56: &amp;quot;8&amp;quot;, 80: &amp;quot;P&amp;quot;, 104: &amp;quot;h&amp;quot;, 33: &amp;quot;!&amp;quot;, 57: &amp;quot;9&amp;quot;, 81: &amp;quot;Q&amp;quot;, 105: &amp;quot;i&amp;quot;, 34: &amp;quot;\&amp;quot;&amp;quot;, 58: &amp;quot;:&amp;quot;, 82: &amp;quot;R&amp;quot;, 106: &amp;quot;j&amp;quot;, 35: &amp;quot;#&amp;quot;, 59: &amp;quot;;&amp;quot;, 83: &amp;quot;S&amp;quot;, 107: &amp;quot;k&amp;quot;, 36: &amp;quot;$&amp;quot;, 60: &amp;quot;&amp;lt;&amp;quot;, 84: &amp;quot;T&amp;quot;, 108: &amp;quot;l&amp;quot;, 37: &amp;quot;%&amp;quot;, 61: &amp;quot;=&amp;quot;, 85: &amp;quot;U&amp;quot;, 109: &amp;quot;m&amp;quot;, 38: &amp;quot;&amp;amp;&amp;quot;, 62: &amp;quot;&amp;gt;&amp;quot;, 86: &amp;quot;V&amp;quot;, 110: &amp;quot;n&amp;quot;, 39: &amp;quot;&amp;apos;&amp;quot;, 63: &amp;quot;?&amp;quot;, 87: &amp;quot;W&amp;quot;, 111: &amp;quot;o&amp;quot;, 40: &amp;quot;(&amp;quot;, 64: &amp;quot;@&amp;quot;, 88: &amp;quot;X&amp;quot;, 112: &amp;quot;p&amp;quot;, 41: &amp;quot;)&amp;quot;, 65: &amp;quot;A&amp;quot;, 89: &amp;quot;Y&amp;quot;, 113: &amp;quot;q&amp;quot;, 42: &amp;quot;*&amp;quot;, 66: &amp;quot;B&amp;quot;, 90: &amp;quot;Z&amp;quot;, 114: &amp;quot;r&amp;quot;, 43: &amp;quot;+&amp;quot;, 67: &amp;quot;C&amp;quot;, 91: &amp;quot;[&amp;quot;, 115: &amp;quot;s&amp;quot;, 44: &amp;quot;,&amp;quot;, 68: &amp;quot;D&amp;quot;, 92: &amp;quot;\\&amp;quot;, 116: &amp;quot;t&amp;quot;, 45: &amp;quot;-&amp;quot;, 69: &amp;quot;E&amp;quot;, 93: &amp;quot;]&amp;quot;, 117: &amp;quot;u&amp;quot;, 46: &amp;quot;.&amp;quot;, 70: &amp;quot;F&amp;quot;, 94: &amp;quot;^&amp;quot;, 118: &amp;quot;v&amp;quot;, 47: &amp;quot;/&amp;quot;, 71: &amp;quot;G&amp;quot;, 95: &amp;quot;_&amp;quot;, 119: &amp;quot;w&amp;quot;, 48: &amp;quot;0&amp;quot;, 72: &amp;quot;H&amp;quot;, 96: &amp;quot;`&amp;quot;, 120: &amp;quot;x&amp;quot;, 49: &amp;quot;1&amp;quot;, 73: &amp;quot;I&amp;quot;, 97: &amp;quot;a&amp;quot;, 121: &amp;quot;y&amp;quot;, 50: &amp;quot;2&amp;quot;, 74: &amp;quot;J&amp;quot;, 98: &amp;quot;b&amp;quot;, 122: &amp;quot;z&amp;quot;, 51: &amp;quot;3&amp;quot;, 75: &amp;quot;K&amp;quot;, 99: &amp;quot;c&amp;quot;, 123: &amp;quot;&amp;#123;&amp;quot;, 52: &amp;quot;4&amp;quot;, 76: &amp;quot;L&amp;quot;, 100: &amp;quot;d&amp;quot;, 124: &amp;quot;|&amp;quot;, 53: &amp;quot;5&amp;quot;, 77: &amp;quot;M&amp;quot;, 101: &amp;quot;e&amp;quot;, 125: &amp;quot;&amp;#125;&amp;quot;, 54: &amp;quot;6&amp;quot;, 78: &amp;quot;N&amp;quot;, 102: &amp;quot;f&amp;quot;, 126: &amp;quot;~&amp;quot;, 55: &amp;quot;7&amp;quot;, 79: &amp;quot;O&amp;quot;, 103: &amp;quot;g&amp;quot;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//中文|英文字符串翻译成unicode格式&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func charToInt(in string) []int &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    tmp := []rune(in)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    result := make([]int, len(tmp))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for i := 0; i &amp;lt; len(tmp); i++ &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        result[i] = int(tmp[i])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return result&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;字符转ASCII码&quot;&gt;&lt;a href=&quot;#字符转ASCII码&quot; class=&quot;headerlink&quot; title=&quot;字符转ASCII码&quot;&gt;&lt;/a&gt;字符转ASCII码&lt;/h1&gt;&lt;p&gt;最近在重构python代码，python中转ascii码异常简单 ord() ,ascii码转字符chr()&lt;br&gt;Golang找了好久，最后发现自己以前写的代码写过，记录一下。&lt;br&gt;
    
    </summary>
    
      <category term="golang" scheme="http://www.lflxp.cn/categories/golang/"/>
    
    
      <category term="golang" scheme="http://www.lflxp.cn/tags/golang/"/>
    
  </entry>
  
</feed>
