<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.5.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="dba," />





  <link rel="alternate" href="/atom.xml" title="笑傲江湖" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.5.0" />






<meta name="description" content="MySQL Auto-Failover 功能测试MySQL Utilities 1.6 Manual 下载mysqlfailover Automatic replication health monitoring and failover123456789101112131415This utility permits users to perform replication health mon">
<meta property="og:type" content="article">
<meta property="og:title" content="mysqlfailover+vip高可用设想">
<meta property="og:url" content="http://www.lflxp.cn/2016/04/06/2016-01-29-mysqlfailover/index.html">
<meta property="og:site_name" content="笑傲江湖">
<meta property="og:description" content="MySQL Auto-Failover 功能测试MySQL Utilities 1.6 Manual 下载mysqlfailover Automatic replication health monitoring and failover123456789101112131415This utility permits users to perform replication health mon">
<meta property="og:updated_time" content="2016-04-06T11:29:31.731Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="mysqlfailover+vip高可用设想">
<meta name="twitter:description" content="MySQL Auto-Failover 功能测试MySQL Utilities 1.6 Manual 下载mysqlfailover Automatic replication health monitoring and failover123456789101112131415This utility permits users to perform replication health mon">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 6270391365704615000,
      author: '博主'
    }
  };
</script>

  <title> mysqlfailover+vip高可用设想 | 笑傲江湖 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?eb05bb32276230ed42405c8e64b1be45";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">笑傲江湖</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">思想与技术的碰撞</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-heartbeat fa-fw"></i> <br />
            
            公益404
          </a>
        </li>
      
        
        <li class="menu-item menu-item-something">
          <a href="/something" rel="section">
            
              <i class="menu-item-icon fa fa-fighter-jet fa-fw"></i> <br />
            
            留言板
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="#" class="st-search-show-outputs">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', '_VYNMxKzPVW1G-MrUtKi','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                mysqlfailover+vip高可用设想
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-04-06T18:31:45+08:00" content="2016-04-06">
              2016-04-06
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/mysql/" itemprop="url" rel="index">
                    <span itemprop="name">mysql</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/04/06/2016-01-29-mysqlfailover/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/04/06/2016-01-29-mysqlfailover/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h4 id="MySQL-Auto-Failover-功能测试"><a href="#MySQL-Auto-Failover-功能测试" class="headerlink" title="MySQL Auto-Failover 功能测试"></a><a href="http://www.ttlsa.com/mysql/the-mysql-auto-failover-function-test/" target="_blank" rel="external">MySQL Auto-Failover 功能测试</a></h4><h4 id="MySQL-Utilities-1-6-Manual-下载"><a href="#MySQL-Utilities-1-6-Manual-下载" class="headerlink" title="MySQL Utilities 1.6 Manual 下载"></a>MySQL Utilities 1.6 Manual <a href="http://dev.mysql.com/downloads/utilities/1.6.html" target="_blank" rel="external">下载</a></h4><h4 id="mysqlfailover-Automatic-replication-health-monitoring-and-failover"><a href="#mysqlfailover-Automatic-replication-health-monitoring-and-failover" class="headerlink" title="mysqlfailover Automatic replication health monitoring and failover"></a><a href="https://dev.mysql.com/doc/mysql-utilities/1.5/en/mysqlfailover.html" target="_blank" rel="external">mysqlfailover</a> Automatic replication health monitoring and failover</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">This utility permits users to perform replication health monitoring and automatic failover on a replication topology consisting of a master and its slaves. The utility is designed to run interactively or continuously refreshing the health information at periodic intervals. Its primary mission is to monitor the master for failure and when a failure occurs, execute failover to the best slave available. The utility accepts a list of slaves to be considered the candidate slave.</span><br><span class="line"></span><br><span class="line">This utility is designed to work exclusively for servers that support global transaction identifiers (GTIDs) and have gtid_mode=ON. MySQL server versions 5.6.5 and higher support GTIDs. See Replication with Global Transaction Identifiers for more information.</span><br><span class="line"></span><br><span class="line">The user can specify the interval in seconds to use for detecting the master status and generating the health report using the --interval option. At each interval, the utility will check to see if the server is alive via a ping operation followed by a check of the connector to detect if the server is still reachable. The ping operation can be controlled with the --ping option (see below).</span><br><span class="line"></span><br><span class="line">If the master is found to be offline or unreachable, the utility will execute one of the following actions based on the --failover-mode option value. The available values are:</span><br><span class="line"></span><br><span class="line">auto (default): Execute automatic failover to the list of candidates first and if no slaves are viable, continue to locate a viable candidate from the list of slaves. If no slaves are found to be a viable candidate, the utility will generate and error and exit.</span><br><span class="line"></span><br><span class="line">Once a candidate is found, the utility will conduct failover to the best slave. The command will test each candidate slave listed for the prerequisites. Once a candidate slave is elected, it is made a slave of each of the other slaves thereby collecting any transactions executed on other slaves but not the candidate. In this way, the candidate becomes the most up-to-date slave.</span><br><span class="line"></span><br><span class="line">elect: This mode is the same as auto, except if no candidates specified in the list of candidate slaves are viable, then it does not check the remaining slaves, and instead generates an error and then exits.</span><br><span class="line"></span><br><span class="line">fail: This mode produces an error and does not failover when the master is downed. This mode is used to provide periodic health monitoring without the failover action taken.</span><br></pre></td></tr></table></figure>
<p>For all options that permit specifying multiple servers, the options require a comma-separated list of connection parameters in the following form (where the password, port, and socket are optional).:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;*user*&gt;[:&lt;*passwd*&gt;]@&lt;*host*&gt;[:&lt;*port*&gt;][:&lt;*socket*&gt;] or &lt;*login-path*&gt;[:&lt;*port*&gt;][:&lt;*socket*&gt;]</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="安装mysqlfailover"><a href="#安装mysqlfailover" class="headerlink" title="安装mysqlfailover"></a>安装mysqlfailover</h1><ol>
<li>下载MySQL Utilities 1.6 Manual <a href="http://dev.mysql.com/downloads/utilities/1.6.html" target="_blank" rel="external">下载</a></li>
<li>选择<a href="http://cdn.mysql.com//Downloads/Connector-Python/mysql-connector-python_2.1.3-1debian8.2_all.deb" target="_blank" rel="external">Debian Linux 8.2 (Architecture Independent), DEB</a></li>
<li>安装 dpkg -i mysql-connector-python_2.1.3-1debian8.2_all.deb </li>
<li>创建用户并给予权限： <strong>grant SUPER, GRANT OPTION, REPLICATION SLAVE, SELECT, RELOAD, DROP, CREATE, INSERT on <em>.</em> to root@’localhost’ identified by ‘system’;</strong></li>
<li>运行 mysqlfailover –master=root:system@localhost:3306 –discover-slaves-login=<font color="#8B0000"><strong>root:pass</strong></font> –log=/tmp/log.txt –force –verbose –daemon=start</li>
<li>failover Percona 搭建<a href="https://www.percona.com/blog/2014/07/03/failover-mysql-utilities-part-2-mysqlfailover/" target="_blank" rel="external">参考</a> </li>
</ol>
<h1 id="搭建主从注意事项"><a href="#搭建主从注意事项" class="headerlink" title="搭建主从注意事项:"></a>搭建主从注意事项:</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">搭建主从主机名全部用主机名，即dns域名，如果端口不一致则使用master_port=6666 mysqlfailover会自动发现从的端口(不一样也可以)</span><br><span class="line"></span><br><span class="line">mysql&gt; change master to master_host=&apos;**com.cstonline.oper.default.data.MHA-01**&apos;,&lt;font color=#8B0000&gt;**master_port=6666**&lt;/font&gt;,master_user=&apos;**root**&apos;,master_password=&apos;**pass**&apos;,master_auto_position=1;</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="遇到问题以及解决办法"><a href="#遇到问题以及解决办法" class="headerlink" title="遇到问题以及解决办法"></a>遇到问题以及解决办法</h1><blockquote>
<p>报错: <a href="http://stackoverflow.com/questions/24267017/importerror-no-module-named-connector-conversion" target="_blank" rel="external">ImportError: No module named connector.conversion</a></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">From Can&apos;t run MySql Utilities:</span><br><span class="line"></span><br><span class="line">MYSQL Utilities assumes that the MySQL Connector for Python has been installed. If you install it (http://dev.mysql.com/downloads/connector/python/), MySQL Utilities should run OK.</span><br></pre></td></tr></table></figure>
<blockquote>
<p>报错: Discovering slaves for master at localhost:6666</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WARNING: There are slaves that have not been registered with --report-host or --report-port (--verbose for more details).</span><br></pre></td></tr></table></figure>
<blockquote>
<p>报错 ERROR: User root on 172.16.1.89@3307 does not have sufficient privileges to execute the failover command (required: SUPER, GRANT OPTION, REPLICATION SLAVE, SELECT, RELOAD, DROP, CREATE, INSERT).</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant SUPER, GRANT OPTION, REPLICATION SLAVE, SELECT, RELOAD, DROP, CREATE, INSERT on *.* to root@&apos;localhost&apos; identified by &apos;system&apos;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>报错 ERROR Failover requires –master-info-repository=TABLE for all slaves.</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在从端添加参数master_info_repository=TABLE #将master.info文件用table来存储，件事刷新这个文件的频率，5.7也建议，默认FILE</span><br><span class="line">The utility will check to see if the slaves are using the option --master-info-repository=TABLE. If they are not, the utility will stop with an error.</span><br></pre></td></tr></table></figure>
<blockquote>
<p>报错 <a href="http://blog.chinaunix.net/uid-26435987-id-3178010.html" target="_blank" rel="external">ERROR: Query failed. 1406 (22001): Data too long for column ‘host’ at row 1</a></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">解决办法：</span><br><span class="line">CREATE TABLE `student` (</span><br><span class="line">  `sno`    int(11)     NOT NULL,</span><br><span class="line">  `sname`  varchar(20) NOT NULL,</span><br><span class="line">  `***`    varchar(20) NOT NULL</span><br><span class="line">)DEFAULT CHARSET=utf8;</span><br><span class="line">&lt;上面`***`是性别的英文，被网站系统屏蔽掉了&gt;T_T</span><br><span class="line">就是在上面这个语句后加入DEFAULT CHARSET=utf8即可。</span><br></pre></td></tr></table></figure>
<h1 id="机制"><a href="#机制" class="headerlink" title="机制"></a>机制</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. 自动检测 </span><br><span class="line"> </span><br><span class="line">2016-01-29 18:59:18 PM INFO Master may be down. Waiting for 3 seconds.</span><br></pre></td></tr></table></figure>
<h1 id="切换日志"><a href="#切换日志" class="headerlink" title="切换日志"></a>切换日志</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">2016-01-29 19:57:41 PM INFO Failed to reconnect to the master after 3 attemps.</span><br><span class="line">2016-01-29 19:57:41 PM CRITICAL Master is confirmed to be down or unreachable.</span><br><span class="line">2016-01-29 19:57:41 PM INFO Failover starting in &apos;auto&apos; mode...</span><br><span class="line">2016-01-29 19:57:41 PM INFO Checking eligibility of slave debian:3306 for candidate.</span><br><span class="line">2016-01-29 19:57:41 PM INFO GTID_MODE=ON ... Ok</span><br><span class="line">2016-01-29 19:57:41 PM INFO Replication user exists ... Ok</span><br><span class="line">2016-01-29 19:57:41 PM INFO Candidate slave debian:3306 will become the new master.</span><br><span class="line">2016-01-29 19:57:41 PM INFO Checking slaves status (before failover).</span><br><span class="line">2016-01-29 19:57:41 PM INFO Preparing candidate for failover.</span><br><span class="line">2016-01-29 19:57:41 PM INFO No missing transactions found on com.cstonline.oper.default.data.MHA-02:3306. Skipping connection of candidate as slave.</span><br><span class="line">2016-01-29 19:57:41 PM INFO Creating replication user if it does not exist.</span><br><span class="line">2016-01-29 19:57:41 PM INFO Stopping slaves.</span><br><span class="line">2016-01-29 19:57:41 PM INFO Performing STOP on all slaves.</span><br><span class="line">2016-01-29 19:57:41 PM WARNING Executing stop on slave debian:3306 WARN - slave is not configured with this master</span><br><span class="line">2016-01-29 19:57:41 PM INFO Executing stop on slave debian:3306 Ok</span><br><span class="line">2016-01-29 19:57:41 PM WARNING Executing stop on slave com.cstonline.oper.default.data.MHA-02:3306 WARN - slave is not configured with this master</span><br><span class="line">2016-01-29 19:57:41 PM INFO Executing stop on slave com.cstonline.oper.default.data.MHA-02:3306 Ok</span><br><span class="line">2016-01-29 19:57:41 PM INFO Switching slaves to new master.</span><br><span class="line">2016-01-29 19:57:41 PM INFO Disconnecting new master as slave.</span><br><span class="line">2016-01-29 19:57:41 PM INFO Execute on debian:3306: RESET SLAVE ALL</span><br><span class="line">2016-01-29 19:57:41 PM INFO Starting slaves.</span><br><span class="line">2016-01-29 19:57:41 PM INFO Performing START on all slaves.</span><br><span class="line">2016-01-29 19:57:41 PM INFO Executing start on slave com.cstonline.oper.default.data.MHA-02:3306 Ok</span><br><span class="line">2016-01-29 19:57:41 PM INFO Checking slaves for errors.</span><br><span class="line">2016-01-29 19:57:41 PM INFO com.cstonline.oper.default.data.MHA-02:3306 status: Ok</span><br><span class="line">2016-01-29 19:57:41 PM INFO Failover complete.</span><br><span class="line">2016-01-29 19:57:41 PM INFO Discovering slaves for master at debian:3306</span><br><span class="line">2016-01-29 19:57:41 PM INFO Discovering slave at com.cstonline.oper.default.data.MHA-02:3306</span><br><span class="line">2016-01-29 19:57:41 PM INFO Found slave: com.cstonline.oper.default.data.MHA-02:3306</span><br><span class="line">2016-01-29 19:57:41 PM INFO Server &apos;com.cstonline.oper.default.data.MHA-02:3306&apos; is using MySQL version 5.6.12-log.</span><br><span class="line">2016-01-29 19:57:46 PM INFO Unregistering existing instances from slaves.</span><br><span class="line">2016-01-29 19:57:46 PM INFO Registering instance on master.</span><br><span class="line">2016-01-29 19:57:46 PM INFO Getting health for master: debian:3306.</span><br><span class="line">2016-01-29 19:57:47 PM INFO Master status: binlog: binlog.000004, position:1292</span><br><span class="line">2016-01-29 19:57:47 PM INFO Getting health for master: debian:3306.</span><br><span class="line">2016-01-29 19:57:57 PM INFO Getting health for master: debian:3306.</span><br><span class="line">2016-01-29 19:57:57 PM INFO Master status: binlog: binlog.000004, position:1292</span><br><span class="line">2016-01-29 19:57:57 PM INFO Master status: binlog: binlog.000004, position:1292</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="OPTIONS"><a href="#OPTIONS" class="headerlink" title="OPTIONS"></a>OPTIONS</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br></pre></td><td class="code"><pre><span class="line">mysqlfailover accepts the following command-line options:</span><br><span class="line"></span><br><span class="line"> --help</span><br><span class="line"></span><br><span class="line">Display a help message and exit.</span><br><span class="line"></span><br><span class="line"> --license</span><br><span class="line"></span><br><span class="line">Display license information and exit.</span><br><span class="line"></span><br><span class="line"> --candidates=&lt;candidate slave connections&gt;</span><br><span class="line"></span><br><span class="line">Connection information for candidate slave servers. Valid only with failover command. List multiple slaves in comma-separated list.</span><br><span class="line"></span><br><span class="line">To connect to a server, it is necessary to specify connection parameters such as user name, host name, password, and either a port or socket. MySQL Utilities provides a number of ways to supply this information. All of the methods require specifying your choice via a command-line option such as --server, --master, --slave, etc. The methods include the following in order of most secure to least secure.</span><br><span class="line"></span><br><span class="line">Use login-paths from your .mylogin.cnf file (encrypted, not visible). Example : &lt;login-path&gt;[:&lt;port&gt;][:&lt;socket&gt;]</span><br><span class="line"></span><br><span class="line">Use a configuration file (unencrypted, not visible) Note: available in release-1.5.0. Example : &lt;configuration-file-path&gt;[:&lt;section&gt;]</span><br><span class="line"></span><br><span class="line">Specify the data on the command-line (unencrypted, visible). Example : &lt;user&gt;[:&lt;passwd&gt;]@&lt;host&gt;[:&lt;port&gt;][:&lt;socket&gt;]</span><br><span class="line"></span><br><span class="line"> --daemon=&lt;command&gt;</span><br><span class="line"></span><br><span class="line">Run as a daemon. The command can be start (start daemon), stop (stop daemon), restart (stop then start the daemon) or nodetach (start but do not detach the process). This option is only available for POSIX systems.</span><br><span class="line"></span><br><span class="line"> --discover-slaves-login=&lt;user:password&gt;</span><br><span class="line"></span><br><span class="line">At startup, query master for all registered slaves and use the user name and password specified to connect. Supply the user and password in the form &lt;user&gt;[:&lt;passwd&gt;] or &lt;login-path&gt;. For example, --discover=joe:secret will use &apos;joe&apos; as the user and &apos;secret&apos; as the password for each discovered slave.</span><br><span class="line"></span><br><span class="line"> --exec-after=&lt;script&gt;</span><br><span class="line"></span><br><span class="line">Name of script to execute after failover or switchover. Script name may include the path.</span><br><span class="line"></span><br><span class="line"> --exec-before=&lt;script&gt;</span><br><span class="line"></span><br><span class="line">Name of script to execute before failover or switchover. Script name may include the path.</span><br><span class="line"></span><br><span class="line"> --exec-fail-check=&lt;script&gt;</span><br><span class="line"></span><br><span class="line">Name of script to execute on each interval to invoke failover.</span><br><span class="line"></span><br><span class="line"> --exec-post-failover=&lt;script&gt;</span><br><span class="line"></span><br><span class="line">Name of script to execute after failover is complete and the utility has refreshed the health report.</span><br><span class="line"></span><br><span class="line"> --failover-mode=&lt;mode&gt;, -f &lt;mode&gt;</span><br><span class="line"></span><br><span class="line">Action to take when the master fails. &apos;auto&apos; = automatically fail to best slave, &apos;elect&apos; = fail to candidate list or if no candidate meets criteria fail, &apos;fail&apos; = take no action and stop when master fails. Default = &apos;auto&apos;.</span><br><span class="line"></span><br><span class="line"> --force</span><br><span class="line"></span><br><span class="line">Override the registration check on master for multiple instances of the console monitoring the same master. See notes.</span><br><span class="line"></span><br><span class="line"> --interval=&lt;seconds&gt;, -i &lt;seconds&gt;</span><br><span class="line"></span><br><span class="line">Interval in seconds for polling the master for failure and reporting health. Default = 15 seconds. Minimum is 5 seconds.</span><br><span class="line"></span><br><span class="line"> --log=&lt;log_file&gt;</span><br><span class="line"></span><br><span class="line">Specify a log file to use for logging messages</span><br><span class="line"></span><br><span class="line"> --log-age=&lt;days&gt;</span><br><span class="line"></span><br><span class="line">Specify maximum age of log entries in days. Entries older than this will be purged on startup. Default = 7 days.</span><br><span class="line"></span><br><span class="line"> --master=&lt;connection&gt;</span><br><span class="line"></span><br><span class="line">Connection information for the master server.</span><br><span class="line"></span><br><span class="line">To connect to a server, it is necessary to specify connection parameters such as user name, host name, password, and either a port or socket. MySQL Utilities provides a number of ways to supply this information. All of the methods require specifying your choice via a command-line option such as --server, --master, --slave, etc. The methods include the following in order of most secure to least secure.</span><br><span class="line"></span><br><span class="line">Use login-paths from your .mylogin.cnf file (encrypted, not visible). Example : &lt;login-path&gt;[:&lt;port&gt;][:&lt;socket&gt;]</span><br><span class="line"></span><br><span class="line">Use a configuration file (unencrypted, not visible) Note: available in release-1.5.0. Example : &lt;configuration-file-path&gt;[:&lt;section&gt;]</span><br><span class="line"></span><br><span class="line">Specify the data on the command-line (unencrypted, visible). Example : &lt;user&gt;[:&lt;passwd&gt;]@&lt;host&gt;[:&lt;port&gt;][:&lt;socket&gt;]</span><br><span class="line"></span><br><span class="line"> --max-position=&lt;position&gt;</span><br><span class="line"></span><br><span class="line">Used to detect slave delay. The maximum difference between the master&apos;s log position and the slave&apos;s reported read position of the master. A value greater than this means the slave is too far behind the master. Default = 0.</span><br><span class="line"></span><br><span class="line"> --pedantic, -p</span><br><span class="line"></span><br><span class="line">Used to stop failover if some inconsistencies are found, such as errant transactions on slaves or SQL thread errors, during server checks. By default, the utility only generates warnings if issues are found when checking a slave&apos;s status during failover, and it will continue its execution unless this option is specified.</span><br><span class="line"></span><br><span class="line"> --pidfile=&lt;pidfile&gt;</span><br><span class="line"></span><br><span class="line">Pidfile for running mysqlfailover as a daemon. This file contains the PID (process identifier), that uniquely identifies a process. It is needed to identify and control the process forked by mysqlfailover.</span><br><span class="line"></span><br><span class="line"> --ping=&lt;number&gt;</span><br><span class="line"></span><br><span class="line">Number of ping attempts for detecting a downed server. Default is 3 seconds.</span><br><span class="line"></span><br><span class="line">Note</span><br><span class="line">On some platforms, this is the same as number of seconds to wait for ping to return.</span><br><span class="line"></span><br><span class="line"> --report-values=&lt;report_values&gt;</span><br><span class="line"></span><br><span class="line">Report values used in mysqlfailover running as a daemon. It can be health, gtid or uuid. Multiple values can be used separated by commas.</span><br><span class="line"></span><br><span class="line">health</span><br><span class="line"></span><br><span class="line">Display the replication health of the topology.</span><br><span class="line"></span><br><span class="line">gtid</span><br><span class="line"></span><br><span class="line">Display the master&apos;s list of executed GTIDs, contents of the GTID variables; @@GLOBAL.GTID_EXECUTED, @@GLOBAL.GTID_PURGED and @@GLOBAL.GTID_OWNED.</span><br><span class="line"></span><br><span class="line">uuid</span><br><span class="line"></span><br><span class="line">Display universally unique identifiers (UUIDs) for all servers.</span><br><span class="line"></span><br><span class="line">Default = health.</span><br><span class="line"></span><br><span class="line"> --rpl-user=:&lt;replication_user&gt;</span><br><span class="line"></span><br><span class="line">The user and password for the replication user requirement, in the form: &lt;user&gt;[:&lt;password&gt;] or &lt;login-path&gt;. E.g. rpl:passwd</span><br><span class="line"></span><br><span class="line">Default = None.</span><br><span class="line"></span><br><span class="line"> --script-threshold=&lt;return_code&gt;</span><br><span class="line"></span><br><span class="line">Value for external scripts to trigger aborting the operation if result is greater than or equal to the threshold.</span><br><span class="line"></span><br><span class="line">Default = None (no threshold checking).</span><br><span class="line"></span><br><span class="line"> --seconds-behind=&lt;seconds&gt;</span><br><span class="line"></span><br><span class="line">Used to detect slave delay (only for health reporting purposes). The maximum number of seconds behind the master permitted before slave is considered behind the master in the health report state. Default = 0.</span><br><span class="line"></span><br><span class="line"> --slaves=&lt;slave connections&gt;</span><br><span class="line"></span><br><span class="line">Connection information for slave servers. List multiple slaves in comma-separated list. The list will be evaluated literally whereby each server is considered a slave to the master listed regardless if they are a slave of the master.</span><br><span class="line"></span><br><span class="line">To connect to a server, it is necessary to specify connection parameters such as user name, host name, password, and either a port or socket. MySQL Utilities provides a number of ways to supply this information. All of the methods require specifying your choice via a command-line option such as --server, --master, --slave, etc. The methods include the following in order of most secure to least secure.</span><br><span class="line"></span><br><span class="line">Use login-paths from your .mylogin.cnf file (encrypted, not visible). Example : &lt;login-path&gt;[:&lt;port&gt;][:&lt;socket&gt;]</span><br><span class="line"></span><br><span class="line">Use a configuration file (unencrypted, not visible) Note: available in release-1.5.0. Example : &lt;configuration-file-path&gt;[:&lt;section&gt;]</span><br><span class="line"></span><br><span class="line">Specify the data on the command-line (unencrypted, visible). Example : &lt;user&gt;[:&lt;passwd&gt;]@&lt;host&gt;[:&lt;port&gt;][:&lt;socket&gt;]</span><br><span class="line"></span><br><span class="line"> --ssl-ca</span><br><span class="line"></span><br><span class="line">The path to a file that contains a list of trusted SSL CAs.</span><br><span class="line"></span><br><span class="line"> --ssl-cert</span><br><span class="line"></span><br><span class="line">The name of the SSL certificate file to use for establishing a secure connection.</span><br><span class="line"></span><br><span class="line"> --ssl-key</span><br><span class="line"></span><br><span class="line">The name of the SSL key file to use for establishing a secure connection.</span><br><span class="line"></span><br><span class="line"> --ssl</span><br><span class="line"></span><br><span class="line">Specifies if the server connection requires use of SSL. If an encrypted connection cannot be established, the connection attempt fails. Default setting is 0 (SSL not required).</span><br><span class="line"></span><br><span class="line"> --timeout=&lt;seconds&gt;</span><br><span class="line"></span><br><span class="line">Maximum timeout in seconds to wait for each replication command to complete. For example, timeout for slave waiting to catch up to master.</span><br><span class="line"></span><br><span class="line">Default = 3.</span><br><span class="line"></span><br><span class="line"> --verbose, -v</span><br><span class="line"></span><br><span class="line">Specify how much information to display. Use this option multiple times to increase the amount of information. For example, -v = verbose, -vv = more verbose, -vvv = debug.</span><br><span class="line"></span><br><span class="line"> --version</span><br><span class="line"></span><br><span class="line">Display version information and exit.</span><br><span class="line"></span><br><span class="line">NOTES</span><br><span class="line"></span><br><span class="line">The login user must have the appropriate permissions for the utility to check servers and monitor their status (e.g., SHOW SLAVE STATUS, SHOW MASTER STATUS). The user must also have permissions to execute the failover procedure (e.g., STOP SLAVE, START SLAVE, WAIT_UNTIL_SQL_THREAD_AFTER_GTIDS, CHANGE MASTER TO ...). Lastly, the user must have the REPLICATE SLAVE privilege for slaves to connect to their master. The same permissions are required by the failover utility for master and slaves in order to run successfully. In particular, users connected to slaves, candidates and master require SUPER, GRANT OPTION, REPLICATION SLAVE, RELOAD, DROP, CREATE, INSERT and SELECT privileges.</span><br><span class="line"></span><br><span class="line">The DROP, CREATE, INSERT and SELECT privileges are required to register the failover instance on the initial master or the new master (after a successful failover). Therefore, since any slave can become the new master, slaves and candidates also require those privileges. The utility checks permissions for the master, slaves, and candidates at startup.</span><br></pre></td></tr></table></figure>

      
    </div>

    <div>
      
        
<div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center">
  <div>坚持技术分享，您的支持将鼓励我继续创作！</div>
  <button id="rewardButton", disable="enable", onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}", style="cursor: pointer; border: 0; outline: 0; border-radius: 100%; padding: 0; margin: 0; letter-spacing: normal; text-transform: none; text-indent: 0px; text-shadow: none">
    <span onmouseover="this.style.color='rgb(236,96,0)';this.style.background='rgb(204,204,204)'" onMouseOut="this.style.color='#fff';this.style.background='rgb(236,96,0)'" style="display: inline-block; width: 70px; height: 70px; border-radius: 100%; line-height: 81px; color: #fff; font: 400 35px/75px 'microsofty'; background: rgb(236,96,0)">赏</span>
  </button>
  <div id="QR" style="display: none;">
    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/weixin.jpg" alt="爱像水墨青花 WeChat Pay" style="width: 200px; max-width: 100%; display: inline-block"/>
        <p>微信打赏</p>
      </div>
    
    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="爱像水墨青花 Alipay" style="width: 200px; max-width: 100%; display: inline-block"/>
        <p>支付宝打赏</p>
      </div>
    
  </div>
</div>

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/dba/" rel="tag">#dba</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/04/06/2016-01-29-django命令汇总/" rel="next" title="命令解释">
                <i class="fa fa-chevron-left"></i> 命令解释
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/04/06/2016-01-30-第三章 视图和URL配置/" rel="prev" title="第三章 视图和URL配置">
                第三章 视图和URL配置 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <div class="ds-share flat" data-thread-key="2016/04/06/2016-01-29-mysqlfailover/"
     data-title="mysqlfailover+vip高可用设想"
     data-content=""
     data-url="http://www.lflxp.cn/2016/04/06/2016-01-29-mysqlfailover/">
  <div class="ds-share-inline">
    <ul  class="ds-share-icons-16">

      <li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li>
      <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li>
      <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQ空间</a></li>
      <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">腾讯微博</a></li>
      <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li>

    </ul>
    <div class="ds-share-icons-more">
    </div>
  </div>
</div>
      
    </div>
  </div>


          </div>
          

  <p>热评文章</p>
  <div class="ds-top-threads" data-range="weekly" data-num-items="4"></div>


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/04/06/2016-01-29-mysqlfailover/"
           data-title="mysqlfailover+vip高可用设想" data-url="http://www.lflxp.cn/2016/04/06/2016-01-29-mysqlfailover/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/123.jpg"
               alt="爱像水墨青花" />
          <p class="site-author-name" itemprop="name">爱像水墨青花</p>
          <p class="site-description motion-element" itemprop="description">控制自己就能控制世界</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">61</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">23</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">20</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/lflxp" target="_blank">
                  
                    <i class="fa fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.lflxp.cn" target="_blank">
                  
                    <i class="fa fa-twitter"></i>
                  
                  我的博客
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://aws.lflxp.cn" target="_blank">
                  
                    <i class="fa fa-weibo"></i>
                  
                  管理系统
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.baidu.com" target="_blank">
                  
                    <i class="fa fa-phone"></i>
                  
                  百度
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://go.lflxp.cn" target="_blank">
                  
                    <i class="fa fa-thumbs-up"></i>
                  
                  GO圣经
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://aws.amazon.com/cn" target="_blank">
                  
                    <i class="fa fa-thumbs-up"></i>
                  
                  Aws
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://theme-next.iissnan.com/getting-started.html" target="_blank">
                  
                    <i class="fa fa-thumbs-up"></i>
                  
                  NexT
                </a>
              </span>
            
          
        </div>

        
        

        
        <div class="links-of-blogroll motion-element">
          
            <div class="links-of-blogroll-title">Links</div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://fmo008.github.io" target="_blank">波波</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://zhaochj.github.io" target="_blank">昌建</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://aws.lflxp.cn/" target="_blank">监控平台</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://wrapbootstrap.com/preview/WB0R5L90S" target="_blank">监控专业平台</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.jiankongbao.com/new_server" target="_blank">监控宝（原型）</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://lflxp.cn" target="_blank">我的博客</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://github.com/lixueping" target="_blank">GITHUB-lixueping</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://github.com/lflxp" target="_blank">GITHUB-lflxp</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.godoc.org" target="_blank">Golang</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.baidu.com" target="_blank">PHP</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://Python.org" target="_blank">Python</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://developer.baidu.com/bae/" target="_blank">百度BAE</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://sofar.blog.51cto.com/353572/1601552" target="_blank">Mysql_altas</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://almsaeedstudio.com/blog/10-Free-Responsive-Bootstrap-Templates-For-2016" target="_blank">网站模板</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://aws.amazon.com/cn" target="_blank">亚马逊AWS</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://github.com/kubernetes" target="_blank">Docker 集群编排系统kubernetes</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://kubernetes.io/v1.1/docs/getting-started-guides/README.html" target="_blank">kubernetes 官网</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://github.com/coreos/etcd" target="_blank">etcd服务发现github</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://coreos.com/etcd/" target="_blank">etcd 官网</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://git-scm.com/download/" target="_blank">git</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://help.github.com/" target="_blank">GitHub</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://godoc.org/" target="_blank">godoc</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://wanwang.aliyun.com" target="_blank">中国万网</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.mysql.com/" target="_blank">mysql</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.oracle.com/index.html" target="_blank">oracle</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.mongodb.com/" target="_blank">mongodb</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://hortonworks.com/hdp/whats-new/" target="_blank">HDP 2.3</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://djangobook.py3k.cn/2.0/" target="_blank">DjangoBook2.0 学习</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.iteedu.com/webtech/python/djangocn2/chapter06.php" target="_blank">DjangoBook2.0 有图片</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://docs.djangoproject.com/en/dev/howto/custom-template-tags/" target="_blank">Custom template tags and filters</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://docs.djangoproject.com/en/dev/ref/contrib/messages/" target="_blank">The messages framework</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://docs.djangoproject.com/en/dev/howto/outputting-csv/" target="_blank">Outputting CSV with Django</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://python.jobbole.com/81312/" target="_blank">Sublime Text3</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://su.baidu.com/" target="_blank">百度云CDN加速</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://jingyan.baidu.com/article/27fa7326e7208946f9271f67.html?qq-pf-to=pcqq.c2c" target="_blank">百度云CDN配置</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://go.lflxp.cn" target="_blank">GO语言圣经</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://github.com/astaxie/Go-in-Action/blob/master/ebook/zh/preface.md" target="_blank">Go实战开发之目录</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://davidstutz.github.io/bootstrap-multiselect/" target="_blank">Bootstrap-multiselect</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.jb51.net/LINUXjishu/409416.html" target="_blank">vagrant使用</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.vagrantbox.es/" target="_blank">vagrant官网资源下载</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://coreos.com/" target="_blank">CoreOs</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://echarts.baidu.com.cn/examples.html" target="_blank">ECharts</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://my.oschina.net/dddttttt/blog/304200" target="_blank">Django模板标签</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://docs.docker.com/engine/reference/builder/" target="_blank">DockerFile Builder</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://pengky.cn/zindex01.html" target="_blank">新能源科学技术</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://github.com/kalcaddle/KODExplorer" target="_blank">KODExplorer</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://code.youmeek.com/2016/02/28/2016/02/Hexo/#footer" target="_blank">Github 空间搭建 Hexo</a>
                </li>
              
            </ul>
          
        </div>

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#MySQL-Auto-Failover-功能测试"><span class="nav-number">1.</span> <span class="nav-text">MySQL Auto-Failover 功能测试</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#MySQL-Utilities-1-6-Manual-下载"><span class="nav-number">2.</span> <span class="nav-text">MySQL Utilities 1.6 Manual 下载</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#mysqlfailover-Automatic-replication-health-monitoring-and-failover"><span class="nav-number">3.</span> <span class="nav-text">mysqlfailover Automatic replication health monitoring and failover</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#安装mysqlfailover"><span class="nav-number"></span> <span class="nav-text">安装mysqlfailover</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#搭建主从注意事项"><span class="nav-number"></span> <span class="nav-text">搭建主从注意事项:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#遇到问题以及解决办法"><span class="nav-number"></span> <span class="nav-text">遇到问题以及解决办法</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#机制"><span class="nav-number"></span> <span class="nav-text">机制</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#切换日志"><span class="nav-number"></span> <span class="nav-text">切换日志</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#OPTIONS"><span class="nav-number"></span> <span class="nav-text">OPTIONS</span></a></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">爱像水墨青花</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  


  




<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=0.5.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=0.5.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=0.5.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=0.5.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"lflxp"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
      <script src="/vendors/ua-parser-js/dist/ua-parser.min.js"></script>
      <script src="/js/src/hook-duoshuo.js"></script>
    
  





  
  
  

  

  

</body>
</html>
