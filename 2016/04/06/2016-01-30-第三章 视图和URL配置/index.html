<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.5.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="django," />





  <link rel="alternate" href="/atom.xml" title="笑傲江湖" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.5.0" />






<meta name="description" content="第三章前一章中，我们解释了如何建立一个 Django 项目并启动 Django 开发服务器。 在这一章，你将会学到用Django创建动态网页的基本知识。
你的第一个基于Django的页面： Hello World正如我们的第一个目标，创建一个网页，用来输出这个著名的示例信息：
Hello world.
如果你曾经发布过Hello world页面，但是没有使用网页框架，只是简单的在hello.htm">
<meta property="og:type" content="article">
<meta property="og:title" content="第三章 视图和URL配置">
<meta property="og:url" content="http://www.lflxp.cn/2016/04/06/2016-01-30-第三章 视图和URL配置/index.html">
<meta property="og:site_name" content="笑傲江湖">
<meta property="og:description" content="第三章前一章中，我们解释了如何建立一个 Django 项目并启动 Django 开发服务器。 在这一章，你将会学到用Django创建动态网页的基本知识。
你的第一个基于Django的页面： Hello World正如我们的第一个目标，创建一个网页，用来输出这个著名的示例信息：
Hello world.
如果你曾经发布过Hello world页面，但是没有使用网页框架，只是简单的在hello.htm">
<meta property="og:updated_time" content="2016-04-06T11:25:47.763Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="第三章 视图和URL配置">
<meta name="twitter:description" content="第三章前一章中，我们解释了如何建立一个 Django 项目并启动 Django 开发服务器。 在这一章，你将会学到用Django创建动态网页的基本知识。
你的第一个基于Django的页面： Hello World正如我们的第一个目标，创建一个网页，用来输出这个著名的示例信息：
Hello world.
如果你曾经发布过Hello world页面，但是没有使用网页框架，只是简单的在hello.htm">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 6270391365704615000,
      author: '博主'
    }
  };
</script>

  <title> 第三章 视图和URL配置 | 笑傲江湖 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?eb05bb32276230ed42405c8e64b1be45";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">笑傲江湖</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">思想与技术的碰撞</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-heartbeat fa-fw"></i> <br />
            
            公益404
          </a>
        </li>
      
        
        <li class="menu-item menu-item-something">
          <a href="/something" rel="section">
            
              <i class="menu-item-icon fa fa-fighter-jet fa-fw"></i> <br />
            
            留言板
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="#" class="st-search-show-outputs">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', '_VYNMxKzPVW1G-MrUtKi','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                第三章 视图和URL配置
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-04-06T18:31:45+08:00" content="2016-04-06">
              2016-04-06
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Django-book-2-0/" itemprop="url" rel="index">
                    <span itemprop="name">Django book 2.0</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/04/06/2016-01-30-第三章 视图和URL配置/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/04/06/2016-01-30-第三章 视图和URL配置/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="第三章"><a href="#第三章" class="headerlink" title="第三章"></a>第三章</h1><p>前一章中，我们解释了如何建立一个 Django 项目并启动 Django 开发服务器。 在这一章，你将会学到用Django创建动态网页的基本知识。</p>
<h3 id="你的第一个基于Django的页面：-Hello-World"><a href="#你的第一个基于Django的页面：-Hello-World" class="headerlink" title="你的第一个基于Django的页面： Hello World"></a><font color="#008000">你的第一个基于Django的页面： Hello World</font></h3><p>正如我们的第一个目标，创建一个网页，用来输出这个著名的示例信息：</p>
<pre><code>Hello world.
</code></pre><p>如果你曾经发布过Hello world页面，但是没有使用网页框架，只是简单的在hello.html文本文件中输入Hello World，然后上传到任意的一个网页服务器上。 注意，在这个过程中，你已经说明了两个关于这个网页的关键信息： 它包括（字符串 “Hello world”）和它的URL( <a href="http://www.example.com/hello.html" target="_blank" rel="external">http://www.example.com/hello.html</a> , 如果你把文件放在子目录，也可能是 <a href="http://www.example.com/files/hello.html)。" target="_blank" rel="external">http://www.example.com/files/hello.html)。</a></p>
<p>使用Django，你会用不同的方法来说明这两件事 页面的内容是靠view function（视图函数） 来产生，URL定义在 URLconf 中。首先，我们先写一个Hello World视图函数。</p>
<h3 id="第一份视图："><a href="#第一份视图：" class="headerlink" title="第一份视图："></a><font color="#008000">第一份视图：</font></h3><p>在上一章使用django-admin.py startproject制作的mysite文件夹中，创建一个叫做views.py的空文件。这个Python模块将包含这一章的视图。 请留意，Django对于view.py的文件命名没有特别的要求，它不在乎这个文件叫什么。但是根据约定，把它命名成view.py是个好主意，这样有利于其他开发者读懂你的代码，正如你很容易的往下读懂本文。</p>
<p>我们的Hello world视图非常简单。 这些是完整的函数和导入声明，你需要输入到views.py文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from django.http import HttpResponse</span><br><span class="line"></span><br><span class="line">def hello(request):</span><br><span class="line">    return HttpResponse(&quot;Hello world&quot;)</span><br></pre></td></tr></table></figure>
<p>我们逐行逐句地分析一遍这段代码：</p>
<blockquote>
<p>首先，我们从 django.http 模块导入（import） HttpResponse 类。参阅附录 H 了解更多关于 HttpRequest 和 HttpResponse 的细节。 我们需要导入这些类，因为我们会在后面用到。</p>
<p>接下来，我们定义一个叫做hello 的视图函数。</p>
<p>每个视图函数至少要有一个参数，通常被叫作request。 这是一个触发这个视图、包含当前Web请求信息的对象，是类django.http.HttpRequest的一个实例。在这个示例中，我们虽然不用request做任何事情，然而它仍必须是这个视图的第一个参数。</p>
<p>注意视图函数的名称并不重要；并不一定非得以某种特定的方式命名才能让 Django 识别它。 在这里我们把它命名为：hello，是因为这个名称清晰的显示了视图的用意。同样地，你可以用诸如：hello_wonderful_beautiful_world，这样难看的短句来给它命名。 在下一小节（Your First URLconf），将告诉你Django是如何找到这个函数的。</p>
<p>这个函数只有简单的一行代码： 它仅仅返回一个HttpResponse对象，这个对象包含了文本“Hello world”。</p>
</blockquote>
<p>这里主要讲的是： 一个视图就是Python的一个函数。这个函数第一个参数的类型是HttpRequest；它返回一个HttpResponse实例。为了使一个Python的函数成为一个Django可识别的视图，它必须满足这两个条件。 （也有例外，但是我们稍后才会接触到。</p>
<h3 id="你的第一个URLconf"><a href="#你的第一个URLconf" class="headerlink" title="你的第一个URLconf"></a><font color="#008000">你的第一个URLconf</font></h3><p>现在，如果你再运行：python manage.py runserver，你还将看到Django的欢迎页面，而看不到我们刚才写的Hello world显示页面。 那是因为我们的mysite项目还对hello视图一无所知。我们需要通过一个详细描述的URL来显式的告诉它并且激活这个视图。 （继续我们刚才类似发布静态HTML文件的例子。现在我们已经创建了HTML文件，但还没有把它上传至服务器的目录。）为了绑定视图函数和URL，我们使用URLconf。</p>
<p>URLconf 就像是 Django 所支撑网站的目录。 它的本质是 URL 模式以及要为该 URL 模式调用的视图函数之间的映射表。 你就是以这种方式告诉 Django，对于这个 URL 调用这段代码，对于那个 URL 调用那段代码。 例如，当用户访问/foo/时，调用视图函数foo_view()，这个视图函数存在于Python模块文件view.py中。</p>
<p>前一章中执行 django-admin.py startproject 时，该脚本会自动为你建了一份 URLconf（即 urls.py 文件）。 默认的urls.py会像下面这个样子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">from django.conf.urls.defaults import *</span><br><span class="line"></span><br><span class="line"># Uncomment the next two lines to enable the admin:</span><br><span class="line"># from django.contrib import admin</span><br><span class="line"># admin.autodiscover()</span><br><span class="line"></span><br><span class="line">urlpatterns = patterns(&apos;&apos;,</span><br><span class="line">    # Example:</span><br><span class="line">    # (r&apos;^mysite/&apos;, include(&apos;mysite.foo.urls&apos;)),</span><br><span class="line"></span><br><span class="line">    # Uncomment the admin/doc line below and add &apos;django.contrib.admindocs&apos;</span><br><span class="line">    # to INSTALLED_APPS to enable admin documentation:</span><br><span class="line">    # (r&apos;^admin/doc/&apos;, include(&apos;django.contrib.admindocs.urls&apos;)),</span><br><span class="line"></span><br><span class="line">    # Uncomment the next line to enable the admin:</span><br><span class="line">    # (r&apos;^admin/&apos;, include(admin.site.urls)),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>默认的URLconf包含了一些被注释起来的Django中常用的功能，仅仅只需去掉这些注释就可以开启这些功能. 下面是URLconf中忽略被注释的行后的实际内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from django.conf.urls.defaults import *</span><br><span class="line"></span><br><span class="line">urlpatterns = patterns(&apos;&apos;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>让我们逐行解释一下代码：</p>
<ul>
<li><p>第一行导入django.conf.urls.defaults下的所有模块，它们是Django URLconf的基本构造。 这包含了一个patterns函数。</p>
</li>
<li><p>第二行调用 patterns() 函数并将返回结果保存到 urlpatterns 变量。patterns函数当前只有一个参数—一个空的字符串。 （这个字符串可以被用来表示一个视图函数的通用前缀。具体我们将在第八章里面介绍。）</p>
</li>
</ul>
<p>当前应该注意是 urlpatterns 变量， Django 期望能从 ROOT_URLCONF 模块中找到它。 该变量定义了 URL 以及用于处理这些 URL 的代码之间的映射关系。 默认情况下，URLconf 所有内容都被注释起来了——Django 应用程序还是白版一块。 （注：那是上一节中Django怎么知道显示欢迎页面的原因。 如果 URLconf 为空，Django 会认定你才创建好新项目，因此也就显示那种信息。</p>
<p>如果想在URLconf中加入URL和view，只需增加映射URL模式和view功能的Python tuple即可. 这里演示如何添加view中hello功能.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from django.conf.urls.defaults import *</span><br><span class="line">from mysite.views import hello</span><br><span class="line"></span><br><span class="line">urlpatterns = patterns(&apos;&apos;,</span><br><span class="line">    (&apos;^hello/$&apos;, hello),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>请留意：为了简洁，我们移除了注释代码。 如果你喜欢的话，你可以保留那些行。）</p>
<p>我们做了两处修改。</p>
<ul>
<li><p>首先，我们从模块 (在 Python 的 import 语法中， mysite/views.py 转译为 mysite.views ) 中引入了 hello 视图。 （这假设mysite/views.py在你的Python搜索路径上。关于搜索路径的解释，请参照下文。）</p>
</li>
<li><p>接下来，我们为urlpatterns加上一行： (‘^hello/$’, hello), 这行被称作URLpattern，它是一个Python的元组。元组中第一个元素是模式匹配字符串（正则表达式）；第二个元素是那个模式将使用的视图函数。</p>
</li>
</ul>
<p>简单来说，我们只是告诉 Django，所有指向 URL /hello/ 的请求都应由 hello 这个视图函数来处理。</p>
<p>Python 搜索路径</p>
<p><em>Python</em> 搜索路径 就是使用 import 语句时，Python 所查找的系统目录清单。</p>
<p>举例来说，假定你将 Python 路径设置为 </p>
<font color="#008000">[‘’,’/usr/lib/python2.4/site-packages’,’/home/username/djcode/‘] 。如果执行代码 from foo import bar </font>，Python 将会首先在当前目录查找 foo.py 模块( Python 路径第一项的空字符串表示当前目录)。 如果文件不存在，Python将查找 <font color="#008000">/usr/lib/python2.4/site-packages/foo.py </font>文件。<br><br>如果你想看Python搜索路径的值，运行Python交互解释器，然后输入：<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import sys</span><br><span class="line">&gt;&gt;&gt; print sys.path</span><br></pre></td></tr></table></figure><br><br>通常，你不必关心 Python 搜索路径的设置。 Python 和 Django 会在后台自动帮你处理好。<br><br>讨论一下URLpattern的语法是值得的，因为它不是显而易见的。 虽然我们想匹配地址/hello/，但是模式看上去与这有点差别。 这就是为什么：<br><br>&gt; Django在检查URL模式前，移除每一个申请的URL开头的斜杠(/)。 这意味着我们为/hello/写URL模式不用包含斜杠(/)。（刚开始，这样可能看起来不直观，但这样的要求简化了许多工作，如URL模式内嵌，我们将在第八章谈及。）<br><br>&gt; 模式包含了一个尖号(^)和一个美元符号($)。这些都是正则表达式符号，并且有特定的含义： 上箭头要求表达式对字符串的头部进行匹配，美元符号则要求表达式对字符串的尾部进行匹配。<br>&gt;<br>&gt; 最好还是用范例来说明一下这个概念。 如果我们用尾部不是$的模式’^hello/’，那么任何以/hello/开头的URL将会匹配，例如：/hello/foo 和/hello/bar，而不仅仅是/hello/。类似地，如果我们忽略了尖号(^)，即’hello/$’，那么任何以hello/结尾的URL将会匹配，例如：/foo/bar/hello/。如果我们简单使用hello/，即没有^开头和$结尾，那么任何包含hello/的URL将会匹配，如：/foo/hello/bar。因此，我们使用这两个符号以确保只有/hello/匹配，不多也不少。<br>&gt;<br>&gt; 你大多数的URL模式会以^开始、以$结束，但是拥有复杂匹配的灵活性会更好。<br>&gt;<br>&gt; 你可能会问：如果有人申请访问/hello（尾部没有斜杠/）会怎样。 因为我们的URL模式要求尾部有一个斜杠(/)，那个申请URL将不匹配。 然而，默认地，任何不匹配或尾部没有斜杠(/)的申请URL，将被重定向至尾部包含斜杠的相同字眼的URL。 （这是受配置文件setting中APPEND_SLASH项控制的，参见附件D。）<br>&gt;<br>&gt; 如果你是喜欢所有URL都以’/’结尾的人（Django开发者的偏爱），那么你只需要在每个URL后添加斜杠，并且设置”APPEND_SLASH”为”True”. 如果不喜欢URL以斜杠结尾或者根据每个URL来决定，那么需要设置”APPEND_SLASH”为”False”,并且根据你自己的意愿来添加结尾斜杠/在URL模式后.<br><br>另外需要注意的是，我们把hello视图函数作为一个对象传递，而不是调用它。 这是 Python (及其它动态语言的) 的一个重要特性： 函数是一级对象（first-class objects）， 也就是说你可以像传递其它变量一样传递它们。 很酷吧？<br><br>启动Django开发服务器来测试修改好的 URLconf, 运行命令行 python manage.py runserver 。 (如果你让它一直运行也可以，开发服务器会自动监测代码改动并自动重新载入，所以不需要手工重启） 开发服务器的地址是 <a href="http://127.0.0.1:8000/" target="_blank" rel="external">http://127.0.0.1:8000/</a> ，打开你的浏览器访问 <a href="http://127.0.0.1:8000/hello/" target="_blank" rel="external">http://127.0.0.1:8000/hello/</a> 。 你就可以看到输出结果了。 开发服务器将自动检测Python代码的更改来做必要的重新加载， 所以你不需要重启Server在代码更改之后。服务器运行地址<code>http://127.0.0.1:8000/</code> ，所以打开浏览器直接输入<code>http://127.0.0.1:8000/hello/</code> ，你将看到由你的Django视图输出的Hello world。<br><br>万岁！ 你已经创建了第一个Django的web页面。<br><br>正则表达式<br><br>正则表达式 (或 regexes ) 是通用的文本模式匹配的方法。 Django URLconfs 允许你 使用任意的正则表达式来做强有力的URL映射，不过通常你实际上可能只需要使用很少的一 部分功能。 这里是一些基本的语法。<br><br><table><br>    <tr><br>        <th>符号</th><br>        <th>匹配</th><br>    </tr><br>    <tr><td>. (dot) </td><td>任意单一字符</td></tr><br>    <tr><td>\d</td><td>任意一位数字</td></tr><br>    <tr><td>[A-Z] </td>A 到 Z中任意一个字符（大写）<td></td></tr><br>    <tr><td>[a-z] </td>a 到 z中任意一个字符（小写）<td></td></tr><br>    <tr><td>[A-Za-z] </td><td>a 到 z中任意一个字符（不区分大小写）</td></tr><br>    <tr><td>+ </td><td>匹配一个或更多 (例如, \d+ 匹配一个或 多个数字字符)</td></tr><br>    <tr><td>[^/]+  </td>一个或多个不为‘/’的字符<td></td></tr><br>    <tr><td><em> </em></td><td>零个或一个之前的表达式（例如：\d? 匹配零个或一个数字）</td></tr><br>    <tr><td> </td><td>匹配0个或更多 (例如, \d* 匹配0个 或更多数字字符)</td></tr><br>    <tr><td>{1,3}</td><td>介于一个和三个（包含）之前的表达式（例如，\d{1,3}匹配一个或两个或三个数字）</td></tr><br></table><br><br>有关正则表达式的更多内容，请访问 <a href="http://www.djangoproject.com/r/python/re-module/" target="_blank" rel="external">http://www.djangoproject.com/r/python/re-module/</a>.<br><br>### <font color="#008000">关于“404错误”的快速参考</font><br>目前，我们的URLconf只定义了一个单独的URL模式： 处理URL /hello/ 。 当请求其他URL会怎么样呢？<br><br>让我们试试看，运行Django开发服务器并访问类似 <a href="http://127.0.0.1:8000/goodbye/" target="_blank" rel="external">http://127.0.0.1:8000/goodbye/</a> 或者 <a href="http://127.0.0.1:8000/hello/subdirectory/" target="_blank" rel="external">http://127.0.0.1:8000/hello/subdirectory/</a> ，甚至 <a href="http://127.0.0.1:8000/" target="_blank" rel="external">http://127.0.0.1:8000/</a> (网站根目录)。 你将会看到一个 “Page not found” 页面（图 3－2）。 因为你的URL申请在URLconf中没有定义，所以Django显示这条信息。<br><br>Djangos 404 页面截屏.<br><br>图3-1： Django的404 Error页<br><br>这个页面比原始的404错误信息更加实用。 它同时精确的告诉你Django调用哪个URLconf及其包含的每个模式。 这样，你应该能了解到为什么这个请求会抛出404错误。<br><br>当然，这些敏感的信息应该只呈现给你－开发者。 如果是部署到了因特网上的站点就不应该暴露 这些信息。 出于这个考虑，这个“Page not found”页面只会在 调试模式（debug mode） 下 显示。 我们将在以后说明怎么关闭调试模式。<br><br>### <font color="#008000">关于网站根目录的快速参考。</font>

<p>在最后一节，如果你想通过<a href="http://127.0.0.1:8000/看网站根目录你将看到一个404错误消息。Django不会增加任何东西在网站根目录，在任何情况下这个URL都不是特殊的" target="_blank" rel="external">http://127.0.0.1:8000/看网站根目录你将看到一个404错误消息。Django不会增加任何东西在网站根目录，在任何情况下这个URL都不是特殊的</a> 就像在URLconf中的其他条目一样，它也依赖于指定给它的URL模式.</p>
<p>尽管匹配网站根目录的URL模式不能想象，但是还是值得提一下的. 当为网站根目录实现一个视图，你需要使用URL模式<code>‘^$’</code> , 它代表一个空字符串。 例如:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from mysite.views import hello, my_homepage_view</span><br><span class="line"></span><br><span class="line">urlpatterns = patterns(&apos;&apos;,</span><br><span class="line">    (&apos;^$&apos;, my_homepage_view),</span><br><span class="line">    # ...</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="Django是怎么处理请求的"><a href="#Django是怎么处理请求的" class="headerlink" title="Django是怎么处理请求的"></a><font color="#008000">Django是怎么处理请求的</font></h3><p>在继续我们的第二个视图功能之前，让我们暂停一下去了解更多一些有关Django是怎么工作的知识. 具体地说，当你通过在浏览器里敲<a href="http://127.0.0.1:8000/hello/来访问Hello" target="_blank" rel="external">http://127.0.0.1:8000/hello/来访问Hello</a> world消息得时候，Django在后台有些什么动作呢？</p>
<p>所有均开始于setting文件。当你运行python manage.py runserver，脚本将在于manage.py同一个目录下查找名为setting.py的文件。这个文件包含了所有有关这个Django项目的配置信息，均大写： TEMPLATE_DIRS , DATABASE_NAME , 等. 最重要的设置时ROOT_URLCONF，它将作为URLconf告诉Django在这个站点中那些Python的模块将被用到</p>
<p>还记得什么时候django-admin.py startproject创建文件settings.py和urls.py吗？自动创建的settings.py包含一个ROOT_URLCONF配置用来指向自动产生的urls.py. 打开文件settings.py你将看到如下：</p>
<pre><code>ROOT_URLCONF = &apos;mysite.urls&apos;
</code></pre><p>相对应的文件是mysite/urls.py</p>
<p>当访问 URL /hello/ 时，Django 根据 ROOT_URLCONF 的设置装载 URLconf 。 然后按顺序逐个匹配URLconf里的URLpatterns，直到找到一个匹配的。 当找到这个匹配 的URLpatterns就调用相关联的view函数，并把 HttpRequest 对象作为第一个参数。 （稍后再给出 HttpRequest 的更多信息） （我们将在后面看到HttpRequest的标准）</p>
<p>正如我们在第一个视图例子里面看到的，一个视图功能必须返回一个HttpResponse。 一旦做完，Django将完成剩余的转换Python的对象到一个合适的带有HTTP头和body的Web Response，（例如，网页内容）。</p>
<p>总结一下：</p>
<p>1.进来的请求转入/hello/.</p>
<p>2.Django通过在ROOT_URLCONF配置来决定根URLconf.</p>
<p>3.Django在URLconf中的所有URL模式中，查找第一个匹配/hello/的条目。</p>
<p>4.如果找到匹配，将调用相应的视图函数</p>
<p>5.视图函数返回一个HttpResponse</p>
<p>6.Django转换HttpResponse为一个适合的HTTP response， 以Web page显示出来</p>
<p>你现在知道了怎么做一个 Django-powered 页面了，真的很简单，只需要写视图函数并用 URLconfs把它们和URLs对应起来。 你可能会认为用一系列正则表达式将URLs映射到函数也许会比较慢，但事实却会让你惊讶。</p>
<h3 id="第二个视图：-动态内容"><a href="#第二个视图：-动态内容" class="headerlink" title="第二个视图： 动态内容"></a><font color="#008000">第二个视图： 动态内容</font></h3><p>我们的Hello world视图是用来演示基本的Django是如何工作的，但是它不是一个动态网页的例子，因为网页的内容一直是一样的. 每次去查看/hello/，你将会看到相同的内容，它类似一个静态HTML文件。</p>
<p>我们的第二个视图，将更多的放些动态的东西例如当前日期和时间显示在网页上 这将非常好，简单的下一步，因为它不引入了数据库或者任何用户的输入，仅仅是输出显示你的服务器的内部时钟. 它仅仅有限度的比Helloworld刺激一些，但是它将演示一些新的概念</p>
<p>这个视图需要做两件事情： 计算当前日期和时间，并返回包含这些值的HttpResponse 如果你对python很有经验，那肯定知道在python中需要利用datetime模块去计算时间 下面演示如何去使用它：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import datetime</span><br><span class="line">&gt;&gt;&gt; now = datetime.datetime.now()</span><br><span class="line">&gt;&gt;&gt; now</span><br><span class="line">datetime.datetime(2008, 12, 13, 14, 9, 39, 2731)</span><br><span class="line">&gt;&gt;&gt; print now</span><br><span class="line">2008-12-13 14:09:39.002731</span><br></pre></td></tr></table></figure>
<p>以上代码很简单，并没有涉及Django。 它仅仅是Python代码。 需要强调的是，你应该意识到哪些是纯Python代码，哪些是Django特性代码。 （见上） 因为你学习了Django，希望你能将Django的知识应用在那些不一定需要使用Django的项目上。</p>
<p>为了让Django视图显示当前日期和时间，我们仅需要把语句：datetime.datetime.now()放入视图函数，然后返回一个HttpResponse对象即可。代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from django.http import HttpResponse</span><br><span class="line">import datetime</span><br><span class="line"></span><br><span class="line">def current_datetime(request):</span><br><span class="line">    now = datetime.datetime.now()</span><br><span class="line">    html = &quot;&lt;html&gt;&lt;body&gt;It is now %s.&lt;/body&gt;&lt;/html&gt;&quot; % now</span><br><span class="line">    return HttpResponse(html)</span><br></pre></td></tr></table></figure>
<p>正如我们的hello函数一样，这个函数也保存在view.py中。为了简洁，上面我们隐藏了hello函数。下面是完整的view.py文件内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from django.http import HttpResponse</span><br><span class="line">import datetime</span><br><span class="line"></span><br><span class="line">def hello(request):</span><br><span class="line">    return HttpResponse(&quot;Hello world&quot;)</span><br><span class="line"></span><br><span class="line">def current_datetime(request):</span><br><span class="line">    now = datetime.datetime.now()</span><br><span class="line">    html = &quot;&lt;html&gt;&lt;body&gt;It is now %s.&lt;/body&gt;&lt;/html&gt;&quot; % now</span><br><span class="line">    return HttpResponse(html)</span><br></pre></td></tr></table></figure>
<p>（从现在开始，如非必要，本文不再重复列出先前的代码。 你应该懂得识别哪些是新代码，哪些是先前的。） （见上）</p>
<p>让我们分析一下改动后的views.py：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">在文件顶端，我们添加了一条语句：import datetime。这样就可以计算日期了。</span><br><span class="line"></span><br><span class="line">函数中的第一行代码计算当前日期和时间，并以 datetime.datetime 对象的形式保存为局部变量 now 。</span><br><span class="line"></span><br><span class="line">函数的第二行代码用 Python 的格式化字符串（format-string）功能构造了一段 HTML 响应。 字符串中的%s是占位符，字符串后面的百分号表示用它后面的变量now的值来代替%s。变量%s是一个datetime.datetime对象。它虽然不是一个字符串，但是%s（格式化字符串）会把它转换成字符串，如：2008-12-13 14:09:39.002731。这将导致HTML的输出字符串为：It is now 2008-12-13 14:09:39.002731。</span><br><span class="line">6</span><br><span class="line"></span><br><span class="line">（目前HTML是有错误的，但我们这样做是为了保持例子的简短。）</span><br><span class="line"></span><br><span class="line">最后，正如我们刚才写的hello函数一样，视图返回一个HttpResponse对象，它包含生成的响应。</span><br></pre></td></tr></table></figure>
<p>添加上述代码之后，还要在urls.py中添加URL模式，以告诉Django由哪一个URL来处理这个视图。 用/time/之类的字眼易于理解：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from django.conf.urls.defaults import *</span><br><span class="line">from mysite.views import hello, current_datetime</span><br><span class="line"></span><br><span class="line">urlpatterns = patterns(&apos;&apos;,</span><br><span class="line">    (&apos;^hello/$&apos;, hello),</span><br><span class="line">    (&apos;^time/$&apos;, current_datetime),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>这里，我们修改了两个地方。 首先，在顶部导入current_datetime函数； 其次，也是比较重要的：添加URL模式来映射URL中的/time/和新视图。 理解了么？</p>
<p>写好视图并且更新URLconf之后，运行命令python manage.py runserver以启动服务，在浏览器中输入<a href="http://127.0.0.1:8000/time/。" target="_blank" rel="external">http://127.0.0.1:8000/time/。</a> 你将看到当前的日期和时间。</p>
<h3 id="Django时区"><a href="#Django时区" class="headerlink" title="Django时区"></a><font color="#008000">Django时区</font></h3><p>视乎你的机器，显示的日期与时间可能和实际的相差几个小时。 这是因为Django是有时区意识的，并且默认时区为America/Chicago。 （它必须有个值，它的默认值是Django的诞生地：美国/芝加哥）如果你处在别的时区，你需要在settings.py文件中更改这个值。请参见它里面的注释，以获得最新世界时区列表。</p>
<h3 id="URL配置和松耦合"><a href="#URL配置和松耦合" class="headerlink" title="URL配置和松耦合"></a><font color="#008000">URL配置和松耦合</font></h3><p>现在是好时机来指出Django和URL配置背后的哲学： 松耦合 原则。 简单的说，松耦合是一个 重要的保证互换性的软件开发方法。</p>
<p>Django的URL配置就是一个很好的例子。 在Django的应用程序中，URL的定义和视图函数之间是松 耦合的，换句话说，决定URL返回哪个视图函数和实现这个视图函数是在两个不同的地方。 这使得 开发人员可以修改一块而不会影响另一块。</p>
<p>例如，考虑一下current_datetime视图。 如果我们想把它的URL 从原来的 /time/ 改变到 /currenttime/ ，我们只需要快速的修改一下URL配置即可， 不用担心这个函数的内部实现。 同样的，如果我们想要修改这个函数的内部实现也不用担心会影响 到对应的URL。</p>
<p>此外，如果我们想要输出这个函数到 一些 URL， 我们只需要修改URL配置而不用 去改动视图的代码。 在这个例子里，current_datetime被两个URL使用。 这是一个故弄玄虚的例子，但这个方法迟早会用得上。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = patterns(&apos;&apos;,</span><br><span class="line">    (&apos;^hello/$&apos;, hello),</span><br><span class="line">    (&apos;^time/$&apos;, current_datetime),</span><br><span class="line">    (&apos;^another-time-page/$&apos;, current_datetime),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>URLconf和视图是松耦合的。 我们将在本书中继续给出这一重要哲学的相关例子。</p>
<h3 id="第三个视图-动态URL"><a href="#第三个视图-动态URL" class="headerlink" title="第三个视图 动态URL"></a><font color="#008000">第三个视图 动态URL</font></h3><p>在我们的<code>current_datetime</code> 视图范例中，尽管内容是动态的，但是URL （ /time/ ）是静态的。 在 大多数动态web应用程序，URL通常都包含有相关的参数。 举个例子，一家在线书店会为每一本书提供一个URL，如：/books/243/、/books/81196/。</p>
<p>让我们创建第三个视图来显示当前时间和加上时间偏差量的时间，设计是这样的： /time/plus/1/ 显示当前时间＋1个小时的页面 /time/plus/2/ 显示当前时间＋2个小时的页面 /time/plus/3/ 显示当前时间＋3个小时的页面，以此类推。</p>
<p>新手可能会考虑写不同的视图函数来处理每个时间偏差量，URL配置看起来就象这样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = patterns(&apos;&apos;,</span><br><span class="line">    (&apos;^time/$&apos;, current_datetime),</span><br><span class="line">    (&apos;^time/plus/1/$&apos;, one_hour_ahead),</span><br><span class="line">    (&apos;^time/plus/2/$&apos;, two_hours_ahead),</span><br><span class="line">    (&apos;^time/plus/3/$&apos;, three_hours_ahead),</span><br><span class="line">    (&apos;^time/plus/4/$&apos;, four_hours_ahead),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>很明显，这样处理是不太妥当的。 不但有很多冗余的视图函数，而且整个应用也被限制了只支持 预先定义好的时间段，2小时，3小时，或者4小时。 如果哪天我们要实现 5 小时，我们就 不得不再单独创建新的视图函数和配置URL，既重复又混乱。 我们需要在这里做一点抽象，提取 一些共同的东西出来。</p>
<p>关于漂亮URL的一点建议</p>
<p>如果你有其它web平台的开发经验（如PHP或Java），你可能会想：嘿！让我们用查询字符串参数吧！ 就像/time/plus?hours=3里面的小时应该在查询字符串中被参数hours指定（问号后面的是参数）。</p>
<p>你 可以 在Django里也这样做 (如果你真的想要这样做，我们稍后会告诉你怎么做）， 但是Django的一个核心理念就是URL必须看起来漂亮。 URL /time/plus/3/ 更加清晰， 更简单，也更有可读性，可以很容易的大声念出来，因为它是纯文本，没有查询字符串那么 复杂。 漂亮的URL就像是高质量的Web应用的一个标志。</p>
<p>Django的URL配置系统可以使你很容易的设置漂亮的URL，而尽量不要考虑它的 反面 。</p>
<p>那么，我们如何设计程序来处理任意数量的时差？ 答案是：使用通配符（wildcard URLpatterns）。正如我们之前提到过，一个URL模式就是一个正则表达式。因此，这里可以使用d+来匹配1个以上的数字。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = patterns(&apos;&apos;,</span><br><span class="line">    # ...</span><br><span class="line">    (r&apos;^time/plus/\d+/$&apos;, hours_ahead),</span><br><span class="line">    # ...</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>这里使用# …来表示省略了其它可能存在的URL模式定义。 （见上）</p>
<p>这个URL模式将匹配类似 /time/plus/2/ , /time/plus/25/ ,甚至 /time/plus/100000000000/ 的任何URL。 更进一步，让我们把它限制在最大允许99个小时， 这样我们就只允许一个或两个数字，正则表达式的语法就是 \d{1,2} :</p>
<pre><code>(r&apos;^time/plus/\d{1,2}/$&apos;, hours_ahead),
</code></pre><p>备注</p>
<p>在建造Web应用的时候，尽可能多考虑可能的数据输入是很重要的，然后决定哪些我们可以接受。 在这里我们就设置了99个小时的时间段限制。</p>
<p>另外一个重点，正则表达式字符串的开头字母“r”。 它告诉Python这是个原始字符串，不需要处理里面的反斜杠（转义字符）。 在普通Python字符串中，反斜杠用于特殊字符的转义。比如n转义成一个换行符。 当你用r把它标示为一个原始字符串后，Python不再视其中的反斜杠为转义字符。也就是说，“n”是两个字符串：“”和“n”。由于反斜杠在Python代码和正则表达式中有冲突，因此建议你在Python定义正则表达式时都使用原始字符串。 从现在开始，本文所有URL模式都用原始字符串。</p>
<p>现在我们已经设计了一个带通配符的URL，我们需要一个方法把它传递到视图函数里去，这样 我们只用一个视图函数就可以处理所有的时间段了。 我们使用圆括号把参数在URL模式里标识 出来。 在这个例子中，我们想要把这些数字作为参数，用圆括号把 \d{1,2} 包围起来：</p>
<pre><code>(r&apos;^time/plus/(\d{1,2})/$&apos;, hours_ahead),
</code></pre><p>如果你熟悉正则表达式，那么你应该已经了解，正则表达式也是用圆括号来从文本里 提取 数据的。</p>
<p>最终的URLconf包含上面两个视图，如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">from django.conf.urls.defaults import *</span><br><span class="line">from mysite.views import hello, current_datetime, hours_ahead</span><br><span class="line"></span><br><span class="line">urlpatterns = patterns(&apos;&apos;,</span><br><span class="line">    (r&apos;^hello/$&apos;, hello),</span><br><span class="line">    (r&apos;^time/$&apos;, current_datetime),</span><br><span class="line">    (r&apos;^time/plus/(\d&#123;1,2&#125;)/$&apos;, hours_ahead),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>现在开始写 hours_ahead 视图。</p>
<p>编码次序</p>
<p>这个例子中，我们先写了URLpattern ，然后是视图，但是在前面的例子中， 我们先写了视图，然后是URLpattern 。 哪一种方式比较好？</p>
<p>嗯，怎么说呢，每个开发者是不一样的。</p>
<p>如果你是喜欢从总体上来把握事物（注： 或译为“大局观”）类型的人，你应该会想在项目开始 的时候就写下所有的URL配置。</p>
<p>如果你从更像是一个自底向上的开发者，你可能更喜欢先写视图， 然后把它们挂接到URL上。 这同样是可以的。</p>
<p>最后，取决与你喜欢哪种技术，两种方法都是可以的。 (见上)</p>
<p>hours_ahead 和我们以前写的 current_datetime 很象，关键的区别在于： 它多了一个额外参数，时间差。 以下是view代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">from django.http import Http404, HttpResponse</span><br><span class="line">import datetime</span><br><span class="line"></span><br><span class="line">def hours_ahead(request, offset):</span><br><span class="line">    try:</span><br><span class="line">        offset = int(offset)</span><br><span class="line">    except ValueError:</span><br><span class="line">        raise Http404()</span><br><span class="line">    dt = datetime.datetime.now() + datetime.timedelta(hours=offset)</span><br><span class="line">    html = &quot;&lt;html&gt;&lt;body&gt;In %s hour(s), it will be %s.&lt;/body&gt;&lt;/html&gt;&quot; % (offset, dt)</span><br><span class="line">    return HttpResponse(html)</span><br></pre></td></tr></table></figure>
<p>让我们逐行分析一下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">视图函数, hours_ahead , 有 两个 参数: request 和 offset . (见上)</span><br><span class="line"></span><br><span class="line">    request 是一个 HttpRequest 对象, 就像在 current_datetime 中一样. 再说一次好了: 每一个视图 总是 以一个 HttpRequest 对象作为 它的第一个参数。 (见上)</span><br><span class="line"></span><br><span class="line">    offset 是从匹配的URL里提取出来的。 例如：如果请求URL是/time/plus/3/，那么offset将会是3；如果请求URL是/time/plus/21/，那么offset将会是21。请注意：捕获值永远都是字符串（string）类型，而不会是整数（integer）类型，即使这个字符串全由数字构成（如：“21”）。</span><br><span class="line"></span><br><span class="line">    （从技术上来说，捕获值总是Unicode objects，而不是简单的Python字节串，但目前不需要担心这些差别。）</span><br><span class="line"></span><br><span class="line">    在这里我们命名变量为 offset ，你也可以任意命名它，只要符合Python 的语法。 变量名是无关紧要的，重要的是它的位置，它是这个函数的第二个 参数 (在 request 的后面）。 你还可以使用关键字来定义它，而不是用 位置。</span><br><span class="line"></span><br><span class="line">我们在这个函数中要做的第一件事情就是在 offset 上调用 int() . 这会把这个字符串值转换为整数。</span><br><span class="line"></span><br><span class="line">请留意：如果你在一个不能转换成整数类型的值上调用int()，Python将抛出一个ValueError异常。如：int(‘foo’)。在这个例子中，如果我们遇到ValueError异常，我们将转为抛出django.http.Http404异常——正如你想象的那样：最终显示404页面（提示信息：页面不存在）。</span><br><span class="line"></span><br><span class="line">机灵的读者可能会问： 我们在URL模式中用正则表达式(d&#123;1,2&#125;)约束它，仅接受数字怎么样？这样无论如何，offset都是由数字构成的。 答案是：我们不会这么做，因为URLpattern提供的是“适度但有用”级别的输入校验。万一这个视图函数被其它方式调用，我们仍需自行检查ValueError。 实践证明，在实现视图函数时，不臆测参数值的做法是比较好的。 松散耦合，还记得么？</span><br><span class="line"></span><br><span class="line">下一行，计算当前日期/时间，然后加上适当的小时数。 在current_datetime视图中，我们已经见过datetime.datetime.now()。这里新的概念是执行日期/时间的算术操作。我们需要创建一个datetime.timedelta对象和增加一个datetime.datetime对象。 结果保存在变量dt中。</span><br><span class="line"></span><br><span class="line">这一行还说明了，我们为什么在offset上调用int()——datetime.timedelta函数要求hours参数必须为整数类型。</span><br><span class="line"></span><br><span class="line">这行和前面的那行的的一个微小差别就是，它使用带有两个值的Python的格式化字符串功能， 而不仅仅是一个值。 因此，在字符串中有两个 %s 符号和一个以进行插入的值的元组： (offset, dt) 。</span><br><span class="line"></span><br><span class="line">最终，返回一个HTML的HttpResponse。 如今，这种方式已经过时了。</span><br></pre></td></tr></table></figure>
<p>在完成视图函数和URL配置编写后，启动Django开发服务器，用浏览器访问 <a href="http://127.0.0.1:8000/time/plus/3/" target="_blank" rel="external">http://127.0.0.1:8000/time/plus/3/</a> 来确认它工作正常。 然后是 <a href="http://127.0.0.1:8000/time/plus/5/" target="_blank" rel="external">http://127.0.0.1:8000/time/plus/5/</a> 。再然后是 <a href="http://127.0.0.1:8000/time/plus/24/" target="_blank" rel="external">http://127.0.0.1:8000/time/plus/24/</a> 。最后，访问 <a href="http://127.0.0.1:8000/time/plus/100/" target="_blank" rel="external">http://127.0.0.1:8000/time/plus/100/</a> 来检验URL配置里设置的模式是否只 接受一个或两个数字；Django会显示一个 Page not found error 页面, 和以前看到的 404 错误一样。 访问URL <a href="http://127.0.0.1:8000/time/plus/" target="_blank" rel="external">http://127.0.0.1:8000/time/plus/</a> (没有 定义时间差) 也会抛出404错误。</p>
<h3 id="Django-漂亮的出错页面"><a href="#Django-漂亮的出错页面" class="headerlink" title="Django 漂亮的出错页面"></a><font color="#008000">Django 漂亮的出错页面</font></h3><p>花几分钟时间欣赏一下我们写好的Web应用程序，然后我们再来搞点小破坏。 我们故意在 views.py 文件中引入一项 Python 错误，注释掉 hours_ahead 视图中的 offset = int(offset) 一行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">def hours_ahead(request, offset):</span><br><span class="line">    # try:</span><br><span class="line">    #     offset = int(offset)</span><br><span class="line">    # except ValueError:</span><br><span class="line">    #     raise Http404()</span><br><span class="line">    dt = datetime.datetime.now() + datetime.timedelta(hours=offset)</span><br><span class="line">    html = &quot;&lt;html&gt;&lt;body&gt;In %s hour(s), it will be %s.&lt;/body&gt;&lt;/html&gt;&quot; % (offset, dt)</span><br><span class="line">    return HttpResponse(html)</span><br></pre></td></tr></table></figure>
<p>启动开发服务器，然后访问 /time/plus/3/ 。你会看到一个包含大量信息的出错页，最上面 的一条 TypeError 信息是： “unsupported type for timedelta hours component:  unicode” .</p>
<p>怎么回事呢？ 是的， datetime.timedelta 函数要求 hours 参数必须为整型， 而我们注释掉了将 offset 转为整型的代码。 这样导致 datetime.timedelta 弹出 TypeError 异常。</p>
<p>这个例子是为了展示 Django 的出错页面。 我们来花些时间看一看这个出错页，了解一下其中 给出了哪些信息。</p>
<p>以下是值得注意的一些要点：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">在页面顶部，你可以得到关键的异常信息： 异常数据类型、异常的参数 (如本例中的 &quot;unsupported type&quot; ）、在哪个文件中引发了异常、出错的行号等等。</span><br><span class="line"></span><br><span class="line">在关键异常信息下方，该页面显示了对该异常的完整 Python 追踪信息。 这类似于你在 Python 命令行解释器中获得的追溯信息，只不过后者更具交互性。 对栈中的每一帧，Django 均显示了其文件名、函数或方法名、行号及该行源代码。</span><br><span class="line"></span><br><span class="line">点击该行代码 (以深灰色显示)，你可以看到出错行的前后几行，从而得知相关上下文情况。</span><br><span class="line"></span><br><span class="line">点击栈中的任何一帧的“Local vars”可以看到一个所有局部变量的列表，以及在出错 那一帧时它们的值。 这些调试信息相当有用。</span><br><span class="line"></span><br><span class="line">注意“Traceback”下面的“Switch to copy-and-paste view”文字。 点击这些字，追溯会 切换另一个视图，它让你很容易地复制和粘贴这些内容。 当你想同其他人分享这些异常 追溯以获得技术支持时（比如在 Django 的 IRC 聊天室或邮件列表中），可以使用它。</span><br><span class="line"></span><br><span class="line">你按一下下面的“Share this traceback on a public Web site”按钮，它将会完成这项工作。 点击它以传回追溯信息至http://www.dpaste.com/，在那里你可以得到一个单独的URL并与其他人分享你的追溯信息。</span><br><span class="line"></span><br><span class="line">接下来的“Request information”部分包含了有关产生错误的 Web 请求的大量信息： GET 和 POST、cookie 值、元数据（象 CGI 头）。 在附录H里给出了request的对象的 完整参考。</span><br><span class="line"></span><br><span class="line">Request信息的下面，“Settings”列出了 Django 使用的具体配置信息。 （我们已经提及过ROOT_URLCONF，接下来我们将向你展示各式的Django设置。 附录D覆盖了所有可用的设置。）</span><br></pre></td></tr></table></figure>
<p>Django 的出错页某些情况下有能力显示更多的信息，比如模板语法错误。 我们讨论 Django 模板系统时再说它们。 现在，取消 offset = int(offset) 这行的注释，让它重新正常 工作。</p>
<p>不知道你是不是那种使用小心放置的 print 语句来帮助调试的程序员？ 你其实可以用 Django 出错页来做这些，而不用 print 语句。 在你视图的任何位置，临时插入一个 assert False 来触发出错页。 然后，你就可以看到局部变量和程序语句了。 这里有个使用hours_ahead视图的例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">def hours_ahead(request, offset):</span><br><span class="line">    try:</span><br><span class="line">        offset = int(offset)</span><br><span class="line">    except ValueError:</span><br><span class="line">        raise Http404()</span><br><span class="line">    dt = datetime.datetime.now() + datetime.timedelta(hours=offset)</span><br><span class="line">    assert False</span><br><span class="line">    html = &quot;&lt;html&gt;&lt;body&gt;In %s hour(s), it will be %s.&lt;/body&gt;&lt;/html&gt;&quot; % (offset, dt)</span><br><span class="line">    return HttpResponse(html)</span><br></pre></td></tr></table></figure>
<p>最后，很显然这些信息很多是敏感的，它暴露了你 Python 代码的内部结构以及 Django 配置，在 Internet 上公开这信息是很愚蠢的。 不怀好意的人会尝试使用它攻击你的 Web 应用程序，做些下流之事。 因此，Django 出错信息仅在 debug 模式下才会显现。 我们稍后 说明如何禁用 debug 模式。 现在，你只要知道 Django 服务器在你开启它时默认运行在 debug 模式就行了。 （听起来很熟悉？ 页面没有发现错误，如前所述，工作正常。）</p>
<h3 id="下一章"><a href="#下一章" class="headerlink" title="下一章"></a><font color="#008000"><a href="http://djangobook.py3k.cn/2.0/chapter04/" target="_blank" rel="external">下一章</a></font></h3><p>目前为止，我们已经写好了视图函数和硬编码的HTML。 在演示核心概念时，我们所作的是为了保持简单。但是在现实世界中，这差不多总是个坏主意。</p>
<p>幸运的是，Django内建有一个简单有强大的模板处理引擎来让你分离两种工作： 下一章，我们将学习模板引擎。</p>

      
    </div>

    <div>
      
        
<div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center">
  <div>坚持技术分享，您的支持将鼓励我继续创作！</div>
  <button id="rewardButton", disable="enable", onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}", style="cursor: pointer; border: 0; outline: 0; border-radius: 100%; padding: 0; margin: 0; letter-spacing: normal; text-transform: none; text-indent: 0px; text-shadow: none">
    <span onmouseover="this.style.color='rgb(236,96,0)';this.style.background='rgb(204,204,204)'" onMouseOut="this.style.color='#fff';this.style.background='rgb(236,96,0)'" style="display: inline-block; width: 70px; height: 70px; border-radius: 100%; line-height: 81px; color: #fff; font: 400 35px/75px 'microsofty'; background: rgb(236,96,0)">赏</span>
  </button>
  <div id="QR" style="display: none;">
    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/weixin.jpg" alt="爱像水墨青花 WeChat Pay" style="width: 200px; max-width: 100%; display: inline-block"/>
        <p>微信打赏</p>
      </div>
    
    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="爱像水墨青花 Alipay" style="width: 200px; max-width: 100%; display: inline-block"/>
        <p>支付宝打赏</p>
      </div>
    
  </div>
</div>

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/django/" rel="tag">#django</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/04/06/2016-01-29-mysqlfailover/" rel="next" title="mysqlfailover+vip高可用设想">
                <i class="fa fa-chevron-left"></i> mysqlfailover+vip高可用设想
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/04/06/2016-01-30-介绍Django/" rel="prev" title="第一章:介绍Django">
                第一章:介绍Django <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <div class="ds-share flat" data-thread-key="2016/04/06/2016-01-30-第三章 视图和URL配置/"
     data-title="第三章 视图和URL配置"
     data-content=""
     data-url="http://www.lflxp.cn/2016/04/06/2016-01-30-第三章 视图和URL配置/">
  <div class="ds-share-inline">
    <ul  class="ds-share-icons-16">

      <li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li>
      <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li>
      <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQ空间</a></li>
      <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">腾讯微博</a></li>
      <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li>

    </ul>
    <div class="ds-share-icons-more">
    </div>
  </div>
</div>
      
    </div>
  </div>


          </div>
          

  <p>热评文章</p>
  <div class="ds-top-threads" data-range="weekly" data-num-items="4"></div>


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/04/06/2016-01-30-第三章 视图和URL配置/"
           data-title="第三章 视图和URL配置" data-url="http://www.lflxp.cn/2016/04/06/2016-01-30-第三章 视图和URL配置/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/123.jpg"
               alt="爱像水墨青花" />
          <p class="site-author-name" itemprop="name">爱像水墨青花</p>
          <p class="site-description motion-element" itemprop="description">控制自己就能控制世界</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">63</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">23</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">20</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/lflxp" target="_blank">
                  
                    <i class="fa fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.lflxp.cn" target="_blank">
                  
                    <i class="fa fa-twitter"></i>
                  
                  我的博客
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://aws.lflxp.cn" target="_blank">
                  
                    <i class="fa fa-weibo"></i>
                  
                  管理系统
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.baidu.com" target="_blank">
                  
                    <i class="fa fa-phone"></i>
                  
                  百度
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://go.lflxp.cn" target="_blank">
                  
                    <i class="fa fa-thumbs-up"></i>
                  
                  GO圣经
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://aws.amazon.com/cn" target="_blank">
                  
                    <i class="fa fa-thumbs-up"></i>
                  
                  Aws
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://theme-next.iissnan.com/getting-started.html" target="_blank">
                  
                    <i class="fa fa-thumbs-up"></i>
                  
                  NexT
                </a>
              </span>
            
          
        </div>

        
        

        
        <div class="links-of-blogroll motion-element">
          
            <div class="links-of-blogroll-title">Links</div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://fmo008.github.io" target="_blank">波波</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://zhaochj.github.io" target="_blank">昌建</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://aws.lflxp.cn/" target="_blank">监控平台</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://wrapbootstrap.com/preview/WB0R5L90S" target="_blank">监控专业平台</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.jiankongbao.com/new_server" target="_blank">监控宝（原型）</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://lflxp.cn" target="_blank">我的博客</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://github.com/lixueping" target="_blank">GITHUB-lixueping</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://github.com/lflxp" target="_blank">GITHUB-lflxp</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.godoc.org" target="_blank">Golang</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.baidu.com" target="_blank">PHP</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://Python.org" target="_blank">Python</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://developer.baidu.com/bae/" target="_blank">百度BAE</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://sofar.blog.51cto.com/353572/1601552" target="_blank">Mysql_altas</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://almsaeedstudio.com/blog/10-Free-Responsive-Bootstrap-Templates-For-2016" target="_blank">网站模板</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://aws.amazon.com/cn" target="_blank">亚马逊AWS</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://github.com/kubernetes" target="_blank">Docker 集群编排系统kubernetes</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://kubernetes.io/v1.1/docs/getting-started-guides/README.html" target="_blank">kubernetes 官网</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://github.com/coreos/etcd" target="_blank">etcd服务发现github</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://coreos.com/etcd/" target="_blank">etcd 官网</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://git-scm.com/download/" target="_blank">git</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://help.github.com/" target="_blank">GitHub</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://godoc.org/" target="_blank">godoc</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://wanwang.aliyun.com" target="_blank">中国万网</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.mysql.com/" target="_blank">mysql</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.oracle.com/index.html" target="_blank">oracle</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.mongodb.com/" target="_blank">mongodb</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://hortonworks.com/hdp/whats-new/" target="_blank">HDP 2.3</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://djangobook.py3k.cn/2.0/" target="_blank">DjangoBook2.0 学习</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.iteedu.com/webtech/python/djangocn2/chapter06.php" target="_blank">DjangoBook2.0 有图片</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://docs.djangoproject.com/en/dev/howto/custom-template-tags/" target="_blank">Custom template tags and filters</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://docs.djangoproject.com/en/dev/ref/contrib/messages/" target="_blank">The messages framework</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://docs.djangoproject.com/en/dev/howto/outputting-csv/" target="_blank">Outputting CSV with Django</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://python.jobbole.com/81312/" target="_blank">Sublime Text3</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://su.baidu.com/" target="_blank">百度云CDN加速</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://jingyan.baidu.com/article/27fa7326e7208946f9271f67.html?qq-pf-to=pcqq.c2c" target="_blank">百度云CDN配置</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://go.lflxp.cn" target="_blank">GO语言圣经</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://github.com/astaxie/Go-in-Action/blob/master/ebook/zh/preface.md" target="_blank">Go实战开发之目录</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://davidstutz.github.io/bootstrap-multiselect/" target="_blank">Bootstrap-multiselect</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.jb51.net/LINUXjishu/409416.html" target="_blank">vagrant使用</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.vagrantbox.es/" target="_blank">vagrant官网资源下载</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://coreos.com/" target="_blank">CoreOs</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://echarts.baidu.com.cn/examples.html" target="_blank">ECharts</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://my.oschina.net/dddttttt/blog/304200" target="_blank">Django模板标签</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://docs.docker.com/engine/reference/builder/" target="_blank">DockerFile Builder</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://pengky.cn/zindex01.html" target="_blank">新能源科学技术</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://github.com/kalcaddle/KODExplorer" target="_blank">KODExplorer</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://code.youmeek.com/2016/02/28/2016/02/Hexo/#footer" target="_blank">Github 空间搭建 Hexo</a>
                </li>
              
            </ul>
          
        </div>

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#第三章"><span class="nav-number">1.</span> <span class="nav-text">第三章</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#你的第一个基于Django的页面：-Hello-World"><span class="nav-number">1.0.1.</span> <span class="nav-text">你的第一个基于Django的页面： Hello World</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#第一份视图："><span class="nav-number">1.0.2.</span> <span class="nav-text">第一份视图：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#你的第一个URLconf"><span class="nav-number">1.0.3.</span> <span class="nav-text">你的第一个URLconf</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Django是怎么处理请求的"><span class="nav-number">1.0.4.</span> <span class="nav-text">Django是怎么处理请求的</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#第二个视图：-动态内容"><span class="nav-number">1.0.5.</span> <span class="nav-text">第二个视图： 动态内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Django时区"><span class="nav-number">1.0.6.</span> <span class="nav-text">Django时区</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#URL配置和松耦合"><span class="nav-number">1.0.7.</span> <span class="nav-text">URL配置和松耦合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#第三个视图-动态URL"><span class="nav-number">1.0.8.</span> <span class="nav-text">第三个视图 动态URL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Django-漂亮的出错页面"><span class="nav-number">1.0.9.</span> <span class="nav-text">Django 漂亮的出错页面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#下一章"><span class="nav-number">1.0.10.</span> <span class="nav-text">下一章</span></a></li></ol></li></ol></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">爱像水墨青花</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  


  




<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=0.5.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=0.5.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=0.5.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=0.5.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"lflxp"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
      <script src="/vendors/ua-parser-js/dist/ua-parser.min.js"></script>
      <script src="/js/src/hook-duoshuo.js"></script>
    
  





  
  
  

  

  

</body>
</html>
